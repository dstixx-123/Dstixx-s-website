
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="41c9bc2b-65f8-550d-8ff7-42da4e164e6a")}catch(e){}}();
(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[7355],{340176:(e,t,l)=>{"use strict";l.r(t),l.d(t,{PropertiesPanel:()=>dO});var n=l(411855),r=l(976404),a=l(629019),i=l.n(a),s=l(91408),o=l(966712),c=l(374626),d=l(498750),p=l(755887),u=l(951158),m=l(153234),h=l(776621),_=l(304783),E=l(30637),g=l(763658),y=l(572206),v=l(515009),b=l(448169),f=l(827586),S=l(271779),T=l(979441),w=l(987918),P=l(939863),k=l(293017),I=l(286954),C=l(906899),N=l(169231),A=l(103907),x=l(259927),L=l(672517),M=l(798099),O=l(297336),R=l(378905),D=l(697551),F=l(356390),V=l(852800),K=l(617453),B=l(369870),U=l(396697),H=l(848661),G=l(618056),Y=l(809511),W=l(69961),$=l(416095),z=l(147206),X=l(94500),Q=l(316081),Z=l(239671),J=l(279145),j=l(143678),q=l(109388),ee=l(188507),et=l(459593),el=l(971612),en=l(927457),er=l(243742),ea=l(268537),ei=l(46481),es=l(738269),eo=l(662275),ec=l(284321),ed=l(498606),ep=l(420186),eu=l(405206),em=l(720488),eh=l(965908),e_=l(995439),eE=l(900086),eg=l(7959),ey=l(690710),ev=l(939791),eb=l(767129),ef=l(31524),eS=l(404095),eT=l(522739),ew=l(574176),eP=l(865618),ek=l(662531),eI=l(227795),eC=l(893606),eN=l(637913),eA=l(215440),ex=(e=>(e[e.VERTICAL=0]="VERTICAL",e[e.MIDDLE_CHILD=1]="MIDDLE_CHILD",e[e.LAST_CHILD=2]="LAST_CHILD",e))(ex||{});function eL(e){let{lineConfiguration:t,hideLine:l,wideContainer:r}=e;return n.createElement("div",{className:r?"bubbled_props_line_styles--containerWide--csTgg bubbled_props_line_styles--container--XumJm":"bubbled_props_line_styles--container--XumJm"},!l&&n.createElement("div",{className:"bubbled_props_line_styles--lineContainer--pEgTS"},(()=>{switch(t){case 0:return n.createElement("div",{className:"bubbled_props_line_styles--vertical--pialf bubbled_props_line_styles--_line--Vhv8-"});case 1:return n.createElement(n.Fragment,null,n.createElement("div",{className:"bubbled_props_line_styles--middleChildVertical--PxRp- bubbled_props_line_styles--_childVertical--Y-Ypj bubbled_props_line_styles--_line--Vhv8-"}),n.createElement("div",{className:"bubbled_props_line_styles--middleChildHorizontal--ucsHZ bubbled_props_line_styles--_childHorizontal--3bRi7 bubbled_props_line_styles--_line--Vhv8-"}));case 2:return n.createElement(n.Fragment,null,n.createElement("div",{className:"bubbled_props_line_styles--lastChildVertical--83Los bubbled_props_line_styles--_childVertical--Y-Ypj bubbled_props_line_styles--_line--Vhv8-"}),n.createElement("div",{className:"bubbled_props_line_styles--lastChildHorizontal--kGsHC bubbled_props_line_styles--_childHorizontal--3bRi7 bubbled_props_line_styles--_line--Vhv8-"}))}})()),e.children)}let eM="bubbled_instances_list--minusIcon--dY8i-",eO="bubbled_instances_list--instanceIcon--aRlGl",eR="bubbled_instances_list--instanceName--09LuV",eD="bubbled_instances_list--instanceNameWide---L338 bubbled_instances_list--instanceName--09LuV",eF="bubbled_instances_list--ui3InstanceNameAndIcon--W4S9T component_prop_def_row--ui3ComponentPanelNameAndIcon--01Z6g",eV="bubbled_instances_list--ui3LineContainer--OdBbV",eK="bubbled_instances_list--ui3Line--SIYpX";var eB=l(968109),eU=l(349307);function eH(e){let{showUnbubbledPrimaryInstances:t,showNumHidden:l,wideContainer:r,scrollableContainer:a}=e,s=(0,ee.d4)(eA.K4),o=(0,eC.R)(),[c,d]=(0,n.useState)(!1),p=t?s:null==s?void 0:s.filter(e=>e.isBubbled),u=e=>{ek.l7.user("toggle-props-bubbled",()=>V.glU.togglePropsAreBubbled(e)),V.Ez5.canvasViewState().temporarilyHoveredNodes.set([])},h=e=>{V.Ez5.canvasViewState().temporarilyHoveredNodes.set(e)},_=()=>{V.Ez5.canvasViewState().temporarilyHoveredNodes.set([])},E=0,g=o&&!t&&!c&&null!=p&&p.length>5,y=g?p.slice(0,4):p;return g&&(E=p.length-4),n.createElement("div",{className:i()({"bubbled_instances_list--scrollableContainer--ob0LQ":a})},null==y?void 0:y.map((a,i)=>{let s=a.connectedGUIDs.slice(0).sort();return n.createElement(eT.D8,{className:"bubbled_instances_list--instanceSection--tLYN0",key:i,onMouseEnter:()=>h(a.connectedGUIDs),onMouseLeave:_,recordingKey:m.Pt(e,s[0])},o?t?n.createElement(e$,{data:a,showNumHidden:l,onUnbubbleInstance:u,recordingKey:m.Pt(e,"checkbox",s[0]),wideContainer:r}):n.createElement(eY,{data:a,onUnbubbleInstance:u,recordingKey:m.Pt(e,"unbubble",s[0]),wideContainer:r}):n.createElement(n.Fragment,null,n.createElement(eL,{lineConfiguration:ex.VERTICAL,hideLine:0===a.bubbledNestedInstances.length,wideContainer:r},t?n.createElement(eG,{data:a,onUnbubbleInstance:u,showNumHidden:l,wideContainer:r,recordingKey:m.Pt(e,"checkbox",s[0])}):n.createElement(n.Fragment,null,n.createElement(ew.B,{className:eO,svg:eB.A}),n.createElement("p",{className:r?eD:eR},a.name),n.createElement(eI.K0,{className:eM,svg:eU.A,"data-tooltip-type":ed.Ib.TEXT,"data-tooltip":(0,P.t)("design_systems.component_properties.unbubble_instance"),onClick:()=>{u(a.connectedGUIDs[0])},recordingKey:m.Pt(e,"unbubble",s[0])}))),a.bubbledNestedInstances.map((e,t)=>n.createElement("div",{key:t},n.createElement(eL,{lineConfiguration:t===a.bubbledNestedInstances.length-1?ex.LAST_CHILD:ex.MIDDLE_CHILD,wideContainer:r},n.createElement("div",{className:r?eD:eR},e.name))))))}),o&&!c&&E>0&&n.createElement(eN.t8,{label:(0,P.t)("design_systems.component_properties.show_more_nested_instances_rows",{count:E}),onClick:()=>d(!0)}))}function eG({data:e,onUnbubbleInstance:t,showNumHidden:l,wideContainer:r,recordingKey:a}){return n.createElement("div",{className:r?"bubbled_instances_list--checkboxContainerWide--Kdd3u bubbled_instances_list--checkboxContainer--qm3X7":"bubbled_instances_list--checkboxContainer--qm3X7"},n.createElement(eP.S,{label:e.name,checked:e.isBubbled,onChange:()=>{t(e.connectedGUIDs[0])},truncateLabel:{truncate:"line-clamp",lineClamp:2},recordingKey:a}),l&&!!e.numHidden&&n.createElement("div",{className:"bubbled_instances_list--numHidden--fW-Sr"},n.createElement(P.Tx,{id:"design_systems.component_properties.num_hidden",num:e.numHidden})))}function eY({data:e,onUnbubbleInstance:t,recordingKey:l,wideContainer:r}){let{bubbledNestedInstances:a}=e,i=n.createElement(ev.DE,{label:null,input:n.createElement("div",{className:eF},n.createElement("div",{className:eO},n.createElement(ef.y,null)),n.createElement("p",{className:eR},e.name)),icon:n.createElement("div",{className:eM},n.createElement(eb.K,{as:"button","data-tooltip-type":ed.Ib.TEXT,"data-tooltip":(0,P.t)("design_systems.component_properties.unbubble_instance"),"aria-label":(0,P.t)("design_systems.component_properties.unbubble_instance"),onClick:()=>{t(e.connectedGUIDs[0])},onMouseDown:M.dG,recordingKey:l},n.createElement(eS.f,null)))});return 0===a.length?i:n.createElement(eW,{data:e,row:i,wideContainer:r})}function eW({data:e,row:t,wideContainer:l}){return n.createElement(eN.R$,{row:t,isCollapsedByDefault:!0},e.bubbledNestedInstances.map((e,t)=>n.createElement("div",{key:t},n.createElement(ev.DE,{label:null,input:n.createElement("div",{className:eF},n.createElement("div",{className:eV},n.createElement("div",{className:eK})),n.createElement("div",{className:l?eD:eR},e.name)),icon:null}))))}function e$({data:e,onUnbubbleInstance:t,recordingKey:l,showNumHidden:r,wideContainer:a}){return n.createElement(n.Fragment,null,n.createElement(ev.Ad,{label:null,input:n.createElement(eG,{data:e,onUnbubbleInstance:t,showNumHidden:r,wideContainer:a,recordingKey:l})}),e.bubbledNestedInstances.map((e,t)=>n.createElement("div",{key:t},n.createElement(ev.Ad,{label:null,input:n.createElement("div",{className:"bubbled_instances_list--ui3CheckboxViewNestedInstance--YgTEc"},n.createElement("div",{className:eV},n.createElement("div",{className:eK})),n.createElement("div",{className:a?eD:eR},e.name))}))))}var ez=l(746806),eX=l(273226);function eQ(){let e="bubbledPropsPicker",t=(0,ee.d4)(e=>e.pickerShown),l=(0,ee.wA)(),r=new y.Mi(null==t?void 0:t.initialX,null==t?void 0:t.initialY);return(null==t?void 0:t.id)!==eX.Dd?null:n.createElement(ez.vx,{title:(0,P.t)("design_systems.component_properties.expose_nested_instances"),initialPosition:r,initialWidth:eX.wh,headerSize:"small",onClose:()=>{l(k.XE())},recordingKey:e},n.createElement("div",{className:"bubbled_props_picker--container--I6VX-"},n.createElement(eH,{showUnbubbledPrimaryInstances:!0,showNumHidden:!0,wideContainer:!0,scrollableContainer:!0,recordingKey:e})))}var eZ=l(777304),eJ=l(25888),ej=l(107244),eq=l(322515);let e0="props_panel--addButtonContainer--a58gi",e1="props_panel--addButton--jAtAX draggable_list--addButton--D0q--",e5="props_panel--dropdownRowWithIcon--03FtD",e4="props_panel--dropdownRowWithoutIcon--F8Ra-",e6="props_panel--bubbledInstancesHeading--C26v2";var e3=l(633779),e2=l(100562),e8=l(501191);function e7({recordingKey:e}){let t=(0,ee.wA)(),{version:l}=(0,er.DP)(),r="ui3"===l,a=(0,ee.d4)(ey.i$),i=(0,ee.d4)(ej.od),s=!(0,ee.d4)(eJ.Jp),o=(0,ee.d4)(e=>!!e.dropdownShown&&e.dropdownShown.type===eX.C4),c=(0,ee.d4)(e=>!!e.modalShown&&e.modalShown.type===eZ.n.type),{componentDescription:d}=(0,eh.z6)(),p=(0,ee.d4)(e=>e.pickerShown),u=o||c||(null==p?void 0:p.id)===eX.Dd,h=!!(0,ee.d4)(eA.Z3).length,_=(0,ee.d4)(eA.K4),E=!!(null==_?void 0:_.length),g=(0,ee.d4)(ec.Dr),y=(0,ee.d4)(ec.Ct),v=n.useRef(null),b=n.useRef(null),f=n.useCallback(e=>{p&&t(k.XE()),o?t(es.oB()):t(es.j7({type:eX.C4}))},[t,p,o]),S=n.useCallback(e=>{(0,eX.Pp)(i,!1,e,eX.Fv.ICON),t(eo.to({type:eZ.n,data:{propType:e}}))},[t,i]),T=n.useCallback(()=>{i&&(i.isLooseComponent?F.Y5.triggerActionInUserEditScope("create-state-group"):S(V.J0O.VARIANT))},[S,i]),w=n.useCallback(()=>{let e=q.findDOMNode(b.current),l=e?(0,ep.cn)(e,eX.wh):{};t(k.u1({id:eX.Dd,initialX:null==l?void 0:l.x,initialY:null==l?void 0:l.y}))},[t]),I=[V.J0O.BOOL,V.J0O.INSTANCE_SWAP,V.J0O.TEXT];return i?n.createElement(eg.Zk,{ref:b},n.createElement(eh.QQ,null),r&&!s?n.createElement(e_.n,{description:d}):null,n.createElement(r?te:e9,{isPanelEmpty:s,isAddPropButtonSelected:u,hasBubbledInstances:h,stateGroupSelectionMode:a,selectAddPropOptionRef:v,toggleAddPropDropdown:f,recordingKey:e}),o&&v.current&&n.createElement(em.Cf,{targetRect:v.current.getBoundingClientRect(),propagateCloseClick:!0},n.createElement(ea.W.Option,{disabled:!0,className:e4},n.createElement(P.Tx,{id:"design_systems.component_properties.create_new_property"})),n.createElement(ea.W.Option,{className:e5,onClick:T,recordingKey:m.Pt("openCreatePropModal",(0,eX.xb)(V.J0O.VARIANT))},n.createElement(eu.Nu,null,n.createElement(ei.U,{svg:e2.A},n.createElement(et.m,null))),n.createElement(P.Tx,{id:"design_systems.component_properties.across_variants"})),I.map(e=>n.createElement(ea.W.Option,{key:e,className:e5,onClick:()=>S(e),recordingKey:m.Pt("openCreatePropModal",(0,eX.xb)(e))},n.createElement(eu.Nu,null,n.createElement(ei.U,{svg:(0,eX.qe)(e)},(0,eX.zn)(e,!0))),(0,eX.xb)(e))),E&&n.createElement(n.Fragment,null,n.createElement(ea.W.Separator,null),n.createElement(ea.W.Option,{disabled:!0,className:e4},n.createElement(P.Tx,{id:"design_systems.component_properties.expose_nested_instances"})),n.createElement(ea.W.Option,{className:e5,onClick:w,recordingKey:"openBubbledPropPicker"},n.createElement(eu.Nu,null,n.createElement(ei.U,{svg:e3.A},n.createElement(el.M,null))),(0,P.t)("design_systems.component_properties.choose_instances")))),(null==p?void 0:p.id)===eX.Dd&&n.createElement(eQ,null),n.createElement(eN.e6,{containerWidth:r?eX.O2.RESIZABLE_SIDEBAR:eX.O2.REGULAR,propDimension:eX.OE.DEFINITION,guids:[i.guid],recordingKey:e,enableHidingOverflowRowsInUI3:!1}),h&&n.createElement(n.Fragment,null,n.createElement("p",{className:e6},(0,P.t)("design_systems.component_properties.bubbled_instances")),n.createElement(eH,{recordingKey:e})),r&&g&&y?n.createElement(ev.Ad,{label:null,input:n.createElement(eE.T,null)}):null):null}function e9({isPanelEmpty:e,isAddPropButtonSelected:t,hasBubbledInstances:l,stateGroupSelectionMode:r,selectAddPropOptionRef:a,toggleAddPropDropdown:i}){return n.createElement(eg.fI,{className:!e||t||l?void 0:"props_panel--panelHeaderRowFaded--r4klF draggable_list--panelHeaderRowFaded--kETRR"},n.createElement(eg.xw,{className:"props_panel--panelTitleText--i7WqG draggable_list--panelTitleText--SwKez"},n.createElement(P.Tx,{id:"design_systems.component_properties.properties"})),r!==V.iCO.STATE&&n.createElement("div",{ref:a,className:e0},n.createElement(eg.YW,{className:e1,onClick:i,selected:t,onMouseDown:e=>e.stopPropagation(),"data-tooltip-type":ed.Ib.TEXT,"data-tooltip":(0,P.t)("design_systems.component_panel.create_component_property"),svg:e8.A,recordingKey:"openCreatePropModalDropdown"})))}function te({isPanelEmpty:e,isAddPropButtonSelected:t,hasBubbledInstances:l,stateGroupSelectionMode:r,selectAddPropOptionRef:a,toggleAddPropDropdown:s}){let o=n.useRef(null),c=e&&!l?n.createElement(P.Tx,{id:"design_systems.component_properties.add_property"}):n.createElement(P.Tx,{id:"design_systems.component_properties.properties"});return n.createElement(ev.DE,{ref:o,input:c,label:c,appendedClassName:i()("props_panel--panelHeaderRow--nVOXf",{[eq.yf]:!t}),icon:r!==V.iCO.STATE?n.createElement("div",{ref:a,className:e0},n.createElement(eg.YW,{className:e1,onClick:s,selected:t,onMouseDown:e=>e.stopPropagation(),"data-tooltip-type":ed.Ib.TEXT,"data-tooltip":(0,P.t)("design_systems.component_panel.create_component_property"),recordingKey:"openCreatePropModalDropdown"},n.createElement(en.e,null))):void 0})}var tt=l(10199),tl=l(946689),tn=l(927990),tr=l(502242),ta=l(184027),ti=l(766022),ts=l(641160);function to({initialPosition:e,styleNameInputPrefix:t,styleType:l,inheritStyleKeyField:r,onCreate:a,recordingKey:i}){let s=(0,ee.wA)(),o=(0,ee.d4)(e=>e.mirror.selectedStyleProperties),c=(0,ee.d4)(e=>e.mirror.sceneGraphSelection),d=n.useRef(Object.keys(c).length>0),[p,u]=n.useState(!d.current&&void 0),h="ui3"===(0,er.DP)().version,{styleRef:_,createStyle:E}=(0,tn.u)({inheritStyleKeyField:r,isCreatingFromSelection:d.current,trackingOptions:{styleType:l}}),g=m.of(i,"submit",()=>{let e=E();s(k.XE()),s(k.Uv()),s(C.sw()),a&&a(e||"")}),y=(0,ee.d4)(e=>{let t=e.mirror.selectedStyleProperties;switch(l){case"FILL":return t.fillPaints&&"length"in t.fillPaints&&t.fillPaints.length>0;case"GRID":return t.layoutGrids&&t.layoutGrids.length>0;case"EFFECT":return t.effects&&t.effects.length>0;default:return!0}});return o.styleType?n.createElement(ta.zK.Provider,{value:ta.zM.CREATE_STYLE},n.createElement(ez.vx,{title:(e=>{switch(e){case"FILL":return(0,P.t)("design_systems.create_style.color");case"TEXT":return(0,P.t)("design_systems.create_style.text");case"EFFECT":return(0,P.t)("design_systems.create_style.effect");case"EXPORT":return(0,P.t)("design_systems.create_style.export");case"GRID":return(0,P.t)("design_systems.create_style.grid");default:return(0,P.t)("design_systems.create_style.create_new_style_generic")}})(o.styleType),headerSize:"small",initialWidth:ti.tA,initialPosition:e,onClose:()=>s(C.sw()),recordingKey:m.Pt("createStyleModal"),dragHeaderOnly:!0},n.createElement("div",{className:ts.FY},n.createElement(tr.O8,{type:o.styleType,recordingKey:"createStyleModal",styleNameInputPrefix:t,isInspectPanel:!1,selectedStyleProperties:o,showProperties:p,onEnterPressed:g}),!_&&n.createElement("div",{className:"create_style_modal--errorMessage--8ZpFE"},n.createElement(P.Tx,{id:"design_systems.create_style.an_error_occurred_while_creating_the_style"})),n.createElement(tt.AutoLayout,{horizontalAlignItems:d.current?void 0:"end",verticalAlignItems:"center",spacing:d.current?"auto":void 0,padding:h?8:16},d.current&&n.createElement(eg.JU,{className:p?"create_style_modal--fadedShowMorePropertiesLabel--g8ydZ":"create_style_modal--showMorePropertiesLabel--mJpGe",onClick:()=>u(!p)},p?n.createElement(P.Tx,{id:"design_systems.create_style.hide_options"}):n.createElement(P.Tx,{id:"design_systems.create_style.show_more_options"})),n.createElement(tl.$$,{style:{justifySelf:"right"},onClick:g,disabled:!y||!_,tabIndex:0},n.createElement(P.Tx,{id:"design_systems.create_style.create_style"})))))):null}var tc=l(507956),td=l(663668),tp=l(601607);function tu(e){let t=(0,ee.wA)(),l=(0,w.dI)(e.selectedStyleProperties.guid),r="",a="",[i,s]=(0,tp.Fk)((t,l)=>{if(e.externalStyle)return["",""];let n=t.get(l);return[(null==n?void 0:n.name)||"",(null==n?void 0:n.styleDescription)||""]},l);return e.externalStyle?(r=e.externalStyle.name||"",a=e.externalStyle.description_rt?(0,td.A)(e.externalStyle.description_rt):e.externalStyle.description||""):(0,w.dI)(e.selectedStyleProperties.guid)&&(r=i,a=(0,td.A)(s)),n.createElement(ta.zK.Provider,{value:ta.zM.EDIT_STYLE},n.createElement(tr.O8,{type:e.selectedStyleProperties.styleType,recordingKey:e.recordingKey,onEnterPressed:()=>t(C.sw()),styleName:r,styleDescription:a,hideNameDescription:e.hideNameDescription,...e}))}var tm=l(595755),th=l(987950);function t_({recordingKey:e}){let t=(0,ee.wA)(),{version:l}=(0,er.DP)(),r=(0,ee.d4)(ej._k),a=!(0,ee.d4)(eJ.Jp),i=(0,ee.d4)(e=>!!e.dropdownShown&&e.dropdownShown.type===eX.C4),s=(0,ee.d4)(e=>!!e.modalShown&&e.modalShown.type===eZ.n.type),o=(0,ee.d4)(e=>e.pickerShown),c=i||s||(null==o?void 0:o.id)===eX.Dd,d=!!(0,ee.d4)(eA.Z3).length,p=(0,ee.d4)(eA.K4),u=!!(null==p?void 0:p.length),m=n.useRef(null),h=n.useRef(null),_=n.useCallback(()=>{o&&t(k.XE()),i?t(es.oB()):t(es.j7({type:eX.C4}))},[t,o,i]),E=n.useCallback(()=>{let e=q.findDOMNode(h.current),l=e?(0,ep.cn)(e,eX.wh):{};t(k.u1({id:eX.Dd,initialX:null==l?void 0:l.x,initialY:null==l?void 0:l.y}))},[t]);return r&&u?n.createElement(eg.Zk,{ref:h},n.createElement("ui3"===l?te:e9,{isPanelEmpty:a,isAddPropButtonSelected:c,hasBubbledInstances:d,selectAddPropOptionRef:m,toggleAddPropDropdown:_,stateGroupSelectionMode:void 0}),i&&m.current&&n.createElement(em.Cf,{targetRect:m.current.getBoundingClientRect(),propagateCloseClick:!0},n.createElement(ea.W.Option,{disabled:!0,className:e4},n.createElement(P.Tx,{id:"design_systems.component_properties.expose_nested_instances"})),n.createElement(ea.W.Option,{className:e5,onClick:E,recordingKey:"openBubbledPropPicker"},n.createElement(eu.Nu,null,n.createElement(ei.U,{fix_me_removeThisPropAndProvideUI3Icon:!0,svg:e3.A})),(0,P.t)("design_systems.component_properties.choose_instances"))),(null==o?void 0:o.id)===eX.Dd&&n.createElement(eQ,null),d&&n.createElement(n.Fragment,null,n.createElement("p",{className:e6},(0,P.t)("design_systems.component_properties.bubbled_instances")),n.createElement(eH,{recordingKey:e}))):null}var tE=l(324666),tg=l(872429),ty=l(421757),tv=l(859905),tb=l(139689),tf=l(221768),tS=l(568214),tT=l(520581),tw=l(347082),tP=l(762638),tk=l(428654),tI=l(775664),tC=l(774191),tN=l(869156),tA=l(318812),tx=l(179243),tL=l(559681),tM=l(452883),tO=l(742934),tR=l(697378),tD=l(864361),tF=l(860601),tV=l(288536),tK=l(555074),tB=l(29680),tU=l(279702),tH=l(233890),tG=l(846848),tY=l(12669),tW=l(113754),t$=l(939143),tz=l(875157);let tX="slides_color_controls--selected--FUTwH",tQ="slides_color_controls--deleteThemeColorButton--qpujj",tZ="slides_color_controls--controlsRowReset--w3uKf",tJ=tG.qo,tj={type:"SOLID",color:{r:0,g:0,b:0,a:1},opacity:1,blendMode:"NORMAL"};var tq=(e=>(e[e.COLOR=0]="COLOR",e[e.GRADIENT=1]="GRADIENT",e))(tq||{});function t0({paint:e,onPaintChange:t,onColorVariableChange:l,onApplyStyle:r,onClose:a,initialPosition:i,enableGradients:s,initialView:o,recordingKey:c,hideCustomColorPickerFillTypeToggle:d}){let p=["custom_color","library"],[u,h]=tR.t.useTabs({custom_color:p.includes("custom_color"),library:p.includes("library")},{defaultActive:()=>(function({initialView:e,isBoundToLibraryAsset:t,supportedViews:l}){let n;return(n=e||(t?"library":"custom_color"),l&&!l.includes(n))?l[0]:n})({initialView:"custom_color",isBoundToLibraryAsset:!!e.colorVar,supportedViews:p})}),_=(0,ee.d4)(e=>e.mirror.appModel.activeCanvasEditModeType),E=(0,tK.kl)("numSelectedByType"),g=n.useMemo(()=>{if(E)return(0,tz.aZ)(V.rrT.FILL,E)},[E]),y=h.activeTab;n.useEffect(()=>{o&&o!==y&&h.setActiveTab(o)},[o]);let v=new Set;return n.createElement(tw.p,{name:"slides_custom_color_picker"},n.createElement(ez.vx,{initialPosition:i,title:n.createElement("div",null,n.createElement(tR.t.TabStrip,{manager:h},n.createElement(tR.t.Tab,{...u.custom_color},n.createElement(P.Tx,{id:"fullscreen.properties_panel.color_picker.custom"})),n.createElement(tR.t.Tab,{...u.library},n.createElement(P.Tx,{id:"fullscreen.properties_panel.color_picker.libraries"})))),onClose:()=>{_===V.m1T.GRADIENT&&F.Y5.triggerAction("leave-edit-mode"),a()},initialWidth:tJ,recordingKey:c},n.createElement(tR.t.TabPanel,{...u.custom_color},n.createElement(t1,{paint:e,onPaintChange:t,enableGradients:s,recordingKey:c,hideCustomColorPickerFillTypeToggle:d})),n.createElement(tR.t.TabPanel,{...u.library},n.createElement(t$.Rp,{selectedItem:null,resolvedType:V.rXF.COLOR,disabledVariableIds:v,pickerType:"color-picker",recordingKey:m.Pt(c,"libraryColors"),onVariableSelected:l,onStyleSelected:r,onClose:tF.lQ,variableScopes:g}))))}function t1({paint:e,onPaintChange:t,enableGradients:l,recordingKey:r,hideCustomColorPickerFillTypeToggle:a}){let i=(0,ee.wA)(),s=(0,tA.U)(),o=(0,tB.dH)(),c=(0,tV.Ep)(),d=(0,tD.C)(),p=(0,K.Ku)(),u=(0,ee.d4)(e=>e.mirror.appModel.activeCanvasEditModeType),m=n.useRef(null),[h,_]=n.useState((0,G.bn)(e.type)?1:0),E=(0,G.Ou)(e),g=(0,G.x$)(e),y=(0,tB.p8)("currentSelectedGradientStop"),v=(0,G.iC)(E||g||tj,y);n.useEffect(()=>{1===h&&u!==V.m1T.GRADIENT?F.Y5.triggerAction("toggle-gradient-edit-mode"):0===h&&u===V.m1T.GRADIENT&&F.Y5.triggerAction("leave-edit-mode")},[h,u]);let b=l=>{e.type!==l&&t(G.Tm.initPaint(l,tj.color,e,"slides-custom-color-picker"),!(0,G.bn)(e.type)&&(0,G.bn)(l)?tU.zk.NO:tU.zk.YES)};return n.createElement(n.Fragment,null,!a&&l&&n.createElement(t5,{panelType:h,onPanelTypeChange:e=>{h!==e&&(b(0===e?"SOLID":"GRADIENT_LINEAR"),_(e))},recordingKey:r}),l&&1===h&&g&&n.createElement(tH.vL,{name:"Slides color picker",ref:m,handleKeyDown:e=>{g&&(0,tY.T)(e,g,u,y,t)},focusOnMount:!0,forceUpdate:d},n.createElement(tW.i,{paint:g,onChange:t,currentSelectedGradientStop:y,colorProfile:c,hasFocus:!!m.current&&m.current.hasFocus(),dispatch:i,recordingKey:r})),n.createElement(tG.S7,{color:v,colorFormat:p,onColorChange:(l,n)=>{(0,tY.n)(l,e,y,t,n)},dropperDisabled:!1,displayType:tG.sX.FULL,currentTool:o,dispatch:i,dropdownShown:s,recordingKey:r,canAcceptStyles:!1,canAcceptVariables:!1}))}function t5({panelType:e,onPanelTypeChange:t,recordingKey:l}){let r=[{type:0,label:(0,P.t)("slides.properties_panel.color_picker.color_toggle"),optionRecordingKey:"color"},{type:1,label:(0,P.t)("slides.properties_panel.color_picker.gradient_toggle"),optionRecordingKey:"gradient"}];return n.createElement("div",{className:tP.cx.wFull.py8.bb1.bSolid.colorBorder.$},n.createElement("div",{className:"slides_color_controls--panelToggle--kL4qJ"},r.map(({type:r,label:a,optionRecordingKey:i})=>n.createElement(eT.GG,{key:r,className:e===r?tX:void 0,onClick:()=>t(r),recordingKey:m.Pt(l,i)},a))))}var t4=l(660164);function t6({paint:e,onChange:t,onClose:l,pickerShown:r,recordingKey:a,hideCustomColorPickerFillTypeToggle:s,inheritStyleKeyField:o}){let d=(0,ee.wA)(),p=(0,tM.$)(),u=(0,tL.UZ)(p),h=(0,ee.d4)(e=>{var t,l,n,r;let a=null==(l=null==(t=null==e?void 0:e.mirror)?void 0:t.appModel)?void 0:l.currentTool,i=null==(r=null==(n=null==e?void 0:e.mirror)?void 0:n.appModel)?void 0:r.activeCanvasEditModeType;return a===V.NLJ.DROPPER_COLOR||i===V.m1T.GRADIENT||i===V.m1T.RASTER}),_=(0,tA.B)(x.kX),E=(0,tL.lK)(p),g=e=>{t({...e,type:"SOLID"})},[v,b]=n.useState(!1),[f,S]=n.useState(new y.Mi(0,0)),T=n.useRef(null),I=n.useRef(null),C=n.useCallback(()=>{if(I.current){let{x:e,y:t}=(0,ep.cn)(I.current,tJ);S(new y.Mi(e,t)),b(!0)}else console.error("colorsWrapperRef.current is null")},[I]),[N,A]=(0,c.fp)(tx.ik),[L,M]=n.useState([]),[O,R]=(0,c.fp)(tx.E_),D=(0,tN.bL)((null==O?void 0:O.varId)||"",u);n.useEffect(()=>()=>{R(null)},[R]);let F=(0,tL.k1)(),K=ek.nc.user("slides-add-theme-color",()=>{let t=F(function(e,t){if((0,H.hS)(e)&&e.color)return e.color;let l=tS.UE;if(t.length>0){let e=t[t.length-1].paint.color;e&&(l=(0,tC.Ad)(e,31))}return l}(e,E));t&&(R({varId:t,modeId:u}),C())}),B=n.useCallback(e=>{R({varId:e,modeId:u}),C()},[C,u,R]),U=ek.nc.user("slides-delete-theme-color",V.CWU.deleteVariable),G=ek.nc.user("slides-reset-theme-colors",n.useCallback(()=>{let e=new Map(L.map(e=>[e.variableId,e])),t=new Map(E.map(e=>[e.variableId,e]));e.forEach((e,l)=>{t.has(l)||V.CWU.restoreVariable(l),t7(l,u,e.paint)}),t.forEach((t,l)=>{e.has(l)||V.CWU.deleteVariable(l)}),b(!1)},[L,u,E])),Y=n.useCallback(e=>{T.current&&e.target instanceof Node&&T.current.contains(e.target)||!N||h||(A(!1),G())},[N,T,G,A,h]);n.useEffect(()=>(window.addEventListener("mousedown",Y),()=>window.removeEventListener("mousedown",Y)),[Y]);let W=n.useCallback(e=>{"Escape"===e.key&&N&&(A(!1),G())},[N,G,A]);n.useEffect(()=>(window.addEventListener("keydown",W,{capture:!0}),()=>window.removeEventListener("keydown",W,{capture:!0})),[W]);let $=n.useMemo(()=>N&&D&&D.type===V.Z_n.COLOR?(0,tO.NQ)(D.value):(0,H.hS)(e)?e:(0,tO.NQ)(tS.Uv),[N,D,e]),z=n.useCallback((e,l)=>{N?O&&e.color&&ek.l7.user("slides-edit-theme-color",()=>t7(O.varId,O.modeId,e)):t(e,l)},[N,O,t]),X=(0,tO.PG)(t),Q=(0,tO.o9)(o,t7),Z=!N;return n.createElement("div",{ref:T},n.createElement(tw.p,{name:"slides_color_picker"},(N||!v)&&n.createElement(ez.vx,{headerSize:"small",title:N?(0,P.t)("slides.properties_panel.color_picker.edit_theme"):(0,P.t)("slides.properties_panel.fill"),initialPosition:new y.Mi(r.initialX,r.initialY),onClose:()=>{A(!1),l()},initialWidth:240,autoflowHeight:!0,recordingKey:a},n.createElement("div",{ref:I},n.createElement(t2,{title:(0,P.t)("slides.properties_panel.color_picker.theme_colors"),rightControl:n.createElement(eb.K,{"aria-label":(0,P.t)("slides.properties_panel.color_picker.add_template_color_tooltip"),onClick:()=>{N||(A(!0),M(E)),K()},"data-tooltip-type":ed.Ib.TEXT,"data-tooltip":(0,P.t)("slides.properties_panel.color_picker.add_template_color_tooltip"),recordingKey:m.Pt(a,"addThemeColor")},n.createElement(ei.U,{svg:e8.A,fallbackSvg:t4.A},n.createElement(en.e,null))),showBottomBorder:Z},n.createElement(tT.E,{name:"slides_theme_colors"},E.map(({paint:l,variableId:r})=>{var i,s,o,c,d,p,u,h,y,v,b,f,S,T,P;let k=()=>{A(!0),M(E),B(r)};return l.color&&(null==(o=null==(s=null==(i=l.colorVar)?void 0:i.value)?void 0:s.alias)?void 0:o.guid)?n.createElement(t8,{key:r,backgroundString:tk.F.format({...l.color,a:1}),hexString:tI.z5.format(l.color),opacity:l.color.a,onClick:()=>{N?B(r):g({...e,...l})},isSelected:N?!!O&&r===O.varId:(0,w.aI)(null==(p=null==(d=null==(c=l.colorVar)?void 0:c.value)?void 0:d.alias)?void 0:p.guid,null==(y=null==(h=null==(u=null==e?void 0:e.colorVar)?void 0:u.value)?void 0:h.alias)?void 0:y.guid),showHoverOutline:N,showDeleteIcon:N,showEditIcon:!N&&(0,w.aI)(null==(f=null==(b=null==(v=l.colorVar)?void 0:v.value)?void 0:b.alias)?void 0:f.guid,null==(P=null==(T=null==(S=null==e?void 0:e.colorVar)?void 0:S.value)?void 0:T.alias)?void 0:P.guid),onClickEdit:k,onClickDelete:()=>U(r),onContextMenu:l=>{l.stopPropagation(),l.preventDefault();let{clientX:n,clientY:a}=l;_.show({data:{clientX:n,clientY:a,targetItem:{type:"THEME_COLOR",variableId:r,onEdit:k},paint:e,onPaintChange:t}})},recordingKey:m.Pt(a,"themeColors",r.replace("VariableID:",""))}):null}))),Z&&n.createElement(t3,{paint:e,onPaintChange:t,onClickColorChit:g,openCustomColorPicker:C,recordingKey:a})),N&&n.createElement("div",{className:i()(tP.cx.h24.p8.$,tP.cx.flex.gap8.$,tP.cx.bt1.bSolid.colorBorder.$)},n.createElement(ty.IK,{variant:"secondary",onClick:()=>{A(!1),G()}},n.createElement(P.Tx,{id:"slides.properties_panel.color_picker.edit_theme_colors.cancel"})),n.createElement(ty.IK,{variant:"primary",onClick:()=>{A(!1),b(!1)}},n.createElement(P.Tx,{id:"slides.properties_panel.color_picker.edit_theme_colors.save"})))),v&&$&&n.createElement(t0,{paint:$,onPaintChange:z,onColorVariableChange:X,onApplyStyle:Q,onClose:()=>{R(null),b(!1),N||d(k.XE())},initialPosition:N?f:new y.Mi(r.initialX,r.initialY),recordingKey:"slidesCustomColorPicker",enableGradients:!O,hideCustomColorPickerFillTypeToggle:s})))}function t3({paint:e,onPaintChange:t,onClickColorChit:l,openCustomColorPicker:r,recordingKey:a}){let i=(0,tA.B)(x.kX),[s,o]=n.useState(!1),c=(0,tM.$)(),d=(0,tL.lf)(c),p=s?d:d.slice(0,17),u=!s&&d.length>17,h=(l,n)=>{if(l.color){n.stopPropagation(),n.preventDefault();let{clientX:r,clientY:a}=n;i.show({data:{clientX:r,clientY:a,targetItem:{type:"DOCUMENT_COLOR",documentColor:l.color},paint:e,onPaintChange:t}})}};return n.createElement(t2,{title:(0,P.t)("slides.properties_panel.color_picker.document_colors"),removeBottomPadding:u},n.createElement(tT.E,{name:"slides_add_custom_color"},n.createElement("div",{className:tP.cx.flex.justifyCenter.itemsCenter.w32.h32.$},n.createElement(eT.D8,{className:tP.cx.w24.h24.$,"aria-label":(0,P.t)("slides.properties_panel.color_picker.add_color_aria_label"),onClick:r,"data-tooltip-type":ed.Ib.TEXT,"data-tooltip":(0,P.t)("slides.properties_panel.color_picker.add_color_aria_label"),recordingKey:m.Pt(a,"addColor")},n.createElement("img",{src:"https://static.figma.com/uploads/bdf32fe13fe9a9be5b40c3de4a18572f14c9a1eb",alt:"",className:tP.cx.w24.h24.$})))),n.createElement(tT.E,{name:"slides_document_colors"},p.map((t,r)=>n.createElement(t8,{key:r,backgroundString:tk.F.format(t.color),hexString:tI.z5.format(t.color),opacity:t.opacity,onClick:()=>l(t),onContextMenu:e=>h(t,e),isSelected:(0,tC.Vm)(t.color,null==e?void 0:e.color)&&t.opacity===(null==e?void 0:e.opacity),recordingKey:m.Pt(a,"documentColor",tk.F.format(t.color))})),u&&n.createElement(eT.D8,{className:tP.cx.wFull.h32.flex.itemsCenter.justifyCenter.$,onClick:()=>o(!0),recordingKey:m.Pt(a,"documentColors","more")},n.createElement(tv.k,null))))}function t2({title:e,rightControl:t,removeBottomPadding:l,showBottomBorder:r,children:a}){return n.createElement("div",{className:tP.cx.px12.if(r,tP.cx.bb1.bSolid.colorBorder).if(!l,tP.cx.pb12).$},n.createElement("div",{className:tP.cx.h40.pl4.flex.justifyBetween.itemsCenter.$},n.createElement("div",{className:tP.cx.textBodyMedium.colorTextSecondary.$},e),t),n.createElement("div",{className:tP.cx.flex.flexWrap.gap4.$},a))}function t8({backgroundString:e,hexString:t,opacity:l,onClick:r,onContextMenu:a,isSelected:s,showHoverOutline:o,showDeleteIcon:c,showEditIcon:d,onClickDelete:p,onClickEdit:u,recordingKey:h}){return n.createElement("div",{className:i()("slides_color_controls--colorChit--pdLKf",{"slides_color_controls--hoverOutline--dThPG":o,[tX]:s}),"data-tooltip-type":ed.Ib.TEXT,"data-tooltip-show-above":!0,"data-tooltip":t},c&&n.createElement(eT.GG,{className:tQ,onClick:e=>{if(p){let t=e.currentTarget.getBoundingClientRect(),l=t.width/2,n=t.left+l,r=t.top+l;Math.pow(e.clientX-n,2)+Math.pow(e.clientY-r,2)<=l*l&&p()}},recordingKey:m.Pt(h,"delete")},n.createElement(tb.A,null)),d&&!c&&n.createElement(eT.GG,{className:tQ,onClick:e=>{if(u){let t=e.currentTarget.getBoundingClientRect(),l=t.width/2,n=t.left+l,r=t.top+l;Math.pow(e.clientX-n,2)+Math.pow(e.clientY-r,2)<=l*l&&u()}},recordingKey:m.Pt(h,"edit")},n.createElement(tf.A,null)),n.createElement(eT.D8,{onClick:r,onContextMenu:a,className:tP.cx.w24.h24.relative.$,recordingKey:h},n.createElement("div",{className:"slides_color_controls--chitBackground--Vlkza",style:{background:e}}),n.createElement("div",{className:"slides_color_controls--chitAlpha--GJlf2 chit--chitAlpha--Mn-aK",style:{opacity:void 0!==l?1-l:0}})))}function t7(e,t,l){V.CWU.setVariableValueForMode(e,t,{type:V.Z_n.COLOR,resolvedType:V.rXF.COLOR,value:{...l.color,a:l.opacity??1}})}var t9=l(662294);function le({recordingKey:e}){return n.createElement(eg.Zk,{className:"slides_align_panel--panel--4jgTN"},n.createElement(t9.l,{isHoveringOverPanel:!1,inSlidesPanel:!0,recordingKey:e}))}var lt=l(723081),ll=l(100197),ln=l(393333),lr=l(538697),la=l(683570),li=l(343559),ls=l(195601),lo=l(366501);let lc="slides_animation_panel--row--cC8Np",ld="slides_animation_panel--previewFrame--cO6cR transition_preview--previewFrame--WAa8e transition_preview--_previewItem--o2gce",lp=["SMART_ANIMATE","DISSOLVE","PUSH","SLIDE","SLIDE_OUT","MOVE","MOVE_OUT"],lu={[V.v$l.NONE]:{behavior:"INSTANT"},[V.v$l.DISSOLVE]:{behavior:"DISSOLVE"},[V.v$l.SLIDE_FROM_LEFT]:{direction:"LEFT",behavior:"SLIDE"},[V.v$l.SLIDE_FROM_RIGHT]:{direction:"RIGHT",behavior:"SLIDE"},[V.v$l.SLIDE_FROM_TOP]:{direction:"TOP",behavior:"SLIDE"},[V.v$l.SLIDE_FROM_BOTTOM]:{direction:"BOTTOM",behavior:"SLIDE"},[V.v$l.SLIDE_OUT_TO_LEFT]:{direction:"LEFT",behavior:"SLIDE_OUT"},[V.v$l.SLIDE_OUT_TO_RIGHT]:{direction:"RIGHT",behavior:"SLIDE_OUT"},[V.v$l.SLIDE_OUT_TO_TOP]:{direction:"TOP",behavior:"SLIDE_OUT"},[V.v$l.SLIDE_OUT_TO_BOTTOM]:{direction:"BOTTOM",behavior:"SLIDE_OUT"},[V.v$l.PUSH_FROM_LEFT]:{direction:"LEFT",behavior:"PUSH"},[V.v$l.PUSH_FROM_RIGHT]:{direction:"RIGHT",behavior:"PUSH"},[V.v$l.PUSH_FROM_TOP]:{direction:"TOP",behavior:"PUSH"},[V.v$l.PUSH_FROM_BOTTOM]:{direction:"BOTTOM",behavior:"PUSH"},[V.v$l.MOVE_FROM_LEFT]:{direction:"LEFT",behavior:"MOVE"},[V.v$l.MOVE_FROM_RIGHT]:{direction:"RIGHT",behavior:"MOVE"},[V.v$l.MOVE_FROM_TOP]:{direction:"TOP",behavior:"MOVE"},[V.v$l.MOVE_FROM_BOTTOM]:{direction:"BOTTOM",behavior:"MOVE"},[V.v$l.MOVE_OUT_TO_LEFT]:{direction:"LEFT",behavior:"MOVE_OUT"},[V.v$l.MOVE_OUT_TO_RIGHT]:{direction:"RIGHT",behavior:"MOVE_OUT"},[V.v$l.MOVE_OUT_TO_TOP]:{direction:"TOP",behavior:"MOVE_OUT"},[V.v$l.MOVE_OUT_TO_BOTTOM]:{direction:"BOTTOM",behavior:"MOVE_OUT"},[V.v$l.SMART_ANIMATE]:{behavior:"SMART_ANIMATE"}},lm=new lt.el(!0);function lh(e,t){for(let[l,{behavior:n,direction:r}]of Object.entries(lu))if(n===e&&r===t)return l;return V.v$l.NONE}function l_(e,t,l){ek.l7.user("slide-transition",()=>{let n=lh(t,l);e.forEach(e=>{V.Ez5.slideAnimationBindings().setSlideTransition(e,n)}),F.Y5.commit()})}function lE(e){let t=(0,ee.wA)(),l=(0,tA.U)(),r=(0,ll.J2)(V.Ez5.singleSlideView().focusedSlideId),a=(0,ll.J2)(V.Ez5.slideDeck().slideGrid),i=(0,lo.Rn)(a,r),s=Object.keys(e.selection),o=(0,tp.Fk)((e,t)=>t.reduce((t,l)=>{let n=e.get(l),r=null==n?void 0:n.findContainingSlideOrSelf();return r&&!t.includes(r)&&t.push(r),t},[]),s),c=V.v$l.NONE;o.forEach(e=>{let t=V.Ez5.slideAnimationBindings().getSlideTransition(e);t&&c===V.v$l.NONE&&(c=t)});let{behavior:d,direction:p}=lu[c],u=n.useCallback(e=>{let t=p;"INSTANT"===e||"DISSOLVE"===e||"SMART_ANIMATE"===e?t=void 0:void 0===t&&(t="LEFT"),l_(o,e,t)},[p,o]),m=n.useCallback(e=>{l_(o,d,e)},[d,o]),h=!("INSTANT"===d||"DISSOLVE"===d||"SMART_ANIMATE"===d),_="MOVE_OUT"===d||"SLIDE_OUT"===d,E=_?r:i??w.AD,g=_?i??w.AD:r,y=(0,ls.p)(E),v=(0,ls.p)(g);return n.createElement(tw.p,{name:"slides_animation_panel"},n.createElement(eg.Zk,null,n.createElement(li.r,{titleTx:n.createElement(P.Tx,{id:"slides.properties_panel.slide_transition"})}),n.createElement("div",{className:lc},n.createElement("label",null,n.createElement(P.Tx,{id:"slides.properties_panel.slide_transition.style"})),n.createElement(tT.E,{name:"slide_transition_style"},n.createElement(lr.l6,{formatter:lm,id:"slide-transitions-behavior-select",property:d,onChange:u,dispatch:t,dropdownShown:l},n.createElement(lr.c$,{value:"INSTANT",key:"INSTANT"}),n.createElement(lr.sK,null),lp.map(e=>n.createElement(lr.c$,{value:e,key:e}))))),h&&n.createElement("div",{className:lc},n.createElement("label",null,n.createElement(P.Tx,{id:"slides.properties_panel.slide_transition.direction"})),n.createElement(tT.E,{name:"slide_transition_direction"},n.createElement(ln.sP,{onChange:m,property:p??null}))),n.createElement("div",{className:lc},n.createElement("div",{style:{width:"100%"}},n.createElement(lg,{transition:{behavior:d,direction:p??null,shouldSmartAnimate:!1,duration:.5,easing:"EASE_OUT",isSpringTransition:!1,easingFunction:[0,0,.58,1],preserveScroll:!1,resetVideoPosition:!1,openUrlInNewTab:!1,resetInteractiveComponents:!1,resetScrollPosition:!1},belowThumbnailUrl:v,aboveThumbnailUrl:y}))),n.createElement("div",{className:lc},n.createElement(ty.IK,{variant:"secondary",onClick:()=>{ek.l7.user("slide-transition-all-slides",()=>{let e=lh(d,p);V.Ez5.slideAnimationBindings().setSlideTransitionForAll(e),F.Y5.commit()})}},n.createElement(P.Tx,{id:"slides.properties_panel.slide_transition.apply_to_all"})))))}class lg extends la.ub{rectangleStateToCSSStyle(e,t,l,n){let r=this.cssEasingFunction(e),a=this.cssDuration(e);return{transition:l===la.H_.RETURN_TO_START?"all ease-out 200ms":l===la.H_.STATIC?"unset":`all ${a}s ${r}`,top:25.5+45*t.top,left:80+80*t.left,opacity:t.opacity,border:0}}renderSimpleScreenToScreenAnimationPreview(e,t,l,r,a,s,o){return n.createElement("div",{className:"slides_animation_panel--previewPanel--0XANz transition_preview--previewPanel--Gp-aI",onMouseEnter:this.onMouseEnterNew,onMouseLeave:this.onMouseLeaveNew},n.createElement("div",{className:i()(e,ld),style:t},n.createElement("img",{src:this.props.belowThumbnailUrl,alt:"",className:tP.cx.relative.wFull.hFull.$})),n.createElement("div",{className:i()(l,ld),style:r},n.createElement("img",{src:this.props.aboveThumbnailUrl,alt:"",className:tP.cx.relative.wFull.hFull.$})),n.createElement("div",{className:"slides_animation_panel--screenContainer--6eR6r transition_preview--screenContainer--iuLzq transition_preview--previewFrame--WAa8e transition_preview--_previewItem--o2gce slides_animation_panel--previewFrame--cO6cR transition_preview--previewFrame--WAa8e transition_preview--_previewItem--o2gce"}),n.createElement("div",{className:"slides_animation_panel--screenBorder--G7ZdP transition_preview--screenBorder--Fz-dz transition_preview--screenContainer--iuLzq transition_preview--previewFrame--WAa8e transition_preview--_previewItem--o2gce slides_animation_panel--screenContainer--6eR6r transition_preview--screenContainer--iuLzq transition_preview--previewFrame--WAa8e transition_preview--_previewItem--o2gce slides_animation_panel--previewFrame--cO6cR transition_preview--previewFrame--WAa8e transition_preview--_previewItem--o2gce"}))}}var ly=l(648598),lv=l(978783),lb=l(623402),lf=l(531664),lS=l(218973),lT=l(952675),lw=l(12519),lP=l(552901),lk=l(149988);function lI(e){return n.createElement("svg",{width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",...e},n.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M2.486 5.142a1 1 0 0 0 0 1.715L4.39 8 2.486 9.142a1 1 0 0 0 0 1.715L6.97 13.55a2 2 0 0 0 2.058 0l4.486-2.692a1 1 0 0 0 0-1.715L11.61 8l1.905-1.143a1 1 0 0 0 0-1.715l-4.486-2.69a2 2 0 0 0-2.058 0l-4.486 2.69ZM9.665 8l.973-.583 1.39-.834L13 6l-.972-.583-3.514-2.108a1 1 0 0 0-1.028 0L3.972 5.417 3 6l.972.583 1.39.834.971.583 1.152.691a1 1 0 0 0 1.03 0L9.666 8Zm-4.304.583 1.609.966a2 2 0 0 0 2.058 0l1.61-.966 1.39.834L13 10l-.972.583-3.514 2.108a1 1 0 0 1-1.028 0l-3.514-2.108L3 10l.972-.583 1.39-.834Z",clipRule:"evenodd"}))}var lC=l(505113),lN=l(750029),lA=l(892109),lx=l(478655),lL=l(96796);let lM=n.forwardRef(function({isOpen:e,onMouseDown:t,children:l,recordingKey:r},a){return n.createElement(eT.GG,{forwardedRef:a,className:i()("slides_flyout_input--input--cM6kp",{"slides_flyout_input--selected--CgFEs":e}),onMouseDown:t,recordingKey:r},l,n.createElement(lL.O,null))}),lO={type:"SOLID",color:{r:1,g:1,b:1,a:1},opacity:1,blendMode:"NORMAL"};function lR({paint:e,onChange:t,inheritStyleKeyField:l,inheritStyleKey:r,inheritStyleName:a,pickerId:i,label:s,recordingKey:o,hideCustomColorPickerFillTypeToggle:d}){let p=(0,ee.wA)(),u=(0,ee.d4)(e=>e.pickerShown&&e.pickerShown.id===i?e.pickerShown:null),m=(0,n.useRef)(null),h=(0,c.md)(tx.ik),_=(0,ee.d4)(e=>e.mirror.appModel.activeCanvasEditModeType),E=()=>{_===V.m1T.GRADIENT&&F.Y5.triggerAction("leave-edit-mode"),p(k.XE())},g=e=>{if(u)h||E();else if(m.current){let{x:t,y:l}=(0,ep.cn)(m.current,e?tJ:240);p(k.u1({id:i,initialX:t,initialY:l}))}else console.error("rowRef.current is null")},[v]=(0,tK.lJ)("slidesDividedSwatchColors"),b=(0,ee.d4)(e=>{let t=e.mirror.selectionProperties.fillPaints;return(0,H.gl)(t)?H.oV:null==t?void 0:t.length}),[f]=(0,tK.lJ)("imageOverlayPaint"),S=f&&(0,H.hS)(f),T=(0,H._W)(b,0)>(S?2:1),w=!(0,H.gl)(e)&&(null==e?void 0:e.type)&&(0,G.bn)(e.type),I=(0,tO.h5)(r),C=(0,n.useMemo)(()=>I&&I.color?[I.color]:(0,H.hS)(e)&&e&&e.color?[e.color]:Array.isArray(v)&&v.length>1?v:[{r:1,g:1,b:1,a:1}],[v,e,I]),N=(()=>{var t,l;if((0,H.gl)(e))return null;let n=null==(l=null==(t=null==e?void 0:e.colorVar)?void 0:t.value)?void 0:l.alias;return n?lx.dI(n):null})(),A=()=>(0,H.gl)(e)||(0,H.gl)(a)?(0,P.t)("fullscreen.mixed"):a||(T?(0,P.t)("slides.properties_panel.color_picker.multiple"):w?(0,P.t)("slides.properties_panel.fill.fill_type_gradient"):tI.TI.format(C[0])),x=n.createElement(tT.E,{name:"slides_color_input"},n.createElement(lM,{isOpen:!!u,onMouseDown:e=>{e.stopPropagation(),g(!!w)},recordingKey:o},n.createElement("span",{className:tP.cx.pl4.inlineFlex.gap6.$},T?n.createElement(lI,null):n.createElement(lF,{colors:C,paint:I??e}),!a&&N?n.createElement(lD,{variableId:N,fallbackText:A()}):n.createElement(lC.o,{text:A()})))),L=(0,tO.PG)(t),M=(0,tO.o9)(l);return n.createElement(n.Fragment,null,s?n.createElement(lA.No,{ref:m,label:s,input:x}):n.createElement("span",{ref:m},x),u&&e&&(w?n.createElement(t0,{paint:e,onPaintChange:t,onColorVariableChange:L,onApplyStyle:M,onClose:E,initialPosition:new y.Mi(u.initialX,u.initialY),enableGradients:!0,recordingKey:"slidesCustomColorPicker",hideCustomColorPickerFillTypeToggle:d}):n.createElement(t6,{paint:e,onChange:t,onClose:E,pickerShown:u,recordingKey:"slidesColorPicker",hideCustomColorPickerFillTypeToggle:d,inheritStyleKeyField:l})))}function lD({variableId:e,fallbackText:t}){let l=(0,tN.u)(e);return n.createElement(lC.o,{text:(null==l?void 0:l.name)??t})}function lF({colors:e,paint:t}){if(!(e.length>1))return n.createElement(lN.J,{className:tP.cx.w14.h14.bRadius2.$,paint:t??lO,allowMouseDownPropagation:!0});{let t={type:"SOLID",color:e[0],opacity:1,blendMode:"NORMAL"},l={type:"SOLID",color:e[1],opacity:1,blendMode:"NORMAL"};return n.createElement("div",{className:tP.cx.relative.w14.h14.$},n.createElement("span",{className:tP.cx.absolute.w14.h14.left0.top0.$,style:{clipPath:"polygon(0% 0%, 100% 0%, 0% 100%)"}},n.createElement(lN.J,{className:tP.cx.w14.h14.bRadius2.$,paint:t,allowMouseDownPropagation:!0})),n.createElement("span",{className:tP.cx.absolute.w14.h14.left0.top0.$,style:{clipPath:"polygon(0% 100%, 100% 100%, 100% 0%)"}},n.createElement(lN.J,{className:tP.cx.w14.h14.bRadius2.$,paint:l,allowMouseDownPropagation:!0})))}}function lV({panelClassName:e,children:t}){return n.createElement(eg.Zk,{className:e},n.createElement("div",{className:tP.cx.pr8.$},t))}var lK=l(902237);function lB({legend:e,value:t,onChange:l,recordingKey:r,children:a}){return n.createElement("div",{className:tP.cx.py4.pr8.pl16.$},n.createElement(ly.I.Root,{legend:n.createElement(lK.q,null,e),value:t,onChange:l,recordingKey:r},a))}var lU=l(26659),lH=l(344764);class lG extends lr.c${}let lY=[0,2,4,8,16,24],lW=["NONE","SOLID","DASHED_BIG","DASHED_SMALL"],l$=lW.filter(e=>"NONE"!==e);function lz({recordingKey:e}){let t=(0,ee.wA)(),l=(0,tA.U)(),{smallNudgeAmount:r,bigNudgeAmount:a}=(0,K.sT)(),[i,s]=(0,tK.lJ)("strokeWeight"),[o,c]=(0,tK.lJ)("dashPattern"),[d,p]=(0,tK.lJ)("strokePaints"),[u]=(0,tK.lJ)("inheritFillStyleKeyForStroke"),[h]=(0,tK.lJ)("inheritFillStyleNameForStroke"),_=d?(0,H.hS)(d)?d[0]:H.oV:void 0,E=(0,tK.kl)("numSelectedByType"),g=E&&(0,H.hS)(E)&&(0,O.vx)(E,"TABLE"),y=n.useMemo(()=>({NONE:{value:void 0,displayText:(0,P.t)("slides.properties_panel.border_panel.style_none"),icon:n.createElement(lv.t,null)},SOLID:{value:[],displayText:(0,P.t)("slides.properties_panel.border_panel.style_solid"),icon:n.createElement(lb.y,null)},DASHED_BIG:{value:[20,24],displayText:(0,P.t)("slides.properties_panel.border_panel.style_dashed_big"),icon:n.createElement(ew.B,{svg:lU.A,className:tP.cx.colorIconSecondary.$})},DASHED_SMALL:{value:[8,10],displayText:(0,P.t)("slides.properties_panel.border_panel.style_dashed_small"),icon:n.createElement(ew.B,{svg:lH.A,className:tP.cx.colorIconSecondary.$})}}),[]),[v,b]=n.useState(()=>f(o));function f(e){if(!(0,H.gl)(e))return e&&_?(0,lf.c2)(e,y.SOLID.value)?"SOLID":(0,lf.c2)(e,y.DASHED_BIG.value)?"DASHED_BIG":(0,lf.c2)(e,y.DASHED_SMALL.value)?"DASHED_SMALL":"NONE":"NONE"}return(0,tB.f4)(()=>{b(f(o))}),n.createElement(tw.p,{name:"slides_border_panel"},n.createElement(lV,null,n.createElement(li.r,{titleTx:n.createElement(P.Tx,{id:"slides.properties_panel.border_panel.title"})}),n.createElement(lB,{legend:n.createElement(P.Tx,{id:"slides.properties_panel.border_panel.style_title"}),value:v,onChange:e=>{let t=y[e].value;("NONE"===v||(0,H.gl)(o))&&t&&F.Y5.triggerActionInUserEditScope("add-stroke-to-selection"),t?c(t):p([]),b(e)},recordingKey:m.Pt(e,"borderStyle")},(g?l$:lW).map(e=>n.createElement(ly.I.Option,{key:e,value:e,icon:y[e].icon,"data-onboarding-key":y[e].displayText,"aria-label":y[e].displayText}))),"NONE"!==v&&_&&n.createElement(lk.g,{leftLabel:n.createElement(P.Tx,{id:"slides.properties_panel.border_panel.color"}),leftInput:n.createElement(lR,{paint:_,onChange:e=>{p([e])},inheritStyleKeyField:"inheritFillStyleKeyForStroke",inheritStyleKey:u,inheritStyleName:h,pickerId:`${x.Yr}-border`,recordingKey:m.Pt(e,"color"),hideCustomColorPickerFillTypeToggle:!1}),rightLabel:n.createElement(P.Tx,{id:"slides.properties_panel.border_panel.width_slider_tooltip"}),rightInput:n.createElement(tT.E,{name:"slides_corner_radius_dropdown"},n.createElement(lT.ow,{value:{select:lw.pW,inputComponent:lw.gm}},n.createElement(lr.tV,{value:{chevron:lP.c9}},n.createElement(lS.YZ,{id:"border-width-select",onValueChange:e=>{s(e)},value:void 0===i||(0,H.gl)(i)?H.oV:i,dropdownShown:l,willShowDropdown:()=>(F.Y5.commit(),Promise.resolve()),min:1,max:50,dispatch:t,recordingKey:m.Pt(e,"borderWidth"),smallNudgeAmount:r,bigNudgeAmount:a,"data-tooltip-type":ed.Ib.TEXT,"data-tooltip":(0,P.t)("slides.properties_panel.border_panel.width_slider_tooltip"),tooltipForScreenReadersOnly:!0,enablePreview:!0},lY.map(t=>n.createElement(lG,{key:`border-width-${t}`,value:t,disabled:g,recordingKey:m.Pt(e,"borderWidth","select",t)},t))))))})))}var lX=l(973149),lQ=l(784940),lZ=l(752256);function lJ({value:e,min:t,max:l,step:r,bigStep:a,hints:i,onChange:s,ariaLabel:o,numberInput:c,sliderTrackableName:d,recordingKey:p}){return n.createElement("div",{className:"slides_slider_input_row--sliderInputRow--Z9EzC ui3_rows--_row--DnZFk ui3_rows--_grid--cP2Wu"},n.createElement("div",{className:"slides_slider_input_row--slider--M8t1y"},n.createElement(tT.E,{name:d},n.createElement(lZ.A,{min:t,max:l,step:r,bigStep:a,hints:i,rangeAnchor:t,mixed:(0,H.gl)(e),value:(0,H.hS)(e)?e:0,onChange:s,"aria-label":o,recordingKey:m.Pt(p,"slider")}))),n.createElement("div",{className:"slides_slider_input_row--input--E4qTs"},c))}class lj extends lr.c${}let lq=[0,8,16,24,32,64,96];class l0 extends lX.X9{format(e){return 1e6===e?"Circular":`${e}`}}function l1({recordingKey:e}){let t=(0,ee.wA)(),l=(0,tA.U)(),{smallNudgeAmount:r,bigNudgeAmount:a}=(0,K.sT)(),i=(0,n.useMemo)(()=>new l0({min:1,max:100,smallNudgeAmount:r,bigNudgeAmount:a}),[r,a]),[s,o]=(0,tK.lJ)("cornerRadius");if(!(0,lQ.Qr)(V.Sqb.CORNER_RADIUS))return null;let c=e=>{o(e)},d=void 0===s||(0,H.gl)(s)?H.oV:s;return n.createElement(tw.p,{name:"slides_corner_panel"},n.createElement(lV,null,n.createElement(li.r,{titleTx:n.createElement(P.Tx,{id:"slides.properties_panel.corner"})}),n.createElement(lJ,{min:0,max:100,step:1,bigStep:10,value:(0,H.gl)(s)?H.oV:s||0,onChange:c,ariaLabel:(0,P.t)("slides.properties_panel.corners_panel.corners_slider_aria"),numberInput:n.createElement(tT.E,{name:"slides_corner_radius_dropdown"},n.createElement(lT.ow,{value:{select:lw.pW,inputComponent:lw.gm}},n.createElement(lr.tV,{value:{chevron:lP.c9}},n.createElement(lS.YZ,{id:"corner-radius-select",onValueChange:c,value:d,dropdownShown:l,willShowDropdown:()=>(F.Y5.commit(),Promise.resolve()),formatter:i,dispatch:t,recordingKey:m.Pt(e,"cornerRadius"),"data-tooltip-type":ed.Ib.TEXT,"data-tooltip":(0,P.t)("slides.properties_panel.corner_radius"),tooltipForScreenReadersOnly:!1,enablePreview:!0},lq.map(t=>n.createElement(lj,{key:`corner-radius-${t}`,value:t,recordingKey:m.Pt(e,"cornerRadius","select",t)},t)),n.createElement(lr.sK,{key:"divider"}),n.createElement(lj,{key:"corner-radius-circular",value:1e6,recordingKey:m.Pt(e,"cornerRadius","select","circular")},n.createElement(P.Tx,{id:"slides.properties_panel.corners_panel.circular"})))))),sliderTrackableName:"slides_corner_radius_slider",recordingKey:m.Pt(e,"cornerRadius")})))}var l5=l(823223),l4=l(256296),l6=l(523099),l3=l(737947),l2=l(341860),l8=l(934576);let l7="slides_flapp_prop_panel--panelSelectorRow--8JJYh";function l9({selection:e}){let t=(0,ee.wA)(),l=(0,tA.U)(),r=(0,n.useMemo)(()=>Object.keys(e),[e])[0],a=(0,tp.Fk)((e,t)=>{let l=e.get(t);return(null==l?void 0:l.interactiveSlideConfigData)?l.interactiveSlideConfigData:void 0},r),i=(0,n.useMemo)(()=>(function(e){if(!e||!e.startingPointsData)return[];try{return JSON.parse(e.startingPointsData)}catch(e){return[]}})(a),[a]),s=(0,n.useMemo)(()=>new nl(i),[i]),o=(0,n.useCallback)(e=>{ek.l7.user("set_slides_embeddable_prototype_starting_point",()=>{var t;null==(t=l2.qo.instance.get(r))||t.setInteractiveSlideConfigData("activeStartingPointNodeId",e)})},[r]),c=(0,n.useCallback)(e=>{ek.l7.user("set_slides_embeddable_prototype_show_device_frame",()=>{var t;null==(t=l2.qo.instance.get(r))||t.setInteractiveSlideConfigData("deviceFrameShownOverride",e.toString())})},[r]);if(!a)return null;let d=a.activeStartingPointNodeId??"";return n.createElement(tw.p,{name:"slides_embeddable_prototype_panel"},n.createElement(eg.Zk,null,n.createElement(ne,{fileName:function(e){if(e.fileName)return e.pageName?`${e.fileName} - ${e.pageName}`:e.fileName}(a),baseUrl:a.url,activeStartingPointNodeId:a.activeStartingPointNodeId}),n.createElement("div",{className:l7},n.createElement("label",null,n.createElement(P.Tx,{id:"slides.properties_panel.embeddable_prototype.flow_label"})),n.createElement(tT.E,{name:"slide_embeddable_prototype_flow_selector"},n.createElement(lr.l6,{disabled:0===i.length,formatter:s,id:"slide-embeddable-prototype-flow-selector",property:d,onChange:e=>{o(e)},dispatch:t,dropdownShown:l},i.map(e=>n.createElement(lr.c$,{value:e.id,key:e.id}))))),void 0!==a.deviceFramePreset&&""!==a.deviceFramePreset?n.createElement(nt,{showDeviceFrame:(0,l8.Wd)(a),onChange:c}):null))}function ne({fileName:e,baseUrl:t,activeStartingPointNodeId:l}){let r=(0,n.useCallback)(()=>{let e;if(t){try{e=new URL(t)}catch(e){return}l&&e.searchParams.append("starting-point-node-id",l),l3.Ay.redirect(e.toString(),"_blank")}},[t,l]);return n.createElement(li.r,{titleTx:e?n.createElement("div",{className:tP.cx.textBodyMediumStrong.$},e):n.createElement(P.Tx,{id:"slides.properties_panel.embeddable_prototype.default_title"}),icon:n.createElement(eb.K,{"aria-label":(0,P.t)("slides.properties_panel.embeddable_prototype.open_prototype_label"),onClick:r,"data-tooltip-type":"text","data-tooltip":(0,P.t)("slides.properties_panel.embeddable_prototype.open_prototype_label")},n.createElement(l6.E,null))})}function nt({showDeviceFrame:e,onChange:t}){return n.createElement("div",{className:l7},n.createElement("label",null,n.createElement(P.Tx,{id:"slides.properties_panel.embeddable_prototype.device_frame_label"})),n.createElement(tT.E,{name:"slides_embeddable_prototype_device_frame_switch"},n.createElement(l5.d,{label:n.createElement(l4.h,null,(0,P.t)("slides.properties_panel.embeddable_prototype.device_frame_label")),checked:e,onChange:t})))}class nl{constructor(e){this.startingPointsData=e}format(e){var t,l;return(null==(l=null==(t=this.startingPointsData)?void 0:t.find(t=>t.id===e))?void 0:l.name)??""}}var nn=l(424928),nr=l(954625),na=l(116226),ni=l(485463),ns=l(974985),no=l(256981),nc=l(43604),nd=l(978488),np=l(30090),nu=l(278733),nm=l(931770),nh=l(53119),n_=l(335682),nE=l(186126),ng=l(527718),ny=l(172834),nv=l(671209),nb=l(407058),nf=l(306143),nS=l(617398),nT=l(676938);function nw({value:e,onValueChange:t,dispatch:l,dataTooltipType:r=ed.Ib.TEXT,dataTooltip:a,recordingKey:i}){return n.createElement(lS.w2,{"data-tooltip-type":r,"data-tooltip":a,value:e,onValueChange:t,dispatch:l,decimals:0,tooltipForScreenReadersOnly:!1,hidePercentSign:!0,childrenAtEnd:!0,inputClassName:tP.cx.w64.br0.$,recordingKey:i},n.createElement("span",{className:tP.cx.flex.w100.justifyEnd.pr4.eventsNone.colorTextSecondary.$},n.createElement(P.Tx,{id:"fullscreen.scrubbable.percent"})))}function nP({rowRef:e,recordingKey:t}){let[l,r]=n.useState(!1),[a,i]=n.useState(null),s=n.useCallback(()=>{l?r(!1):e.current&&(i((0,ep.cn)(e.current,240)),r(!0))},[l,e]),o=n.useRef(null),c=n.useRef(null);return(0,nT.Y)(()=>r(!1),{closeOnEsc:!0,ignore:[o,c]}),n.createElement(n.Fragment,null,n.createElement(tT.E,{name:"slides_blur_input"},n.createElement(lM,{isOpen:l,onMouseDown:s,ref:o,recordingKey:t},n.createElement("div",{className:tP.cx.inlineFlex.itemsCenter.$},n.createElement(nS.V,null),n.createElement(P.Tx,{id:"slides.properties_panel.blur.label"})))),l&&a&&n.createElement("div",{ref:c},n.createElement(ez.vx,{title:(0,P.t)("slides.properties_panel.blur.title"),headerSize:"small",initialPosition:a,initialWidth:240,onClose:()=>r(!1),autoflowHeight:!0,recordingKey:t},n.createElement("div",{className:tP.cx.py12.pr8.$},n.createElement(nk,{recordingKey:t})))))}function nk({recordingKey:e}){let t=(0,ee.wA)(),[l,r]=(0,tK.lJ)("blur"),a=n.useCallback(e=>r(100*e),[r]);return n.createElement(tw.p,{name:"slides_blur_controls"},n.createElement(lJ,{min:0,max:1,step:.01,bigStep:.1,value:(0,H.gl)(l)?H.oV:(l||0)/100,onChange:a,ariaLabel:(0,P.t)("slides.properties_panel.blur.strength"),numberInput:n.createElement(tT.E,{name:"slides_blur_strength_input"},n.createElement(nw,{dataTooltip:(0,P.t)("slides.properties_panel.blur.strength"),value:(0,H.gl)(l)?H.oV:(l||0)/100,onValueChange:a,dispatch:t,recordingKey:m.Pt(e,"blurStrength","input")})),sliderTrackableName:"slides_blur_strength_slider",recordingKey:m.Pt(e,"blurStrength")}))}var nI=l(935283),nC=l(227944);let nN=`${x.Yr}-overlay`,nA={type:"SOLID",color:{r:0,g:0,b:0,a:1},opacity:.4,blendMode:"NORMAL",visible:!0};function nx({rowRef:e,recordingKey:t}){let[l,r]=n.useState(!1),[a,i]=n.useState(null),s=n.useCallback(()=>{l?r(!1):e.current&&(i((0,ep.cn)(e.current,240)),r(!0))},[l,e]),o=n.useRef(null),c=n.useRef(null);(0,nT.Y)(()=>r(!1),{closeOnEsc:!0,ignore:[o,c]});let d=(0,tK.kl)("imageOverlayPaint"),p=(0,H.E7)(d??null)||nA;return n.createElement(n.Fragment,null,n.createElement(tT.E,{name:"slides_overlay_input"},n.createElement(lM,{isOpen:l,onMouseDown:s,ref:o,recordingKey:t},n.createElement("span",{className:tP.cx.inlineFlex.gap6.pl4.$},n.createElement(lF,{paint:p,colors:[]}),n.createElement(P.Tx,{id:"slides.properties_panel.overlay"})))),l&&a&&n.createElement("div",{ref:c},n.createElement(ez.vx,{title:(0,P.t)("slides.properties_panel.overlay"),headerSize:"small",initialPosition:a,initialWidth:240,onClose:()=>r(!1),autoflowHeight:!0,recordingKey:t},n.createElement("div",{className:tP.cx.py12.pr8.$},n.createElement(nL,{recordingKey:t})))))}function nL({recordingKey:e}){let t=(0,ee.wA)(),l=(0,nC.Zr)("add-image-overlay"),[r,a]=(0,tK.lJ)("imageOverlayPaint"),i=(0,H.gl)(r)||r&&l,s=e=>{(0,nI.KF)((0,H.hS)(r),"overlay paint should not be mixed");var t={...r||nA};t.opacity=e,a(t)};return n.createElement(tw.p,{name:"slides_overlay_controls"},n.createElement(lJ,{min:0,max:1,step:.01,bigStep:.1,value:i?H.oV:(null==r?void 0:r.opacity)||0,onChange:s,ariaLabel:(0,P.t)("slides.properties_panel.overlay.opacity_slider_aria_label"),numberInput:n.createElement(tT.E,{name:"slides_image_overlay_opacity_slider"},n.createElement(nw,{dataTooltip:(0,P.t)("fullscreen.scrubbable.opacity"),value:i?H.oV:(null==r?void 0:r.opacity)||0,onValueChange:s,dispatch:t})),sliderTrackableName:"slides_image_overlay_opacity_slider",recordingKey:m.Pt(e,"opacity")}),n.createElement("div",{className:tP.cx.pt8.pb4.pr8.pl16.$},n.createElement(lR,{paint:i?H.oV:r||nA,onChange:e=>{(0,nI.KF)((0,H.hS)(r),"overlay paint should not be mixed");var t={...e};r&&e.color&&r.color&&tI.z5.format(e.color)!==tI.z5.format(r.color)&&(t.opacity=r.opacity),r||(t.opacity=.4),a(t)},pickerId:nN,inheritStyleKeyField:"inheritFillStyleKey",inheritStyleKey:void 0,inheritStyleName:void 0,recordingKey:m.Pt(e,"color"),hideCustomColorPickerFillTypeToggle:!1})))}let nM="image-scale-mode-select";function nO({paint:e,paintIndex:t,onChange:l,recordingKey:r,selectedPropertyType:a}){var s;let o=(0,ee.wA)(),c=(0,n.useMemo)(()=>new lt.D,[]),d=(0,ee.d4)(e=>{var t;return(null==(t=e.dropdownShown)?void 0:t.type)===nM?e.dropdownShown:null}),[p,u]=(0,n.useState)(!1),[h,_]=(0,n.useState)(0),[E,g]=(0,n.useState)(0),[y,v]=(0,n.useState)(!1),[f,S]=(0,n.useState)(null),[T,w]=(0,n.useState)(!1),[k,I]=(0,n.useState)(!1),[C,N]=(0,n.useState)(0),[A,x]=(0,n.useState)(null),[L,M]=(0,n.useState)(null),O=(0,G.y7)(e),R=(0,n.useRef)(O);R.current=O;let D=(0,n_.tS)(),K=!!(null==e?void 0:e.animatedImage),B=!!(null==e?void 0:e.video)||(null==e?void 0:e.type)==="VIDEO";(0,n.useEffect)(()=>{var e;K&&(null==(e=R.current)?void 0:e.animationFrame)!=null?(N(R.current.animationFrame),(0,nb.Bc)(R.current).then(e=>{x((0,nh.J)(e))})):B&&(0,np.Fe)().then(e=>S(e))},[B,K,null==(s=null==O?void 0:O.animatedImage)?void 0:s.hash]);let U=function(){let e=(0,tK.kl)("videoMediaLoop");return{mediaLoop:e,autoplay:(0,tK.kl)("videoAutoplay"),muted:(0,tK.kl)("videoMuted"),numVideosSelected:(0,tK.kl)("numVideosSelected")}}();return e?n.createElement("div",null,n.createElement(b.Y,{isDragTarget:()=>!0,onTargetDragEnter:()=>(u(!0),m.aH),onTargetDragLeave:()=>(u(!1),m.aH),onTargetDrop:l=>{if(u(!1),F.Y5.fileArrayToString){let n=F.Y5.fileArrayToString(Array.from(l.files));V.glU.dropImageOnPaintThumbnail((null==e?void 0:e.blendMode)??"NORMAL",(null==e?void 0:e.opacity)??1,n,t,a)}},recordingKey:m.Pt(r,"imageDragTarget")},n.createElement("div",{className:i()(tP.cx.relative.wAuto.h100.flex.itemsCenter.justifyCenter.radiusMedium.$,"slides_color_controls--imagePreviewContainer--ivfKV",{[tP.cx.colorBorderSelected.bSolid.b1.$]:p})},O&&B?n.createElement(ny.A,{imagePaint:O,openFileKey:D||void 0,width:200,height:100,className:tP.cx.opacity1.block.$,currentTime:h,onUpdateCurrentTime:e=>_(e),setDuration:e=>g(e),playing:y,setPlaying:e=>v(e),videoJsLib:f,isVideoLoaded:T,setIsVideoLoaded:e=>w(e),userClickedControls:k,setUserClickedControls:e=>I(e)}):O&&K?n.createElement(nE.Y,{imagePaint:O,width:200,height:100,animatedImage:A,animationFrame:C,onUpdateFrameData:e=>M(e),playing:y}):O?n.createElement(ng.K,{imagePaint:O,width:200,height:100,forceUpdate:!1}):null,n.createElement("div",{className:i()(tP.cx.absolute.top0.bottom0.left0.right0.flex.itemsCenter.justifyCenter.$,"slides_color_controls--imagePreviewOverlay--h5Rqz")},n.createElement(tT.E,{name:"slides_media_upload"},n.createElement(eg.rp,{onClick:()=>{F.Y5.updateAppModel({currentSelectedProperty:{type:V.rrT.FILL,indices:[t]}});let l=e.blendMode||"NORMAL",n=e.opacity||1;V.glU.uploadPaintMedia(l,n)},style:nu.sx.wAuto.py4.px8.$,recordingKey:m.Pt(r,"uploadMedia")},n.createElement(P.Tx,{id:"slides.properties_panel.replace_media"})))))),n.createElement(ev.Ad,{label:null,input:n.createElement(tT.E,{name:"slides_image_scale_mode"},n.createElement(lr.l6,{id:nM,property:e.imageScaleMode??"FILL",onChange:t=>{"STRETCH"===t?F.Y5.triggerActionInUserEditScope("crop-image"):l({...e,imageScaleMode:t})},formatter:c,dispatch:o,dropdownShown:d,targetDomNode:document.body,inputWidth:80,recordingKey:m.Pt(r,"imageScaleMode")},nb.GA.map((e,t)=>n.createElement(lr.c$,{key:t,value:e,recordingKey:m.Pt(r,"imageScaleMode",e)}))))}),n.createElement(nD,{recordingKey:r}),B&&n.createElement(n.Fragment,null,n.createElement("div",{className:tZ},n.createElement(nf.P,{paint:e,currentTime:h||0,duration:E,onVideoTimeChange:e=>{_(e),v(!1)},disabled:!e.video,isVideoLoaded:T,setPlaying:e=>v(e),playing:!!e.video&&y,setUserClickedControls:e=>I(e)})),n.createElement("div",{className:tP.cx.pl16.pr8.flex.minH32.itemsCenter.$},n.createElement("div",{className:tP.cx.flex1.$},n.createElement(ni.S,{label:n.createElement(l4.J,{"data-tooltip-type":ed.Ib.TEXT,"data-tooltip":(0,P.t)("proto.prototype_panel.default_video_playback_state")},n.createElement(P.Tx,{id:"proto.prototype_panel.autoplay"})),onChange:e=>F.Y5.updateSelectionProperties({videoAutoplay:e}),checked:!0===U.autoplay,mixed:(0,H.gl)(U.autoplay)})),n.createElement(nR,{icon:!0===U.mediaLoop?n.createElement(ns.p,{color:"var(--color-border-selected)"}):n.createElement(no.U,null),enabled:!0===U.mediaLoop,onClick:()=>F.Y5.updateSelectionProperties({videoMediaLoop:!U.mediaLoop}),recordingKey:m.Pt(r,"videoLoopToggle"),tooltip:(0,P.t)("proto.prototype_panel.loop"),trackingName:"slides_video_loop_toggle"}),n.createElement(nR,{icon:!0!==U.muted?n.createElement(nc.L,{color:"var(--color-border-selected)"}):n.createElement(nd.P,null),enabled:!0!==U.muted,onClick:()=>F.Y5.updateSelectionProperties({videoMuted:!U.muted}),recordingKey:m.Pt(r,"videoSoundToggle"),tooltip:(0,P.t)("proto.prototype_panel.sound"),trackingName:"slides_video_sound_toggle"}))),K&&n.createElement("div",{className:tZ},n.createElement(nv.F,{paint:e,animationFrame:C,numFrames:A?A.numFrames():null,onGIFFrameChange:e=>{N(Math.round(e)),v(!1)},disabled:!A,setPlaying:e=>v(e),playing:!!A&&y,setGIFCoverFrame:t=>{if(!L)return;let l=t??C;(null!=t||l!==e.animationFrame)&&(F.Y5.triggerAction("toggle-raster-edit-mode"),ek.l7.user("update-gif-image-slides",()=>(0,nm.SK)({...e,animationFrame:l},L.data,V.rrT.FILL)),V.glU.setDefaultEditMode())}}))):null}function nR({enabled:e,onClick:t,icon:l,tooltip:r,trackingName:a,recordingKey:s}){return n.createElement(tT.E,{name:a},n.createElement(eT.GG,{className:i()("slides_color_controls--videoSettingsButton--MEiwV",{"slides_color_controls--enabled--3SYlu":e}),onClick:t,"data-tooltip-type":ed.Ib.TEXT,"data-tooltip":r,"aria-label":r,recordingKey:s},l))}function nD({recordingKey:e}){let t=(0,n.useRef)(null);return n.createElement(lk.g,{ref:t,leftLabel:null,leftInput:n.createElement(nx,{rowRef:t,recordingKey:m.Pt(e,"overlay")}),rightLabel:null,rightInput:n.createElement(nP,{rowRef:t,recordingKey:m.Pt(e,"blur")})})}let nF=`${x.Yr}-fill`,nV=["NONE","SOLID","GRADIENT","MEDIA"],nK={SOLID:"SOLID",GRADIENT:"GRADIENT_LINEAR",MEDIA:"IMAGE"};function nB({recordingKey:e}){let t=(0,ee.d4)(e=>e.mirror.selectionProperties.numSelectedByType),l=!!t&&(0,O.OU)(t,["SLIDE"]),r=t&&(0,O.Kl)(t,["SLIDE","TEXT"]),[a]=(0,tK.lJ)("fillsType"),i=(0,ee.d4)(e=>{let t=e.mirror.selectionProperties.fillPaints;return(0,H.gl)(t)?H.oV:null==t?void 0:t[0]}),[s]=(0,tK.lJ)("imageOverlayPaint"),[o]=(0,tK.lJ)("inheritFillStyleKey"),[c]=(0,tK.lJ)("inheritFillStyleName"),d=n.useMemo(()=>({NONE:{displayText:(0,P.t)("slides.properties_panel.fill.fill_type_none"),icon:n.createElement(eS.f,null)},SOLID:{displayText:(0,P.t)("slides.properties_panel.fill.fill_type_solid"),icon:n.createElement(nn.H,null)},GRADIENT:{displayText:(0,P.t)("slides.properties_panel.fill.fill_type_gradient"),icon:n.createElement(nr.z,null)},MEDIA:{displayText:(0,P.t)("slides.properties_panel.fill.fill_type_media"),icon:n.createElement(na.Z,null)}}),[]),p=n.useCallback((e,t)=>{G.Tm.clearCache();let l=[e];s&&(0,H.hS)(s)&&l.push(s),F.Y5.updateSelectionProperties({fillPaints:l},{shouldCommit:t})},[s]),u=n.useCallback(e=>(0,H.gl)(e)?void 0:e?"RASTER"===e||s&&(0,H.hS)(s)?"MEDIA":e:r?"SOLID":"NONE",[r,s]),[h,_]=n.useState(u(a));n.useEffect(()=>{_(u(a))},[a,i,u]);let E=n.useCallback(e=>{h!==e&&("NONE"===e?F.Y5.updateSelectionProperties({fillPaints:[]}):nK[e]&&p(G.Tm.initPaint(nK[e],tj.color,(0,H._W)(i,{}),"slides-fill-panel"),tU.zk.YES),_(e))},[i,p,h]);(0,tB.f4)(()=>{_(u(a))});let g=h&&(0,H.hS)(a)&&("SOLID"===h||"GRADIENT"===h),y=h&&(0,H.hS)(a)&&i&&(0,H.hS)(i)&&"MEDIA"===h;return n.createElement(tw.p,{name:"slides_fill_panel"},n.createElement(lV,null,n.createElement(li.r,{titleTx:(()=>{if(t){if(l)return n.createElement(P.Tx,{id:"slides.properties_panel.fill.slide_fill_title"});if((0,O.OU)(t,["TEXT"]))return n.createElement(P.Tx,{id:"slides.properties_panel.fill.text_fill_title"})}return n.createElement(P.Tx,{id:"slides.properties_panel.fill.fill_title"})})()}),n.createElement(lB,{legend:n.createElement(P.Tx,{id:"slides.properties_panel.fill.type_label"}),value:h,onChange:E,recordingKey:m.Pt(e,"fillType")},nV.filter(e=>!(r&&"NONE"===e)).map(e=>n.createElement(ly.I.Option,{key:e,value:e,icon:d[e].icon,"data-onboarding-key":d[e].displayText,"aria-label":d[e].displayText}))),g&&n.createElement("div",{className:tP.cx.py4.pr8.pl16.$},n.createElement(lR,{paint:i,onChange:p,inheritStyleKeyField:"inheritFillStyleKey",inheritStyleName:c,inheritStyleKey:o,pickerId:nF,recordingKey:m.Pt(e,"color"),hideCustomColorPickerFillTypeToggle:!0})),y&&n.createElement(nO,{paint:i,paintIndex:0,onChange:p,recordingKey:e,selectedPropertyType:V.rrT.FILL})))}var nU=l(234945),nH=l(690122),nG=l(721478),nY=l(687881);let nW=n.memo(function({recordingKey:e}){let t=(0,ee.d4)(nU.qd),l=(0,ee.d4)(nU.dT),r=(0,ee.d4)(eA.Z3),a=(0,H.E7)((0,tK.kl)("resettableInstanceOverrides")),{onlyInstances:i,onlyInstanceSublayers:s}=(0,nH.p)(l);return i||s?n.createElement(eg.Zk,{className:nY.Mx},i&&n.createElement("div",{className:nY.Og},n.createElement(eN.e6,{containerWidth:eX.O2.RESIZABLE_SIDEBAR,propDimension:eX.OE.ASSIGNMENT,guids:t,recordingKey:e,enableHidingOverflowRowsInUI3:!0,hideIcon:!0})),r.map(t=>n.createElement("div",{key:`bubbledInstance.${t[0]}`,className:nY.Wf},n.createElement(eN.ME,{containerWidth:eX.O2.RESIZABLE_SIDEBAR,propDimension:eX.OE.ASSIGNMENT,guids:t,hideErrors:!0,resettableInstanceOverrides:a&&a.bubbledInstanceOverrides?a.bubbledInstanceOverrides[t[0]]:void 0,instanceAndSublayerGUIDs:t,instanceNameDisplayOverride:nG.NA.NAME_ONLY,shouldHideInstanceTitleButtons:!0,hideIcon:!0,recordingKey:e,forBubbledProps:!0,highlightNodesOnHover:!0})))):n.createElement(eg.Zk,{className:nY.Mx})});var n$=l(992739),nz=l(447636);function nX({selection:e}){let t=(0,n.useMemo)(()=>Object.keys(e),[e]),l=t[0],r=(0,tp.Fk)((e,t)=>(function(e){let t;if(!e)return;let l=e.interactiveSlideElementTypeCompat;if(null===l||l===V.a9h.EMBED)return;switch(l){case V.a9h.POLL:t=(0,P.t)("slides.flapp.embed.widget_poll");break;case V.a9h.FACEPILE:t=(0,P.t)("slides.flapp.embed.widget_stamps");break;case V.a9h.ALIGNMENT:t=(0,P.t)("slides.flapp.embed.widget_alignment")}let n=Object.keys(e.interactiveSlideParticipantData).length>0,r=e.interactiveSlideConfigData,a=(0,nz.aF)(r);return{displayName:t,currentTheme:a.theme,hasParticipantData:n,shouldShowBackground:!a.transparentMode}})(e.get(t)),l),a=(0,n.useCallback)(()=>{ek.l7.user("reset_slides_interactive_widget_participant_data",()=>{var e;null==(e=l2.qo.instance.get(l))||e.resetInteractiveSlideParticipantData()})},[l]),i=(0,n.useCallback)(e=>{ek.l7.user("set_interactive_widget_theme",()=>{var t;null==(t=l2.qo.instance.get(l))||t.setInteractiveSlideConfigData("theme",e)})},[l]),s=(0,n.useCallback)(e=>{ek.l7.user("set_interactive_widget_hide_background",()=>{var t;null==(t=l2.qo.instance.get(l))||t.setInteractiveSlideConfigData("hideBackground",(!e).toString())})},[l]);return!r||t.length>1?null:n.createElement(tw.p,{name:"slides_interactive_widget_panel"},n.createElement(eg.Zk,null,n.createElement(li.r,{titleTx:n.createElement("p",{className:tP.cx.textBodyMediumStrong.$},r.displayName),icon:n.createElement(nJ,{canReset:r.hasParticipantData,onReset:a})}),n.createElement(nj,{currentTheme:r.currentTheme,onThemeSelected:i}),n.createElement(n0,{showBackground:r.shouldShowBackground,onChange:s}),n.createElement(nQ,null),n.createElement(nZ,null)))}function nQ(){return n.createElement("div",{className:tP.cx.wFull.colorBgTertiary.h1.$})}function nZ(){return n.createElement("div",{className:tP.cx.p8.$},n.createElement("div",{className:tP.cx.colorBgSecondary.radiusMedium.p8.$},n.createElement("div",{className:tP.cx.textBodyMediumStrong.colorText.pb4.$},n.createElement(P.Tx,{id:"slides.properties_panel.interactive_widget.usage_guidance_header"})),n.createElement("div",{className:tP.cx.textBodyMedium.colorTextTertiary.$},n.createElement(P.Tx,{id:"slides.properties_panel.interactive_widget.usage_guidance_text"}))))}function nJ({canReset:e,onReset:t}){let{showing:l,toggle:r}=(0,tA.B)("RESET_INTERACTIVE_WIDGET_ICON_DROPDOWN_ID"),a=(0,n.useRef)(null);return n.createElement(n.Fragment,null,n.createElement(eb.K,{"aria-label":(0,P.t)("slides.properties_panel.interactive_widget.reset_label"),disabled:!e,onClick:()=>r(),ref:a},n.createElement(n$.m,null)),l&&a.current&&n.createElement(em.Cf,{targetRect:a.current.getBoundingClientRect(),displayOverTarget:!0},n.createElement(ea.W.Option,{disabled:!0},n.createElement(P.Tx,{id:"slides.properties_panel.interactive_widget.reset_confirmation_title"})),n.createElement(ea.W.Option,{onClick:t},n.createElement(P.Tx,{id:"slides.properties_panel.interactive_widget.confirm_reset_label"}))))}function nj({currentTheme:e,onThemeSelected:t}){let l=(0,ee.wA)(),r=(0,tA.U)();return n.createElement("div",{className:l7},n.createElement("label",null,n.createElement(P.Tx,{id:"slides.properties_panel.interactive_widget.theme_selector_label"})),n.createElement(tT.E,{name:"slides_interactive_widget_theme_selector"},n.createElement(lr.l6,{id:"slides-interactive-widget-theme-selector",formatter:nq,property:e,onChange:t,dispatch:l,dropdownShown:r},n.createElement(lr.c$,{value:nz.Pm.Light,key:nz.Pm.Light}),n.createElement(lr.c$,{value:nz.Pm.Dark,key:nz.Pm.Dark}))))}let nq=new class{format(e){switch(e){case nz.Pm.Light:return(0,P.t)("slides.properties_panel.interactive_widget.light_theme_label");case nz.Pm.Dark:return(0,P.t)("slides.properties_panel.interactive_widget.dark_theme_label");case nz.Pm.Translucent:return(0,P.t)("slides.properties_panel.interactive_widget.transparent_theme_label")}}};function n0({showBackground:e,onChange:t}){return n.createElement("div",{className:l7},n.createElement("label",null,n.createElement(P.Tx,{id:"slides.properties_panel.interactive_widget.background_label"})),n.createElement(tT.E,{name:"slides_interactive_widget_background_switch"},n.createElement(l5.d,{label:n.createElement(l4.h,null,(0,P.t)("slides.properties_panel.interactive_widget.background_label")),checked:e,onChange:t})))}var n1=l(334495);let n5=/^\w+:/;function n4({recordingKey:e}){let t=(0,ee.wA)(),l=(0,tA.U)(),[r,a]=(0,tK.lJ)("hyperlink"),i=(0,H.E7)(r),s=null;i&&void 0!==i.guid?s={type:"guid",guid:i.guid}:i&&void 0!==i.url?s={type:"url",url:i.url}:(0,H.gl)(r)&&(s=H.oV);let o=(0,ll.J2)(V.Ez5.slideDeck().slideGrid),c=(0,lo.rY)(o),d=n.useMemo(()=>c.reduce((e,t,l)=>(e.set(t,l),e),new Map),[c]),p=n.useMemo(()=>({format:e=>{if(null===e)return"";if((0,H.gl)(e))return(0,P.t)("fullscreen.mixed");if("guid"===e.type){let t=(0,w.dI)(e.guid),l=d.get(t);return void 0===l?"":(0,P.t)("slides.properties_panel.link_panel.slide_number",{orderNum:l+1})}return"url"===e.type?e.url:""},parse:e=>{if(!e)return null;let t=(0,P.t)("slides.properties_panel.link_panel.slide_number",{orderNum:""}),l=e.replace(t,"").trim();if(l.length>0){let e=parseInt(l)-1,t=(0,w.sH)(c[e]);if(t)return{type:"guid",guid:t}}return{type:"url",url:e}},isEqual:(e,t)=>(0,lf.c2)(e,t)}),[d,c]),u=ek.nc.user("slides-link-change",n.useCallback(e=>{null===e?a({},tU.zk.YES):"guid"===e.type?a({guid:e.guid},tU.zk.YES):"url"===e.type&&a({url:e.url.match(n5)?e.url:`https://${e.url}`},tU.zk.YES),V.glU.hideHyperlinkEditor()},[a]));return n.createElement(tw.p,{name:"slides_link_panel"},n.createElement(lV,null,n.createElement(li.r,{titleTx:n.createElement(P.Tx,{id:"slides.properties_panel.link_panel.title"})}),n.createElement(ev.Ad,{input:n.createElement(lT.ow,{value:{select:lw.pW,inputComponent:lw.gm}},n.createElement(lr.tV,{value:{chevron:lP.c9}},n.createElement(lT.a3,{id:"slides-link-combo-box",dispatch:t,inputClassName:n1.lb,dropdownShown:l,formatter:p,property:s,onChange:e=>{u(e)},placeholder:(0,P.t)("slides.properties_panel.link_panel.placeholder"),forceInputPlaceholder:null===s,recordingKey:m.Pt(e,"link")},c.map(t=>n.createElement(lr.c$,{value:{type:"guid",guid:(0,w.sH)(t)},key:t,recordingKey:m.Pt(e,t)}))))),label:null})))}function n6({recordingKey:e}){let t=(0,ee.wA)(),[l,r]=(0,tK.lJ)("opacity"),a=(0,ee.d4)(e=>e.mirror.selectionProperties.numSelectedByType),i=!!a&&(0,O.OU)(a,["SLIDE"]);return n.createElement(tw.p,{name:"slides_opacity_panel"},n.createElement(lV,null,n.createElement(li.r,{titleTx:n.createElement(P.Tx,{id:"slides.properties_panel.opacity"})}),!i&&n.createElement(lJ,{min:0,max:1,step:.01,bigStep:.1,value:l??1,onChange:e=>r(e),ariaLabel:(0,P.t)("slides.properties_panel.opacity.opacity_slider_aria_label"),numberInput:n.createElement(tw.p,{name:"slides_opacity_slider"},n.createElement(nw,{dataTooltip:(0,P.t)("fullscreen.scrubbable.opacity"),value:l,onValueChange:e=>r(e),dispatch:t,recordingKey:m.Pt(e,"opacity","input")})),recordingKey:m.Pt(e,"opacity"),sliderTrackableName:"slides_opacity_slider"})))}function n3(e){return n.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},n.createElement("rect",{width:"8",height:"8",x:"7.5",y:"7.5",stroke:"var(--color-icon)",rx:"1"}),n.createElement("path",{fill:"var(--color-icon-tertiary)",fillRule:"evenodd",d:"M8.064 15.936A1.5 1.5 0 0 0 9.5 17h6a1.5 1.5 0 0 0 1.5-1.5v-6a1.5 1.5 0 0 0-1.064-1.436A1.5 1.5 0 0 1 16 8.5v6a1.5 1.5 0 0 1-1.5 1.5h-6a1.5 1.5 0 0 1-.436-.064Z",clipRule:"evenodd"}))}function n2(e){return n.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},n.createElement("rect",{width:"8",height:"8",x:"7.5",y:"7.5",stroke:"var(--color-icon)",rx:"1"}),n.createElement("path",{fill:"var(--color-icon-tertiary)",fillRule:"evenodd",d:"M9 16v.5a1.5 1.5 0 0 0 1.5 1.5h6a1.5 1.5 0 0 0 1.5-1.5v-6A1.5 1.5 0 0 0 16.5 9H16v5.5a1.5 1.5 0 0 1-1.5 1.5H9Z",clipRule:"evenodd"}))}function n8(e){return n.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},n.createElement("rect",{width:"8",height:"8",x:"6.5",y:"6.5",stroke:"var(--color-icon)",rx:"1"}),n.createElement("path",{fill:"var(--color-icon-tertiary)",fillRule:"evenodd",d:"M9 15v1.5a1.5 1.5 0 0 0 1.5 1.5h6a1.5 1.5 0 0 0 1.5-1.5v-6A1.5 1.5 0 0 0 16.5 9H15v4.5a1.5 1.5 0 0 1-1.5 1.5H9Z",clipRule:"evenodd"}))}let n7=["NONE","LIGHT","MEDIUM","STRONG"];function n9({recordingKey:e}){let t=(0,ee.wA)(),[l,r]=(0,tK.lJ)("shadow"),a=n.useMemo(()=>({NONE:{value:null,displayText:(0,P.t)("slides.properties_panel.shadow_style_none"),icon:n.createElement(eS.f,null)},LIGHT:{value:{radius:3,x:0,y:1},displayText:(0,P.t)("slides.properties_panel.shadow_style_light"),icon:n.createElement(n3,null)},MEDIUM:{value:{radius:16,x:0,y:5},displayText:(0,P.t)("slides.properties_panel.shadow_style_medium"),icon:n.createElement(n2,null)},STRONG:{value:{radius:40,x:0,y:10},displayText:(0,P.t)("slides.properties_panel.shadow_style_strong"),icon:n.createElement(n8,null)}}),[]),[i,s]=n.useState(()=>o(l));function o(e){if(!(0,H.gl)(e))return e?re(e,a.LIGHT.value)?"LIGHT":re(e,a.MEDIUM.value)?"MEDIUM":re(e,a.STRONG.value)?"STRONG":"NONE":"NONE"}let c=e=>{(0,H.hS)(l)&&l&&r({...l,opacity:e})};return(0,tB.f4)(()=>{s(o(l))}),n.createElement(tw.p,{name:"slides_shadow_panel"},n.createElement(lV,null,n.createElement(li.r,{titleTx:n.createElement(P.Tx,{id:"slides.properties_panel.shadow"})}),n.createElement(lB,{legend:n.createElement(P.Tx,{id:"slides.properties_panel.shadow_style"}),value:i,onChange:e=>{let t=a[e].value,n=(0,H.hS)(l)&&(null==l?void 0:l.opacity)||.25;r(t?{offset:{x:t.x,y:t.y},radius:t.radius,spread:0,opacity:n}:null,tU.zk.YES),s(e)},recordingKey:m.Pt(e,"shadowStyle")},n7.map(e=>n.createElement(ly.I.Option,{key:e,value:e,icon:a[e].icon,"data-onboarding-key":a[e].displayText,"aria-label":a[e].displayText}))),!!l&&n.createElement(lJ,{value:(0,H.gl)(l)?H.oV:(null==l?void 0:l.opacity)??0,min:0,max:1,step:.01,bigStep:.1,onChange:c,ariaLabel:(0,P.t)("slides.properties_panel.shadow_opacity"),numberInput:n.createElement(tT.E,{name:"slides_shadow_opacity_input"},n.createElement(nw,{dataTooltip:(0,P.t)("slides.properties_panel.shadow_opacity"),value:(0,H.gl)(l)?H.oV:(null==l?void 0:l.opacity)??0,onValueChange:c,recordingKey:m.Pt(e,"shadowOpacity","input"),dispatch:t})),sliderTrackableName:"slides_shadow_opacity_slider",recordingKey:m.Pt(e,"shadowOpacity")})))}function re(e,t){return e.radius===(null==t?void 0:t.radius)&&e.offset.x===(null==t?void 0:t.x)&&e.offset.y===(null==t?void 0:t.y)}var rt=l(559036),rl=l(392592),rn=l(357851);function rr({}){let e=(0,ee.wA)(),t=(0,tM.$)(),{Sprig:l}=(0,rt.A)(),r=n.useMemo(()=>ek.nc.user("swap-slide-theme",(t,n)=>{let r=V.Ez5.slideThemeLibBindings().swapSelectedSlidesToNewTheme(t,n||[]);r===V.qYO.NO_THEME_COLORS?e(rl.F.enqueue({message:(0,P.t)("slides.properties_panel.theme.shuffle_no_change_visual_bell")})):r===V.qYO.NONE_AVAILABLE&&e(rl.F.enqueue({message:(0,P.t)("slides.properties_panel.theme.no_swap_available")})),F.Y5.triggerAction("commit"),l("track","swap_slide_theme")}),[e,l]);return n.createElement(tw.p,{name:"slides_theme_panel"},n.createElement(eg.Zk,null,n.createElement(li.r,{titleTx:n.createElement(P.Tx,{id:"slides.properties_panel.theme.panel_title"})}),n.createElement("div",{className:tP.cx.grid.px16.$},n.createElement(rn.n,{dropdownKey:"theme-swap-dropdown",selectedThemeId:t,onChange:r,allowShuffle:!0}))))}var ra=l(993086),ri=l(923793),rs=l(226129),ro=l(343427),rc=l(794272),rd=l(75540),rp=l(238093),ru=l(282647),rm=l(872442),rh=l(688998),r_=l(599677),rE=l(231139),rg=l(937348),ry=l(304022),rv=l(176019),rb=l(564092),rf=l(533573),rS=l(841983),rT=l(326331),rw=l(358145),rP=l(646240),rk=l(877432),rI=l(632430),rC=l(407182),rN=l(352046),rA=l(776250),rx=l(175290),rL=l(395281),rM=l(83909),rO=l(44892),rR=l(237929),rD=l(289390),rF=l(860168);let rV=(0,s.hG)(rF.wQn);function rK({selectedStyleProperties:e,styleName:t,styleNameInputPrefix:l,isInspectPanel:r,viewOnly:a,recordingKey:i,showProperties:s=!0,showStylePreview:o=!1,onEnterPressed:c}){return n.createElement(rx.Y,{direction:"vertical",spacing:0,height:"hug-contents"},o&&n.createElement(tr.we,{selectedStyleProperties:e}),n.createElement(f.P,{maxHeight:300,width:rV},n.createElement(rB,{styleName:t,styleNameInputPrefix:l,selectedStyleProperties:e,isInspectPanel:r,viewOnly:a,recordingKey:i,onEnterPressed:c}),s&&(r?n.createElement(rD.U,{recordingKey:m.Pt(i,"inspectionPanel"),inStyleModal:!0}):n.createElement(tr.RO,{selectedStyleProperties:e,recordingKey:i}))))}function rB({selectedStyleProperties:e,styleName:t,styleNameInputPrefix:l,recordingKey:r,viewOnly:a,onEnterPressed:i}){let[o,c]=n.useState((l??"")+(t?(0,rR.kH)(t):"")),p=(0,ee.wA)(),u=e.guid,h=e.styleType,_=n.useRef(null),E=n.useContext(ta.zK),g=m.of(m.Pt(r,"styleName"),"submit",()=>{if(""===o)return;let l=t?(0,rR.In)(t):void 0,n=l?l+"/"+o:o;ek.l7.user("rename-style",()=>V.glU.renameNode((0,w.dI)(u),(0,rO.J_)(n))),F.Y5.triggerAction("commit"),y(),(0,rA.sx)("Style Renamed",{styleType:e.styleType})}),y=()=>{p(rL.ay({isRenaming:!1}))},v=m.v_(r,"keydown",e=>{if(e.keyCode===d.Uz.TAB)g();else if(e.keyCode===d.Uz.ENTER)g(),E===ta.zM.EDIT_STYLE&&""===o||null==i||i();else{if(e.keyCode!==d.Uz.ESCAPE)return m.aH;(0,q.flushSync)(()=>{c(t?(0,rR.kH)(t):"")}),y();let l=q.findDOMNode(_.current);l&&l.blur()}});return n.createElement("div",{className:tP.cx.flex.flexColumn.gap8.pl16.pr16.pt8.pb8.bb1.bSolid.colorBorder.$},n.createElement(eg.JU,{disabled:a},n.createElement(P.Tx,{id:"design_systems.create_style.name"})),a?n.createElement(rx.Y,{padding:{vertical:(0,s.hG)(rF.dGl)},width:"hug-contents",height:"hug-contents",verticalAlignItems:"start"},t):n.createElement(eg.ks,{ref:_,className:"slides_styles_properties_form--textInput--H1F0- raw_components--textInput--t9D8g raw_components--base--T7G0z raw_components--input--JB4Ix raw_components--singleRowHeight--dKM4t raw_components--border--SKh2u",name:"styleName",value:o,placeholder:(0,tr.Qv)(h),onFocus:()=>(p(rL.ay({isRenaming:!0})),c(o),m.aH),onBlur:g,onChange:e=>{let l=e.target.value;c(l),t!==l&&rM.wt.reportEditAction("style-rename")},onKeyDown:v,recordingKey:m.Pt(r,"styleName"),delay:50,autoFocus:!0,autoComplete:"off"}))}function rU({closePicker:e,recordingKey:t}){let l=(0,tM.$)(),r=(0,ee.d4)(e=>e.stylePreviewShown),a=(0,ee.wA)(),i=(0,ee.d4)(e=>e.mirror.selectedStyleProperties),s=(0,ee.d4)(e=>e.mirror.sceneGraphSelection),o=n.useRef(Object.keys(s).length>0),[c,d]=n.useState(!o.current&&void 0),{styleType:p,inheritStyleKeyField:u,styleNameInputPrefix:h}=r,{styleRef:_,createStyle:E}=(0,tn.u)({inheritStyleKeyField:u,isCreatingFromSelection:o.current,trackingOptions:{styleType:p}}),g=m.of(m.Pt("createStyleModal"),"submit",()=>{let t=E();a(k.XE()),a(k.Uv()),a(C.sw()),V.Ez5.slideThemeLibBindings().addTextStyleToLocalTheme(t||"",l),e()});if(!r.isShown||!r.isCreating)return null;let v=new y.Mi(r.rowLeft-300,r.rowTop);return n.createElement(ta.zK.Provider,{value:ta.zM.CREATE_STYLE},n.createElement(ez.vx,{title:(0,P.t)("design_systems.create_style.text"),headerSize:"small",initialWidth:300,initialPosition:v,onClose:()=>a(C.sw()),recordingKey:t,dragHeaderOnly:!0},n.createElement(rK,{type:i.styleType,recordingKey:t,styleNameInputPrefix:h,isInspectPanel:!1,selectedStyleProperties:i,showProperties:c,onEnterPressed:g}),!_&&n.createElement("div",{className:tP.cx.pl16.pr16.pt16.$},n.createElement(P.Tx,{id:"design_systems.create_style.an_error_occurred_while_creating_the_style"})),n.createElement(tt.AutoLayout,{horizontalAlignItems:o.current?void 0:"end",verticalAlignItems:"center",spacing:o.current?"auto":void 0,padding:16},o.current&&n.createElement(n.Fragment,null,n.createElement(ty.$n,{variant:"secondary",onClick:()=>d(!c),recordingKey:m.Pt(t,"showHideOptionsButton")},c?n.createElement(P.Tx,{id:"design_systems.create_style.hide_options"}):n.createElement(P.Tx,{id:"design_systems.create_style.show_more_options"})),n.createElement(ty.$n,{onClick:g,disabled:!_,recordingKey:m.Pt(t,"createStyleButton")},n.createElement(P.Tx,{id:"design_systems.create_style.create_style"}))))))}var rH=l(333370),rG=l(554905),rY=l(762127);function rW({closePicker:e,recordingKey:t}){var l;let r;let a=(0,ee.wA)(),i=(0,rG.Td)(),s=(0,n_.tS)(),{inheritTextStyleKey:o,styleIdForText:c,stylePreviewShown:d,selectedStyleProperties:p}=(0,rc.R)(e=>({inheritTextStyleKey:e.mirror.selectionProperties.inheritTextStyleKey,styleIdForText:e.mirror.selectionProperties.styleIdForText,stylePreviewShown:e.stylePreviewShown,selectedStyleProperties:e.mirror.selectedStyleProperties})),u=(0,w.dI)(p.guid),h=(0,tp.Fk)((e,t)=>{let l=e.get(t);return(null==l?void 0:l.name)||""},u);if(!d.isShown||d.isCreating||!p&&!o&&!c&&!u)return null;let _=()=>{V.glU.selectStyle(v.n3.INVALID,v.IA.INVALID),a(C.sw())},E=(l=(0,$.IW)(d),r="",l?r=l.name||"":(0,w.dI)(null==p?void 0:p.guid)&&h&&(r=h),r),g=ek.nc.user("slides-delete-style",()=>{d.style.isLocal&&(0,rH.Nr)(d.style,s),_(),e()});return n.createElement(ta.zK.Provider,{value:ta.zM.EDIT_STYLE},n.createElement(tw.p,{name:"slides_edit_text_style"},n.createElement(ez.vx,{title:n.createElement("div",{className:tP.cx.pl8.flex.wFull.itemsCenter.justifyBetween.$},n.createElement(P.Tx,{id:"slides.properties_panel.text_style.edit_text_style"}),n.createElement(eI.K0,{"data-tooltip-type":ed.Ib.TEXT,"data-tooltip":(0,P.t)("slides.properties_panel.text_style.delete_style"),onClick:g,recordingKey:m.Pt(t,"deleteStyle"),svg:rY.A})),key:"slides-edit-text-style-modal",headerSize:"small",initialWidth:300,initialPosition:new y.Mi(d.rowLeft-300,d.rowTop),onClose:_,dragHeaderOnly:!0},n.createElement(rK,{type:p.styleType,onEnterPressed:()=>a(C.sw()),viewOnly:i,key:"style-preview-panel",selectedStyleProperties:p,isInspectPanel:!1,styleName:E,recordingKey:m.Pt(t,"editTextStyle")}))))}var r$=l(535904),rz=l(902008),rX=l(896474),rQ=l(912666),rZ=l(602029),rJ=l(110382),rj=l(783908),rq=l(418985),r0=l(656164);function r1({parentRef:e,inheritTextStyleKey:t,styleIdForText:l,closePicker:r,recordingKey:a}){let i="inheritTextStyleKey",s=(0,rp._S)(i),c=(0,ee.wA)();return n.createElement(n.Fragment,null,n.createElement(rq.M,{inheritStyleKey:t,inheritStyleID:l,styleType:rQ.s4.TEXT}),s&&n.createElement(rq.U,{picker:s,styleType:rQ.s4.TEXT,inheritStyleKey:t,inheritStyleKeyField:i,inheritStyleID:l,stylePickerListLayout:!0,onToggleListLayout:tF.lQ,onApplyStyle:(e,t)=>{c(rI.AV({style:e,inheritStyleKeyField:i,fromSearch:t})),r()},hideBrowseLibraries:!(0,o.kc)().piper_style_libraries,hideCreateStyleButton:!0,customPickerTitle:(0,P.t)("slides.properties_panel.library_text_styles"),minBottomMargin:4,recordingKey:"subscribedStylePicker",hideLocalStyles:!0}),n.createElement(tT.E,{name:"slides_toggle_library_text_style_picker"},n.createElement(eI.YW,{selected:!1,"data-tooltip-type":ed.Ib.TEXT,"data-tooltip":(0,P.t)("fullscreen.properties_panel.tooltip_applyStyles"),recordingKey:m.Pt(a,"showStylesButton"),onClick:()=>{if(s)c(k.Uv());else if(e.current){let t=e.current.getBoundingClientRect();c(C.sw()),c(k.bS({id:(0,rp.OS)("inheritTextStyleKey"),initialX:t.left-t.width-4,initialY:t.top,modal:!0}))}},onMouseDown:M.dG,svg:r0.A})))}let r5="slides_text_style_dropdown_contents--styleOption--29CYO text--fontNeg12--2PWcg text--_fontBase--QdLsd text--_negText--j9g-L",r4="slides_text_style_dropdown_contents--optionHeader---tOKJ";function r6({mainStyle:e,inheritStyleID:t,inheritStyleKey:l,closePicker:r,recordingKey:a}){let i=(0,ee.wA)(),s=(0,tM.$)(),o=(0,tL.Xo)(s),c=n.useMemo(()=>(null==e?void 0:e.node_id)&&o.some(t=>t.node_id===e.node_id),[null==e?void 0:e.node_id,o]),d=n.createRef(),p=(0,ee.d4)(e=>e.stylePreviewShown),u=p.isShown&&p.isCreating,h=p.isShown&&!p.isCreating,_=n.useContext(ta.lk),[E,g]=n.useState([]),y=n.useCallback((e,t,l)=>{for(let n of e)ek.l7.user("reorder-slide-theme-style",()=>{V.glU.insertStyleBetween(n.node_id,(null==t?void 0:t.node_id)||"",(null==l?void 0:l.node_id)||"")})},[]);return n.createElement(eT.D8,{className:"slides_text_style_dropdown_contents--dropdownContainer--pwY1T",onMouseDown:M.dG,forwardedRef:d},n.createElement(tw.p,{name:"slides_text_style_picker"},n.createElement("div",{className:"slides_text_style_dropdown_contents--dropdownHeader--m278H"},n.createElement("span",{className:tP.cx.flexGrow1.$},n.createElement(P.Tx,{id:"slides.properties_panel.text_styles"})),n.createElement(r1,{parentRef:d,styleIdForText:t,inheritTextStyleKey:l,closePicker:r,recordingKey:a}),n.createElement(r$.d,{toggled:u,"aria-label":(0,P.t)("slides.properties_panel.text_style.create_new_style"),onClick:()=>{if(u)i(C.sw());else if(d.current){ek.l7.user("slides-create-style",()=>{V.glU.applyStyleToSelection("inheritTextStyleKey",w.AD,!0),V.glU.selectStyle(v.n3.INVALID,v.IA.INVALID)}),i(k.Uv());let e=d.current.getBoundingClientRect();_({styleType:rQ.s4.TEXT,inheritStyleKeyField:"inheritTextStyleKey",rowLeft:e.left,rowTop:e.top})}},recordingKey:m.Pt(a,"addStyleButton"),"data-tooltip-type":ed.Ib.TEXT,"data-tooltip":(0,P.t)("slides.properties_panel.text_style.create_new_style")},n.createElement(en.e,null))),n.createElement("div",{className:tP.cx.flex.flexColumn.$,style:{padding:"8px"}},o.length>0?n.createElement(rZ.q,{listItems:o,renderListItem:(l,i,s,o,c,d,p)=>n.createElement(r2,{key:l.node_id,textStyle:l,isSelected:(0,H.hS)(t)&&(null==e?void 0:e.node_id)===l.node_id,isDragging:s,isReorderingItems:o,closePicker:r,onMouseDown:c,onMouseMove:d,onMouseUp:p,recordingKey:a}),selectedIndices:E,updateSelection:g,onDragEnd:()=>g([]),onInsertItemsBetweenValues:y,isDragDisabled:h}):n.createElement(r3,null),!c&&n.createElement(r8,{mainStyle:e,inheritStyleID:t,closePicker:r})),!e&&n.createElement(eT.D8,{className:tP.cx.p8.bt1.bSolid.colorBorder.$},n.createElement(r7,{closePicker:r,recordingKey:m.Pt(a,"custom")}))))}function r3(){return n.createElement("span",{className:tP.cx.px8.colorTextSecondary.$},n.createElement(P.Tx,{id:"slides.properties_panel.text_style.empty_styles",title:n.createElement("strong",null,n.createElement(P.Tx,{id:"slides.properties_panel.text_style.title_style"})),body:n.createElement("strong",null,n.createElement(P.Tx,{id:"slides.properties_panel.text_style.body_style"}))}))}function r2({textStyle:e,isSelected:t,isDragging:l,isReorderingItems:r,closePicker:a,onMouseDown:s,onMouseMove:o,onMouseUp:c,recordingKey:d}){let u=(0,ee.wA)(),[h,_]=n.useState(!1),E=(0,tp.Fk)((e,t)=>{var l;return null==(l=e.get(t||""))?void 0:l.fontSize},e.node_id),g=n.createRef(),y=(0,rj.bf)(e),v=!r&&(h||y);return n.createElement(eT.D8,{forwardedRef:g,className:i()(r5,{[tP.cx.colorBgHover.$]:l||h&&!r}),onMouseDown:e=>{e.target===e.currentTarget&&s(e)},onMouseUp:e=>{e.target===e.currentTarget&&c(e)},onClick:()=>{u(rI.AV({style:e,inheritStyleKeyField:"inheritTextStyleKey"})),a()},onMouseMove:o,onMouseEnter:()=>_(!0),onMouseLeave:()=>_(!1),recordingKey:m.Pt(d,e.name)},n.createElement("span",{className:i()(tP.cx.eventsNone.$,t?tP.cx.visible.$:tP.cx.invisible.$)},n.createElement(rz.l,null)),n.createElement("div",{className:tP.cx.flexGrow1.ellipsis.eventsNone.inlineFlex.$},n.createElement("span",{className:i()(tP.cx.colorText.truncate.$,"slides_text_style_dropdown_contents--maxWidth80--WZCL1")},e.name),E&&n.createElement("span",{className:tP.cx.colorTextSecondary.pl2.$},n.createElement(P.Tx,{id:"slides.properties_panel.text.style_description_font_size",fontSize:(0,p.z0)(E)}))),n.createElement("span",{className:v?tP.cx.visible.$:tP.cx.invisible.$},n.createElement(r$.d,{"aria-label":(0,P.t)("slides.properties_panel.text_style.edit_text_style"),onClick:t=>{if(y)u(C.sw());else if(g.current){V.glU.selectStyleByGuid(e.node_id);let t=g.current.getBoundingClientRect();u(C.rk({style:e,rowTop:t.y,rowLeft:t.x-8}))}null==t||t.stopPropagation()},recordingKey:m.Pt(d,e.name,"editButton"),toggled:y},n.createElement(tf.A,null))))}function r8({mainStyle:e,inheritStyleID:t,closePicker:l}){let r=(0,rJ.AH)((0,H.E7)(null==e?void 0:e.key),(0,H.E7)(t)),a=(0,c.md)(tx.TN),i=n.useMemo(()=>{if(null==e?void 0:e.node_id)for(let t of a){let l=c.zl.get((0,tx.i1)(t)).data;if(l&&l.styleGUIDs.includes(e.node_id))return V.Ez5.slideThemeLibBindings().getThemeName(t)}return null},[null==e?void 0:e.node_id,a]),s="",o="";return(r&&"loaded"===r.status?(s=r.data.fileName,o=r.data.name):i&&(s=i,o=(null==e?void 0:e.name)||""),s&&o)?n.createElement(n.Fragment,null,n.createElement("div",{className:r4},s),n.createElement(eT.D8,{className:r5,onMouseUp:l},n.createElement(rz.l,null),o)):null}function r7({closePicker:e,recordingKey:t}){let l=(0,tK.kl)("fontFamily")||H.oV,r=(0,tK.kl)("fontSize")||H.oV;return n.createElement("div",{className:tP.cx.pb4.$},n.createElement("div",{className:r4},n.createElement(P.Tx,{id:"slides.properties_panel.text_style.custom"})),n.createElement(eT.D8,{className:r5,onClick:e,recordingKey:m.Pt(t,"custom")},n.createElement("div",{className:tP.cx.pr8.$},n.createElement(rX.In,{icon:"checkmark-on-16"})),(0,H.hS)(l)&&(0,H.hS)(r)?n.createElement(n.Fragment,null,n.createElement("div",{className:tP.cx.colorText.$},l),n.createElement("div",{className:tP.cx.colorTextSecondary.$,style:{paddingLeft:"3px"}},n.createElement(P.Tx,{id:"slides.properties_panel.text.style_description_font_size",fontSize:(0,p.z0)(r)}))):n.createElement(P.Tx,{id:"slides.properties_panel.text_style.mixed"})))}function r9({mainStyle:e,inheritTextStyleKey:t,styleIdForText:l,previouslyAppliedStyle:r,recordingKey:a}){let i=n.createRef(),[s,o]=n.useState(!1),c=(0,rP.Xr)(tx.q0),d=(0,rN.i)();n.useEffect(()=>{c({})},[d,c]);let p=()=>o(!1),u=n.useCallback(e=>{i.current&&e.target instanceof Node&&i.current.contains(e.target)||p()},[i]);return n.useEffect(()=>(window.addEventListener("mousedown",u),()=>window.removeEventListener("mousedown",u)),[u]),n.createElement(n.Fragment,null,n.createElement(ev.Ad,{ref:i,input:n.createElement(ae,{mainStyle:e,inheritStyleID:l,inheritStyleKey:t,previouslyAppliedStyle:r,textPreviewColor:d,isOpen:s,onClick:()=>{s?(p(),k.Uv()):o(!0)},closePicker:p,recordingKey:a}),label:null,appendedClassName:"slides_text_style_row--textStyleRow--FE95p"}),n.createElement(rU,{closePicker:p,recordingKey:m.Pt(a,"createTextStyleModal")}),n.createElement(rW,{closePicker:p,recordingKey:a}))}function ae({mainStyle:e,inheritStyleID:t,inheritStyleKey:l,previouslyAppliedStyle:r,textPreviewColor:a,isOpen:s,onClick:o,closePicker:c,recordingKey:d}){let p;let u=at(e),m=at(r);return p=(0,H.gl)(t)?n.createElement(P.Tx,{id:"slides.properties_panel.text_style.mixed"}):e&&!e.is_soft_deleted?u?n.createElement(an,{mainStyle:e,textPreviewColor:a}):e.name:m?n.createElement(n.Fragment,null,n.createElement(ar,{previouslyAppliedStyle:r,textPreviewColor:a}),n.createElement("span",{className:tP.cx.pl4.colorTextSecondary.$},n.createElement(P.Tx,{id:"slides.properties_panel.text_style.edited"}))):n.createElement(P.Tx,{id:"design_systems.styles.custom"}),n.createElement("div",null,n.createElement(eT.GG,{className:i()(tP.cx.relative.wFull.h40.py4.pl8.pr4.$,tP.cx.bRadius5.b1.bSolid.colorBorder.$,tP.cx.flex.itemsCenter.$),onMouseDown:M.dG,onClick:o,recordingKey:d,"data-tooltip-type":ed.Ib.TEXT,"data-tooltip":(0,P.t)("slides.properties_panel.text_style.tooltip")},n.createElement("div",{className:i()(tP.cx.flexGrow1.$,tP.cx.fontMedium.colorText.alignLeft.ellipsis.$,tP.cx.flex.itemsCenter.overflowHidden.$)},p),n.createElement(rT.r,null),!e&&m&&n.createElement(as,{themeStyleToUpdate:r,recordingKey:d})),s&&n.createElement(r6,{mainStyle:e,inheritStyleID:t,inheritStyleKey:l,closePicker:c,recordingKey:"slidesTextStylePicker"}))}function at(e){let t=(0,tM.$)(),l=(0,tL.Xo)(t);return!!e&&l.some(t=>t.node_id===e.node_id)}function al(e,t,l,n,r){return(async()=>{if(V.vXe.fontsAreLoading()){let e=0;await new Promise((t,l)=>{let n=setInterval(()=>{V.vXe.fontsAreLoading()||(t(),clearInterval(n)),e>10&&l(),e++},100)})}if(!V.vXe.fontIsLoaded(n,r))return"";let a=V.Ez5.slideThemeStylePreview().generateTextPreview(e,t,l,n,r);return a?URL.createObjectURL(new Blob([a])):""})()}function an({mainStyle:e,textPreviewColor:t}){let l=e.node_id,r=(0,tp.Fk)((e,t)=>{var l;return(null==(l=e.get(t))?void 0:l.name)||""},l),a=(0,tp.Fk)((e,t)=>{var l,n;return(t&&(null==(n=null==(l=e.get(t))?void 0:l.fontName)?void 0:n.family))??""},l),i=(0,tp.Fk)((e,t)=>{var l,n;return(t&&(null==(n=null==(l=e.get(t))?void 0:l.fontName)?void 0:n.style))??""},l),s=(0,tp.Fk)((e,t)=>{var l;return t&&(null==(l=e.get(t))?void 0:l.fontSize)||0},l),[o,d]=(0,c.fp)(tx.q0),p=o[l],u=(0,rw.PD)(p);n.useEffect(()=>{l&&a&&i&&!(l in o)&&al(l,r||"Text",t,a,i).then(e=>{d(t=>({...t,[l]:e}))})},[l,r,i,a,t,o,d]);let m=ai(s);return n.createElement(aa,{thumbnailUrl:p??u,styleName:r,previewHeight:m})}function ar({previouslyAppliedStyle:e,textPreviewColor:t}){let l=e.node_id,r=e.name,{fontFamily:a,fontStyle:i,fontSize:s}=(0,rc.R)(e=>{let t=e.mirror.selectionProperties;return{fontFamily:(0,H.hS)(t.fontFamily)?t.fontFamily:"",fontStyle:(0,H.hS)(t.fontStyle)?t.fontStyle:"",fontSize:(0,H.hS)(t.fontSize)&&t.fontSize?t.fontSize:0}}),[o,c]=n.useState("");n.useEffect(()=>{l&&a&&i&&al(l,r,t,a,i).then(e=>c(e))},[l,r,i,a,t,c]);let d=ai(s);return n.createElement(aa,{thumbnailUrl:o,styleName:r,previewHeight:d})}function aa({thumbnailUrl:e,styleName:t,previewHeight:l}){return e?n.createElement("img",{className:"slides_text_style_row--previewImg--vXJc9",style:{height:`${l}px`},src:e,alt:"Text style preview"}):n.createElement("div",{className:tP.cx.fontMedium.colorText.$},t)}function ai(e){var t;let l=(0,tM.$)(),n=(0,tL.Xo)(l),r=(0,tB.eY)(),a=[];for(let e of n){let l=null==(t=r.get(e.node_id))?void 0:t.fontSize;l&&a.push(l)}if(a.push(e),!e||0===a.length)return 17;let i=Math.min(...a),s=Math.max(...a);return i===s?17:Math.round(12+(e-i)/(s-i)*10)}function as({themeStyleToUpdate:e,recordingKey:t}){let l=(0,ee.wA)(),{fontFamily:r,fontStyle:a,fontSize:i,lineHeight:s,letterSpacing:o}=(0,rc.R)(e=>{let t=e.mirror.selectionProperties;return{fontFamily:t.fontFamily,fontStyle:t.fontStyle,fontSize:t.fontSize,lineHeight:t.lineHeight,letterSpacing:t.letterSpacing}}),c=(0,ry.B)(),d=async t=>{t.stopPropagation(),e.isLocal&&r&&a&&i&&s&&o&&(l(rI.AV({style:e,inheritStyleKeyField:"inheritTextStyleKey"})),V.glU.selectStyleByGuid(e.node_id),await (0,rk.yQ)(),F.Y5.updateSelectionProperties({fontFamily:r},{shouldCommit:tU.zk.NO,editScopeType:V.zkO.USER}),await (0,rk.yQ)(),F.Y5.updateSelectionProperties({fontStyle:a,fontSize:i,lineHeight:(0,rC.TK)(c,s),letterSpacing:o},{shouldCommit:tU.zk.NO,editScopeType:V.zkO.USER}),V.glU.selectStyle(v.n3.INVALID,v.IA.INVALID),F.Y5.triggerAction("commit"))};return n.createElement(ty.$n,{variant:"primary",onClick:d,recordingKey:m.Pt(t,"saveButton")},n.createElement(P.Tx,{id:"slides.properties_panel.text_style.save_button"}))}function ao({recordingKey:e}){let{inheritTextStyleKey:t,styleIdForText:l}=(0,rc.R)(e=>({inheritTextStyleKey:e.mirror.selectionProperties.inheritTextStyleKey||null,styleIdForText:e.mirror.selectionProperties.styleIdForText||null})),r=(0,rp.WH)(t,l,"TEXT"),a=(0,ee.d4)(e=>e.fonts),i=n.useMemo(()=>(0,rd.pn)(a),[a]),s=(0,tA.U)(),[o,c]=n.useState(null===r);n.useEffect(()=>{s||c(!(null==r?void 0:r.node_id))},[null==r?void 0:r.node_id]);let[d,p]=n.useState(null),u=n.useCallback(()=>{r&&p(r)},[r]),h=(0,ee.d4)(e=>e.mirror.sceneGraphSelection);return n.useEffect(()=>{p(null)},[h]),n.createElement(tw.p,{name:"slides_type_panel"},n.createElement(lV,{panelClassName:"slides_type_panel--typePanel--BLBhl"},n.createElement(r9,{mainStyle:r,inheritTextStyleKey:t,styleIdForText:l,previouslyAppliedStyle:d,recordingKey:m.Pt(e,"textStyle")}),o&&n.createElement(ac,{fonts:a,versionsForStyles:i,recordingKey:e,savePreviouslyAppliedStyleOnFontChange:u}),n.createElement(ap,{versionsForStyles:i,recordingKey:e}),n.createElement(am,{recordingKey:e}),!o&&n.createElement(ev.Ad,{input:n.createElement(ty.IK,{variant:"secondary",onClick:()=>c(!0),recordingKey:m.Pt(e,"showDetails")},n.createElement(P.Tx,{id:"slides.properties_panel.text.show_details"})),label:null})))}function ac({fonts:e,versionsForStyles:t,savePreviouslyAppliedStyleOnFontChange:l,recordingKey:r}){var a;let i=(0,ee.wA)(),s=(0,H._W)((0,tK.kl)("missingFont"),!1),o=!!(null==(a=F.Y5)?void 0:a.isFontListLoaded()),c=s||!o,d=(0,tK.kl)("fontFamily"),p=(0,tK.kl)("fontStyle"),u=(0,tK.kl)("fontSize"),h=(0,tK.kl)("lineHeight"),_=(0,tK.kl)("letterSpacing"),{bigNudgeAmount:E,smallNudgeAmount:g}=(0,K.sT)(),y=(0,ee.d4)(e=>e.mirror.selectionProperties.fontVariations),v=d?(0,rv.LM)({fontFamily:d,fontStyle:p,fonts:e,versionsForStyles:t}):void 0,b=(0,ry.B)(),{consumedVariable:f,clearVariableConsumption:S}=(0,rb.u3)(["FONT_FAMILY"]),T=f?(0,rf.MH)(f):null,w=(0,tN.u)(T??void 0),k=d?n.createElement(ru.ay,{id:"slides-type-panel-font-family",fontFamily:d,editingStyleGuid:void 0,onChange:n=>{l(),(0,rv.PK)({fontFamily:n,lineHeightInContext:b,fonts:e,fontVariations:y,versionsForStyles:t})},boundVariable:w??void 0,onDetachVariableClick:S,fonts:e,versionsForStyles:t,showPlaceholder:!1,disabled:c,hideTypographyVariableOptions:!0,recordingKey:m.Pt(r,"fontFamily")}):null,I=d&&p?n.createElement(tT.E,{name:"slides_font_style"},n.createElement(rh.zz,{id:"slides-type-panel-font-style",fontFamily:d,fontStyle:p,editingStyleGuid:void 0,onChange:(e,t,n)=>{l(),(0,rh.zD)({fontStyle:e,shouldCommit:t,fontVariations:n,lineHeightInContext:b,showVariableFontSettings:tF.lQ,showTypeVariablePicker:tF.lQ})},fonts:e,versionsForStyles:t,fontVariations:y,fontVariationAxes:null==v?void 0:v.variationAxes,dropdownAlignment:"right",showMissingIcon:!1,hideVariableFontOptions:!0,hideTypographyVariableOptions:!0,recordingKey:m.Pt(r,"fontStyle")})):null,C=u?n.createElement(tT.E,{name:"slides_font_size"},n.createElement(rm.Z,{id:"slides-type-panel-font-size",fontSize:u,onChange:l,disabled:c,editingStyleGuid:void 0,hideVariableOptions:!0,recordingKey:m.Pt(r,"fontSize")})):null,N=n.createRef(),A=h?n.createElement(rE.a,{lineHeight:h,lineHeightInContext:b,onChange:l,disabled:c,rowElementRef:N,editingStyleGuid:void 0,disableVariables:!0,recordingKey:m.Pt(r,"lineHeight")}):null,x=_?n.createElement(r_.I,{dispatch:i,letterSpacing:_,disabled:c,onChange:l,editingStyleGuid:void 0,rowElementRef:N,bigNudgeAmount:E,smallNudgeAmount:g,disableVariables:!0,recordingKey:m.Pt(r,"letterSpacing")}):null;return n.createElement(n.Fragment,null,k,n.createElement(lk.g,{leftLabel:n.createElement(P.Tx,{id:"slides.properties_panel.text.weight_label"}),leftInput:I,rightLabel:n.createElement(P.Tx,{id:"slides.properties_panel.text.font_size_label"}),rightInput:C}),n.createElement(lk.g,{ref:N,leftLabel:null,leftInput:A,rightLabel:null,rightInput:x}))}function ad(e){return e.toLowerCase().includes("italic")}function ap({versionsForStyles:e,recordingKey:t}){let{isBold:l,isItalic:r,isUnderline:a,isUnorderedList:i,fontFamily:s}=(0,rc.R)(e=>{var t,l;return{isBold:(0,rS.N)((null==(t=e.mirror.selectionProperties.fontStyle)?void 0:t.toString())||""),isItalic:ad((null==(l=e.mirror.selectionProperties.fontStyle)?void 0:l.toString())||""),isUnderline:"UNDERLINE"===e.mirror.selectionProperties.textDecoration,isUnorderedList:"UNORDERED_LIST"===e.mirror.selectionProperties.textLineType,fontFamily:e.mirror.selectionProperties.fontFamily}}),o=s&&(0,H.hS)(s)&&e[s]?Object.keys(e[s]):[],c=o.every(e=>!(0,rS.N)(e)),d=o.every(e=>!ad(e));return n.createElement(ev.Ad,{label:null,input:n.createElement("div",{className:tP.cx.flex.wFull.gap4.$},n.createElement(au,{selected:l,disabled:c,onClick:()=>{F.Y5.triggerActionInUserEditScope("toggle-bold")},icon:n.createElement(ra.j,{color:l?"var(--color-border-selected)":void 0}),tooltip:(0,P.t)("slides.properties_panel.text.bold"),trackingName:"slides_bold_button",recordingKey:m.Pt(t,"bold")}),n.createElement(au,{selected:r,disabled:d,onClick:()=>{F.Y5.triggerActionInUserEditScope("text-toggle-italic")},icon:n.createElement(ri.s,{color:r?"var(--color-border-selected)":void 0}),tooltip:(0,P.t)("slides.properties_panel.text.italic"),trackingName:"slides_italic_button",recordingKey:m.Pt(t,"italic")}),n.createElement(au,{selected:a,disabled:!1,onClick:()=>{F.Y5.triggerActionInUserEditScope("text-toggle-underline")},icon:n.createElement(rs.W,{color:a?"var(--color-border-selected)":void 0}),tooltip:(0,P.t)("slides.properties_panel.text.underline"),trackingName:"slides_underline_button",recordingKey:m.Pt(t,"underline")}),n.createElement(au,{selected:i,disabled:!1,onClick:()=>{F.Y5.triggerActionInUserEditScope("text-toggle-unordered-list")},icon:n.createElement(ro.Z,{color:i?"var(--color-border-selected)":void 0}),tooltip:(0,P.t)("slides.properties_panel.text.unordered_list"),trackingName:"slides_unordered_list_button",recordingKey:m.Pt(t,"unorderedList")}))})}function au({selected:e,disabled:t,onClick:l,icon:r,tooltip:a,trackingName:s,recordingKey:o}){return n.createElement(tT.E,{name:s},n.createElement(eT.GG,{className:i()("slides_type_panel--formatButton--71QdB",{"slides_type_panel--selected--dHazD":e,"slides_type_panel--disabled--Vd8xM":t}),onClick:l,"data-tooltip-type":ed.Ib.TEXT,"data-tooltip":a,"aria-label":a,recordingKey:o},r))}function am({recordingKey:e}){let t=(0,tK.kl)("textAlignVertical")||H.oV;return n.createElement(lk.g,{leftLabel:null,leftInput:n.createElement(tT.E,{name:"slides_text_align_horizontal"},n.createElement(rg.jw,{recordingKey:m.Pt(e,"textAlignHorizontal")})),rightLabel:null,rightInput:n.createElement(tT.E,{name:"slides_text_align_vertical"},n.createElement(rg.Ln,{textAlignVertical:t,recordingKey:m.Pt(e,"textAlignVertical")}))})}var ah=l(656147),a_=l(236192),aE=l(297666),ag=l(886653),ay=l(437304),av=l(452246),ab=l(226055),af=l(444576),aS=l(945020),aT=l(173454),aw=l(286640),aP=l(463420),ak=l(255942);let aI="styles--contextMenu--C-hVT",aC="styles--showOnRowHover--OUqRT",aN="styles--showOnSelectedRowHover--Lcf7e styles--showOnRowHover--OUqRT",aA="styles--caret--DZmzh",ax="styles--rowSelectedExpanded--MGvUV",aL="styles--rowSelectedSecondaryLightBlue--S-zy- draggable_list--rowSelectedSecondary--yOI1g raw_components--rowSelectedSecondary---U7Us raw_components--rowSelected--M2Eip";function aM({childLeft:e,childRight:t,deleteSelectedItems:l,forceShowHoverBorder:r,hideStylePreview:a,index:s,inspectStyleSelected:o,isDragging:c,isEditable:p,isRenaming:u,isCollapsed:h=!0,isLastChildOfSelection:_=!1,isFirstChildOfSelection:E=!1,isFolder:g,level:y,name:v,nameRef:b,onChildLeftClick:f,onContextMenu:S,onCreateFolder:T,onDoubleClick:w,onHoverChange:P,onMouseDown:k,onMouseMove:I,recordingKey:C,rowRef:N,secondaryName:A,selected:x,selectedSecondary:L,stopRenamingItem:O,tooltipData:R}){let D=n.useRef(null),[V,K]=n.useState(v),[B,U]=n.useState(!1),H=(0,ab.GS)(),G=n.useCallback(e=>{if(e){let t=q.findDOMNode(e);t&&t.select()}},[]);n.useEffect(()=>{K(v)},[v]);let Y=n.useCallback(e=>{""===e.trim()?(O(s,v),K(v)):O(s,e)},[s,v,O]),W=(0,m.AF)((0,m.Pt)(C,"text-input"),"change",n.useCallback(e=>{K(e.currentTarget.value)},[K])),$=(0,m.v_)((0,m.Pt)(C,"text-input"),"keydown",e=>{e.keyCode===d.Uz.ESCAPE?(O(s,v),K(v)):e.keyCode===d.Uz.ENTER&&Y(e.currentTarget.value)},{recordMetadata:e=>({inputValue:e.currentTarget.value}),playbackMetadata:e=>({currentTarget:{value:e.inputValue}})}),z=(0,m.v_)(C,"keydown",e=>{p&&!u&&(e.keyCode===d.Uz.BACKSPACE||e.keyCode===d.Uz.DELETE)?l():p&&!u&&e.keyCode===d.Uz.G&&(0,d.Fo)(e)?(T(),e.preventDefault()):!u&&e.nativeEvent&&F.Y5.forwardKeyboardEvent(e.nativeEvent)}),X=n.useCallback(()=>{Y(V)},[Y,V]),Q=(0,m.rf)(C,"contextmenu",e=>{S(e)}),Z=(0,m.rf)(C,"mousemove",e=>{I(e)},{recordMetadata:e=>({bounds:e.currentTarget.getBoundingClientRect(),pageX:e.pageX,pageY:e.pageY}),playbackMetadata:e=>({currentTarget:{getBoundingClientRect:()=>e.bounds},pageX:e.pageX,pageY:e.pageY})}),J=(0,m.rf)(C,"mousedown",e=>{k(e),a()}),j=(0,m.rf)(C,"mouseenter",n.useCallback(()=>{U(!0),null==P||P(!0)},[U,P])),ee=n.useCallback(()=>{U(!1),null==P||P(!1)},[U,P]),et=(0,m.rf)(C,"dblclick",n.useCallback(e=>{w(e)},[w])),el=Math.min((y-1)*3,18),en=rF.jNX-4-el,er=en-(H?7:5),ea=B&&!u||o?er:en,ei=x||L,es=i()({[ax]:!h&&ei,"styles--folderSecondarySelected--SL0JY":L||x&&!E,[aL]:L&&!H}),eo=i()({[aL]:ei,[ax]:!_&&ei}),ec=i()("styles--rowWithBorder--bphZ-",{[es]:g,[eo]:!g,"styles--rowWithHover--RWNMH":!ei&&(r||B&&!c)}),ed=n.createElement("div",{className:u?"styles--rowContentsRenaming--oDTtO styles--rowContents--37JBy":"styles--rowContents--37JBy",key:v,style:H?{width:"100%"}:{gridColumnEnd:`span ${ea}`}},u?n.createElement(eg.ks,{autoCapitalize:"off",autoCorrect:"off",autoFocus:!0,className:"styles--input--LbjR0",onBlur:X,onChange:W,onKeyDown:$,ref:G,spellCheck:!1,value:V}):n.createElement(n.Fragment,null,n.createElement("div",{className:"styles--name--KWZ8d ellipsis--ellipsis--Tjyfa",ref:b,...R},v),A&&n.createElement("div",{className:"styles--textStyle--DiUv4"},A)));return n.createElement(rZ.e,{className:ec,dragging:c,hideGrabber:!0,onContextMenu:Q,onKeyDown:z,onMouseDown:J,onMouseEnter:j,onMouseLeave:ee,onMouseMove:Z,onDoubleClick:et,ref:(0,ak.A)(D,N),selected:x,selectedSecondary:!1,tabIndex:0},el>0&&n.createElement("span",{style:{gridColumnEnd:`span ${el}`}}),n.createElement("div",{className:"styles--childLeftContainer--Hu61K",style:H?{gridColumnEnd:`span ${ea}`}:void 0},n.createElement("div",{onMouseDown:f&&M.dG,onClick:f},e),H&&ed),!H&&ed,t)}var aO=l(949207),aR=l(432023);function aD({deleteSelectedItems:e,folder:t,folderNameToNestUnder:l,hideStylePreview:r,index:a,isCollapsed:i,isDragging:s,isEditable:o,isRenaming:c,isTemporarilyExpanded:d,isFirstChildOfSelection:p,level:u,onContextMenu:h,onCreateFolder:_,onMouseDown:E,onMouseMove:g,onRenameItem:y,recordingKey:v,selected:b,selectedSecondary:f,stopRenamingItem:S,temporarilyExpandFolder:T,toggleFolder:w}){let k=(0,ee.wA)(),[I,N]=n.useState(!1),A=n.useRef(null),x=I&&!c&&o;n.useEffect(()=>{if(I&&s&&i){let e=setTimeout(()=>{T(t.name)},1e3);return()=>clearTimeout(e)}},[I,s,i,T,t]);let L=n.useCallback(()=>{var e;let l=(0,rQ.Zk)(t.styleTypeSection),n=null==(e=A.current)?void 0:e.getBoundingClientRect();l&&n&&k(C.Zs({rowLeft:n.left,rowTop:n.top,styleType:t.styleTypeSection,styleNameInputPrefix:`${t.name}/`,inheritStyleKeyField:l}))},[A,t.name,t.styleTypeSection,k]);return n.createElement(aM,{deleteSelectedItems:e,forceShowHoverBorder:l===t.name,hideStylePreview:r,index:a,isDragging:s,isEditable:o,isRenaming:c,isCollapsed:i,isFolder:!0,isFirstChildOfSelection:p,level:u,name:(0,rR.kH)(t.name),onChildLeftClick:function(){w(!i)},onContextMenu:h,onCreateFolder:_,onDoubleClick:function(){t.styleTypeSection&&y(t.name,!1,t.styleTypeSection)},onHoverChange:N,onMouseDown:E,onMouseMove:g,onRenameItem:y,recordingKey:v,selected:b,selectedSecondary:f,stopRenamingItem:S,rowRef:e=>{e&&(A.current=q.findDOMNode(e))},childLeft:n.createElement(ei.U,{svg:i&&!d?aR.A:aO.A,className:aA},i&&!d?n.createElement(aP.k,{className:aA}):n.createElement(lL.O,{className:aA})),childRight:x&&n.createElement(eg.$4,null,n.createElement(eg.K0,{className:b?aN:aC,recordingKey:m.Pt(v,"addButton"),"data-tooltip-type":ed.Ib.TEXT,"data-tooltip":(0,P.t)("design_systems.styles.tooltips.create"),svg:e8.A,fallbackSvg:t4.A,onClick:L}))})}var aF=l(910544),aV=l(162502);function aK({deleteSelectedItems:e,hideStylePreview:t,index:l,isDragging:r,isEditable:a,isRenaming:i,isLastChildOfSelection:o,level:c,onContextMenu:d,onCreateFolder:p,onInspectStyle:u,onMouseDown:h,onMouseMove:_,onRenameItem:E,recordingKey:g,selected:y,selectedSecondary:v,stopRenamingItem:b,dsStyle:f,stylePreviewShown:S,updateContextMenuStyleRef:T,updateSelection:w,updateFocusRowRef:I}){var N;let[A,x]=n.useState(!1),L=(0,ee.wA)(),O=n.useRef(null),D=n.useRef(null),F=n.useCallback(()=>{a&&E(f.node_id,!0,f.style_type)},[E,f.node_id,f.style_type,a]),V=S.isShown&&!S.isCreating&&S.style.node_id===f.node_id&&(0,R.EF)(S.style,f),K=A&&!i||V,B=n.useCallback(function(){let e=D.current;if(e){let t=e.getBoundingClientRect();V?L(C.sw()):(L(C.rk({style:f,rowTop:t.top,rowLeft:t.left})),u(f),w({type:f.style_type,folderNames:new Set,styleIds:new Set(f.node_id)}))}L(k.XE())},[L,u,w,f,V]),U=n.useCallback(e=>{(2===e.button||e.ctrlKey)&&T(D.current),h(e),V&&B()},[B,h,V,T]),H=O.current,G=!!H&&H.offsetWidth<H.scrollWidth,Y=n.useMemo(()=>!r&&f.description&&G?{"data-tooltip-type":ed.Ib.SPECIAL,"data-tooltip":ed.MW.STYLE_INFO,"data-tooltip-style-name":(0,rR.kH)(f.name),"data-tooltip-style-description":f.description,"data-tooltip-max-width":rF.jNX*(0,s.hG)(rF.dGl)}:null,[G,r,f.name,f.description]),W="TEXT"===f.style_type&&(null==(N=f.meta)?void 0:N.style_thumbnail)?f.meta.style_thumbnail:null;return n.createElement(aM,{deleteSelectedItems:e,hideStylePreview:t,index:l,inspectStyleSelected:V,isDragging:r,isEditable:a,isRenaming:i,isFolder:!1,isLastChildOfSelection:o,level:c,name:(0,rR.kH)(f.name),nameRef:O,onContextMenu:d,onCreateFolder:p,onDoubleClick:F,onHoverChange:x,onMouseDown:U,onMouseMove:_,onRenameItem:E,recordingKey:g,rowRef:e=>{if(e){let t=q.findDOMNode(e);I&&I(t),D.current=t}},secondaryName:W&&(0,rO.P$)(W),selected:y,selectedSecondary:v,stopRenamingItem:b,tooltipData:Y,childLeft:n.createElement(n.Fragment,null,n.createElement(aF.zi,{dsStyle:f,disableTooltip:!0}),y&&"FILL"===f.style_type&&n.createElement("div",{className:"styles--selectedRing--UniEc"})),childRight:K&&n.createElement(eg.$4,null,n.createElement("div",{style:{gridColumnEnd:"span 1"}}),n.createElement(eI.YW,{className:y?aN:aC,recordingKey:m.Pt(g,"customButton"),"data-tooltip-type":ed.Ib.TEXT,"data-tooltip":a?(0,P.t)("design_systems.styles.edit_style"):(0,P.t)("design_systems.styles.view_style"),selected:V,onMouseDown:M.dG,onClick:B},n.createElement(ei.U,{svg:aV.A},n.createElement(tf.A,null))))})}function aB({styleType:e,children:t}){let l=!(0,tB.p8)("isReadOnly");return n.createElement("div",{className:"styles--styleTypeSection--jPjTq component_tiles--section--qMua7"},l?n.createElement(aU,{styleType:e,recordingKey:`style-section-header-${e}`}):n.createElement("div",{className:"styles--styleTypeSectionHeader--224lA component_tiles--sectionHeader--eEC6d raw_components--panelTitle--VAQQA"},(0,$.QT)(e)),t)}function aU({styleType:e,recordingKey:t}){let[l,r]=n.useState(!1),a=(0,ee.wA)(),i=n.useRef(null),s=n.useCallback(()=>{var t;let l=(0,rQ.Zk)(e),n=null==(t=i.current)?void 0:t.getBoundingClientRect();l&&n&&a(C.Zs({rowLeft:n.left,rowTop:n.top,styleType:e,inheritStyleKeyField:l}))},[i,e,a]);return n.createElement(eT.D8,{className:"styles--styleTypeSectionRow--wVTIO",onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),recordingKey:t,forwardedRef:i},n.createElement(eg.JU,{className:"styles--styleTypeSectionRowLabel--PrKm-"},(0,$.QT)(e)),l&&n.createElement(eI.K0,{className:"styles--styleTypeSectionRowButton--V4Co2 styles--showOnRowHover--OUqRT",recordingKey:m.Pt(t,"addButton"),"data-tooltip-type":ed.Ib.TEXT,"data-tooltip":(0,P.t)("design_systems.styles.tooltips.create_style_from_section",{kind:(0,$.XV)(e).toLowerCase()}),svg:e8.A,fallbackSvg:t4.A,onClick:s}))}aB.displayName="StyleTypeSection";let aH=ea.W.Dropdown,aG=ea.W.Option,aY=ea.W.Separator,aW="styles-by-type-context-menu",a$=.75*(0,s.hG)(rF.uj0);function az({styleRowRef:e,onEditStyle:t,onRenameItem:l,onCreateFolder:r,onDeleteItems:a,onCutItems:i,onPasteItems:s,styleType:o}){let c=(0,tA.U)(),d=(0,ee.d4)(e=>e.library.localStyleSelection),p=n.useMemo(()=>d&&d.type===o&&(null==c?void 0:c.type)===aW?(0,rH.QA)(d,c.data.uiList):[],[d,c,o]),u=n.useMemo(()=>(0,rH.Ug)(p).map(e=>e.node_id),[p]),m=u.length;return c&&u.length?n.createElement(aX,{styleRowRef:e,selectedItems:p,numStyles:m,dropdownShown:c,onEditStyle:t,onRenameItem:l,onCreateFolder:r,onDeleteItems:a,onCutItems:i,onPasteItems:s}):n.createElement("div",null)}function aX({styleRowRef:e,selectedItems:t,numStyles:l,dropdownShown:r,onEditStyle:a,onRenameItem:i,onCreateFolder:s,onDeleteItems:o,onCutItems:c,onPasteItems:d}){var p;let u=(0,ee.wA)();n.useEffect(()=>(V.glU.computePastableStyleCount(),()=>{V.glU.clearPastableStyleCount()}),[]);let m=(0,ee.d4)(e=>e.mirror.appModel.pastableStyleCount),h=!!(null==(p=(0,n_.q5)())?void 0:p.canEdit),_=n.useCallback(()=>{if(!t.length||t[0].type!==aT.PW.STYLE)return;let l=t[0];if(e){let t=e.getBoundingClientRect();u(C.rk({style:l,rowTop:t.top,rowLeft:t.left})),u(k.XE())}a(l)},[u,t,a,e]),E=n.useCallback(()=>{if(!t.length||t[0].type===aT.PW.STYLE)return;let e=t[0];i(e.name,!1,e.styleTypeSection)},[i,t]);if(-1===m)return n.createElement("div",null);if(!h)return l>1?n.createElement("div",null):n.createElement(aH,{style:r.data.position,className:aI},n.createElement(aG,{recordingKey:"edit-style-option",onClick:_},n.createElement(P.Tx,{id:"design_systems.styles.view_style"})));let g=1===l&&(t[0].type===aT.PW.STYLE?n.createElement(aG,{recordingKey:"edit-style-option",onClick:_},n.createElement(P.Tx,{id:"design_systems.styles.edit_style"})):n.createElement(aG,{recordingKey:"rename-folder-option",onClick:E},n.createElement(P.Tx,{id:"design_systems.styles.rename_folder"})));return n.createElement(aH,{style:r.data.position,className:aI},n.createElement(aG,{recordingKey:"create-folder-option",onClick:s},n.createElement(P.Tx,{id:"design_systems.styles.add_new_folder"})),g,n.createElement(aG,{recordingKey:"delete-style-option",onClick:o},n.createElement(P.Tx,{id:"design_systems.styles.delete_styles",numStyles:l})),n.createElement(aY,null),n.createElement(aG,{recordingKey:"cut-style-option",onClick:c},n.createElement(P.Tx,{id:"design_systems.styles.cut_styles",numStyles:l})),!!m&&n.createElement(aG,{recordingKey:"paste-style-option",onClick:d},n.createElement(P.Tx,{id:"design_systems.styles.paste_styles",numStyles:m})))}var aQ=l(710752),aZ=l(582288),aJ=l(884909),aj=l(304173),aq=l(608974),a0=l(257812),a1=l(319431),a5=l(914110);let a4="local-style-creation-dropdown";function a6(){var e;let t=(0,ee.wA)(),l=(0,n.useContext)(ta.lk),r=!(0,tB.p8)("isReadOnly"),a=n.useRef(null),i=n.useRef(null),s=a.current,o=(0,tA.U)(),c=(null==o?void 0:o.type)===a4,d=null==(e=null==o?void 0:o.data)?void 0:e.targetRect,p="localStyleHeader",u=0===(0,ti.Bs)().length,h=(0,ee.d4)(e=>e.stylePreviewShown.isShown&&e.stylePreviewShown.isCreating),_=n.useMemo(()=>d||(c&&s?s.getBoundingClientRect():null),[d,s,c]),E=()=>{t(es.oB())},g=()=>{t(es.j7({type:a4}))},y=e=>{e.stopPropagation(),t(C.YG());let l=a.current;c?E():l&&((0,rA.sx)("editor-local-styles-dropdown-show"),g())},v=e=>{var t;E();let n=(0,rQ.Zk)(e),r=null==(t=i.current)?void 0:t.getBoundingClientRect();n&&r&&l({styleType:e,inheritStyleKeyField:n,rowLeft:r.left,rowTop:r.top})},b=u&&!c&&!h;return n.createElement(eg.fI,{className:b?"styles--panelHeaderRowFaded--pfgKz styles--panelHeaderRow--Kxqgo styles--styleTypeSectionRow--wVTIO draggable_list--panelHeaderRowFaded--kETRR":"styles--panelHeaderRow--Kxqgo styles--styleTypeSectionRow--wVTIO",forwardedRef:i},n.createElement(eg.xw,{className:"styles--panelTitleText--v7gXm draggable_list--panelTitleText--SwKez",onMouseDown:e=>b&&y(e),onClick:e=>e.stopPropagation()},n.createElement(P.Tx,{id:"design_systems.styles.local_styles"})),r&&n.createElement(n.Fragment,null,n.createElement(eg.K0,{ref:a,onMouseDown:y,onClick:e=>e.stopPropagation(),className:c?"styles--stylesHeaderButtonHighlight--WTeWy raw_components--iconButtonSelected--bJibL raw_components--_iconButton---ybo6":"styles--stylesHeaderButton--jhpA5 draggable_list--addButton--D0q--","data-tooltip-type":ed.Ib.TEXT,"data-tooltip":(0,P.t)("design_systems.create_style.create_style"),recordingKey:m.Pt(p,"addButton")},n.createElement(ei.U,{svg:e8.A,fallbackSvg:t4.A},n.createElement(en.e,null))),c&&_&&n.createElement(em.Cf,{targetRect:_,minWidth:128,disableDropdownScrollContainer:!0,propagateCloseClick:!0},$.og.map(e=>{let{icon:t,label:l}=function(e){switch(e){case"TEXT":return{icon:n.createElement(ei.U,{svg:a5.A},n.createElement(aQ.e,null)),label:(0,P.t)("design_systems.styles.dropdown.text")};case"FILL":return{icon:n.createElement(ei.U,{svg:a0.A},n.createElement(aZ.G,null)),label:(0,P.t)("design_systems.styles.dropdown.fill")};case"GRID":return{icon:n.createElement(ei.U,{svg:a1.A},n.createElement(aJ.E,null)),label:(0,P.t)("design_systems.styles.dropdown.grid")};case"EFFECT":return{icon:n.createElement(ei.U,{svg:aq.A},n.createElement(aj.n,null)),label:(0,P.t)("design_systems.styles.dropdown.effect")};default:throw(0,nI.j)(e),Error(`Invalid style type: ${e}`)}}(e),r=t=>{t.stopPropagation(),v(e)};return n.createElement(ea.W.Option,{key:e,className:"styles--createStyleDropdownRow--7iCXQ",onClick:r,onPointerUp:r,recordingKey:m.Pt(p,`dropdown-option-${e}`)},n.createElement(eu.Nu,null,t),l)}))))}let a3="collapsed-style-folders";function a2({scrollContainer:e,recordingKey:t}){let l=(0,ti.Bs)(),r=(0,tB.p8)("isReadOnly");return 0===l.length&&r?null:n.createElement(tw.p,{name:"local_styles_panel"},n.createElement(eg.Zk,null,n.createElement(a8,{scrollContainer:e,recordingKey:t})))}function a8({scrollContainer:e,recordingKey:t}){let l=(0,ee.wA)(),r=(0,ee.d4)(e=>e.stylePreviewShown),a=(0,ee.d4)(e=>e.mirror.appModel.activeCanvasEditModeType),i=(0,ee.d4)(e=>e.mirror.appModel.currentTool),s=n.useRef(null),o=(0,ti.Bs)(),c=(0,ee.d4)(e=>e.library.localStyleSelection),[d,p]=n.useState(null),[u,h]=n.useState(null),_=n.useRef(null),[E,g]=n.useState(!1),y=a===V.m1T.GRADIENT||a===V.m1T.RASTER||i===V.NLJ.DROPPER_COLOR;n.useEffect(()=>{let e=()=>{!y&&(l(rL.Bn(null)),r.isShown&&(l(C.sw()),V.glU.selectStyle(v.n3.INVALID,v.IA.INVALID)))},t=(0,M.ft)();return t?window.addEventListener("pointerdown",e):window.addEventListener("mousedown",e),()=>{t?window.removeEventListener("pointerdown",e):window.removeEventListener("mousedown",e)}},[l,r.isShown,y]);let{stylesByType:b,foldersAndStylesByType:f}=n.useMemo(()=>{let e=(0,$.Kw)(o),t=new Map;return $.og.map(l=>{let n=e.get(l);if(n){(0,$.LX)(n);let e=(0,rH.lM)(n,l),r=(0,rH.l0)(e);t.set(l,r)}}),{stylesByType:e,foldersAndStylesByType:t}},[o]),S=n.useCallback(e=>{(0,nI.KF)(null!=e.content_hash,"style does not have a hash"),V.glU.selectStyleByGuid(e.node_id),l(rL.ay({isRenaming:!1})),(0,rA.sx)("Style Inspected",{styleType:e.style_type,from:"styleListClick"})},[l]),T=n.useCallback((e,t,l)=>{p(t?e:null),h(t?null:{name:e,styleTypeSection:l})},[]),w=n.useCallback(e=>{if(!e){l(rL.Bn(null));return}let t=new Set;e.styleIds.forEach(l=>{let n=o.find(e=>e.type===aT.PW.STYLE&&e.node_id===l);if(!n)return;let r=(0,rR.In)(n.name);e.folderNames.has(r)||t.add(l)});let n={type:e.type,folderNames:e.folderNames,styleIds:t};l(rL.Bn(n))},[l,o]),P=n.useCallback((e,t,l)=>{if(!c)return;let n=e[t],r=(e,t)=>{let n=(0,rR.ke)(e.name),r=null!=t?t:n.length-1;n[r]=l;let a=(0,rH.Pc)(n.join("/"));ek.l7.user("rename-style",()=>V.glU.renameNode(e.node_id,a))};if(n.name!==l){if(n.type===aT.PW.STYLE)r(n);else{(0,rH.mx)(t,e).forEach(t=>{let l=e[t];l.type===aT.PW.STYLE&&r(l,n.level-1)});let a=new Set(c.folderNames);a.delete(n.name);let i=(0,rR.In)(n.name)+"/"+l;a.add(i),w({type:c.type,folderNames:a,styleIds:c.styleIds})}}F.Y5.triggerAction("commit"),p(null),h(null)},[c,w]),k=n.useCallback((e,t)=>{t.preventDefault(),t.stopPropagation(),l(es.j7({type:aW,data:{uiList:e,position:{top:t.clientY,left:Math.min(t.clientX,window.innerWidth-a$)}}}))},[l]),I=n.useCallback(e=>{_.current=e},[]),N=n.useCallback(()=>{g(!0)},[]),A=n.useCallback(()=>{g(!1)},[]);return n.createElement("div",{className:"styles--localStylesPanel--T4Gqs",ref:s},n.createElement(a6,null),$.og.map(l=>{let r=b.get(l);if(!r)return;let a=f.get(l);if(a)return n.createElement(a7,{key:l,recordingKey:m.Pt(t,`style-section-${l}`),styleType:l,storedStyleList:r,styleList:a,updateSelection:w,isDragging:E,onDragStart:N,onDragEnd:A,onInspectStyle:S,onContextMenu:k,updateContextMenuStyleRef:I,renamingStyleID:d,renamingFolder:u,onRenameItem:T,stopRenamingItem:P,styleRowRef:_.current,onEditStyle:S,scrollContainer:e})}))}function a7({styleType:e,storedStyleList:t,styleList:l,renamingStyleID:r,renamingFolder:a,onRenameItem:i,stopRenamingItem:s,onDragStart:o,onDragEnd:c,onInspectStyle:d,onContextMenu:u,updateContextMenuStyleRef:h,updateSelection:_,styleRowRef:E,scrollContainer:g,recordingKey:y}){let b=(0,n_.q5)(),f=!(0,tB.p8)("isReadOnly"),S=(0,ee.wA)(),T=(0,ee.d4)(e=>e.stylePreviewShown),w=(0,ab.GS)(),I=(0,ee.d4)(t=>(0,af.i4)(t,e)),N=(0,ee.d4)(t=>(0,af.A7)(t,e,l)),[A,x]=n.useState(()=>{if(aw.x4&&b){let t=JSON.parse(aw.x4.getItem(a3)||"{}");if(b.key in t){let l=t[b.key];if(e in l)return new Set(l[e])}else t[b.key]={},aw.x4.setItem(a3,JSON.stringify(t))}return new Set(l.filter(e=>"STYLE_FOLDER"===e.type).map(e=>e.name))}),[L,M]=n.useState([]),[O,R]=n.useState(null),[D,K]=n.useState(null),B=n.useMemo(()=>(0,aE.s)(()=>{S(av.GT({styleType:e}))},200),[S,e]);n.useEffect(()=>{B()},[B,l]);let U=(0,rw.ZC)(A);n.useEffect(()=>{if(!U||!aw.x4||!b||(0,ay._f)(U,A))return;let t=JSON.parse(aw.x4.getItem(a3)||"{}"),l=t[b.key];l&&(l[e]=[...A],aw.x4.setItem(a3,JSON.stringify(t)))},[A,b,U,e]);let H=n.useCallback(e=>!!e&&"STYLE_FOLDER"===e.type,[]),G=n.useCallback((e,t)=>{let n=new Set(e),r=[];l.forEach((e,t)=>{if(n.has(e)&&(r.push(t),"STYLE_FOLDER"===e.type)){let e=(0,rH.mx)(t,l);r.push(...e)}});let a=new Set(r),i=t?l.indexOf(t):l.length,s=[...(0,p.y1)(i).filter(e=>!a.has(e)),...r,...(0,p.y1)(i,l.length).filter(e=>!a.has(e))],o=new Map;return s.forEach((e,t)=>{e!==t&&o.set(e,t)}),o},[l]),Y=n.useCallback(()=>{T.isShown&&(S(C.sw()),S(k.XE()),V.glU.selectStyle(v.n3.INVALID,v.IA.INVALID))},[S,T.isShown]),W=n.useMemo(()=>{if(!O)return null;if("in"===O.type){let e=l[O.index];return e?{folderNameToNestUnder:e.name,dividerStyles:{display:"none"}}:null}if(null==O.index||null==D||!I)return null;let e=(0,rH.QA)(I,l),t=e[0],n=null,r=null;if(0===O.index?r=l[O.index]:O.index===l.length?n=l[O.index-1]:(n=l[O.index-1],r=l[O.index]),(null==n?void 0:n.type)==="STYLE_FOLDER"&&A.has(n.name)&&-1===L.indexOf(n.name))return{folderNameToNestUnder:n.name,dividerStyles:{display:"none"}};if((null==n?void 0:n.type)===aT.PW.STYLE){let e=(0,rR.In)(n.name).split("/");for(let l=0;l<e.length;l++){let n=e.slice(0,l+1).join("/");if(A.has(n)&&-1===L.indexOf(n)){if("STYLE_FOLDER"!==t.type)return{folderNameToNestUnder:n,dividerStyles:{display:"none"}};return{folderNameToNestUnder:(0,rR.In)(n),dividerStyles:{marginLeft:24*Math.min((0,rR.ke)(n).length,8)-8}}}}}let a=0,i=null,s=n?(0,rH.rM)(n):0,o=r?(0,rH.rM)(r):0;if(s<=o)a=o,i=n?n.type===aT.PW.STYLE?(0,rR.In)(n.name):n.name:"";else if((0,nI.KF)(null!=n,"Dragging after an item that doesn't exist"),t.type===aT.PW.STYLE||D>=.5)a=s,i=(0,rR.In)(n.name);else{let e=Math.floor(D/.5*(0,rH.rM)(n));e=Math.max(o-1,e),i=(0,rR.ke)((0,rR.In)(n.name)).slice(0,e).join("/"),a=e+1}let c={marginLeft:24*Math.min(a,8)-8};return n&&e.includes(n)||!(0,rH.Md)(n,t,r)?{folderNameToNestUnder:null,dividerStyles:c}:{folderNameToNestUnder:i,dividerStyles:c}},[A,D,I,O,l,L]),$=n.useCallback((n,r,a,i)=>{if(!t||!r&&!a||!W)return;let s=W.folderNameToNestUnder;if(null===s)return;let o=[],c=[];n.forEach(e=>{(0,rH.Md)(r,e,a,s)&&("STYLE_FOLDER"===e.type?c.push(e):o.push(e))});let d=o.concat(c);if(!d.length)return;let p=ek.l7.user("reorder-styles",()=>(0,rH.VB)(d,r,a,s,l,t,i||!1)),u=new Set,m=new Set;d.forEach(e=>{let t=(0,rH.t_)(e),l=null==p?void 0:p.get(t);l&&("STYLE_FOLDER"===e.type?u.add(l):m.add(t))}),_({type:e,folderNames:u,styleIds:m});let h=new Set;return A.forEach(e=>{if(s.startsWith(e))return;let t=null==p?void 0:p.get(e);t?h.add(t):h.add(e)}),x(h),Y(),i||F.Y5.triggerAction("commit"),G(d,a)},[_,A,W,G,Y,t,l,e]),z=n.useCallback((e,t)=>{if("STYLE_FOLDER"!==t.type)return;let n=l.indexOf(t),r=(0,rH.dm)(t).filter(e=>(0,rR.In)(e.name)===t.name);if(!r.length)return $(e,t,l[n+1]);{let t=r[r.length-1],n=l.indexOf(t);return $(e,t,l[n+1])}},[$,l]),X=(0,ag.xx)((e,t)=>{let n=new Map,r=t.map(e=>e.type===aT.PW.STYLE?e.node_id:e.name);return e.forEach(e=>{let a=r.indexOf(e);-1!==a&&(0,rH.mx)(a,l).forEach(e=>{let l=t[e],r="STYLE_FOLDER"===l.type?l.name:l.node_id,a=n.get(r);a||(a=0),n.set(r,a+1)})}),n}),Q=n.useCallback(()=>{if(!I)return;let t=(0,rH.QA)(I,l);if(0===t.length)return;let n=t[0],r=l.indexOf(n),a=r,s=r+1;if(n.type===aT.PW.STYLE&&l[s]&&l[s].type===aT.PW.STYLE){let e=(0,rH.rM)(n);for(let t=r+1;t<l.length;t++){let n=l[t];if("STYLE_FOLDER"===n.type&&n.level===e||(0,rH.rM)(n)<e){a=t-1,s=t;break}t===l.length-1&&(a=t,s=t+1)}}$(t,l[a],l[s],!0);let o=(0,rR.In)(n.name),c=w?(0,P.t)("design_systems.create_style.new_folder"):(0,P.t)("design_systems.create_style.untitled_folder");o&&(c=`${o}/${c}`);let d=(e,t)=>{if(e.type===aT.PW.STYLE){let l=c+"/"+t+(0,rR.kH)(e.name);ek.l7.user("rename-style",()=>{V.glU.renameNode(e.node_id,l)})}else{let l=t+(0,rR.kH)(e.name)+"/";e.styles.forEach(e=>{d(e,l)}),e.subfolders.forEach(e=>{d(e,l)})}};t.forEach(e=>{d(e,"")}),_({type:e,folderNames:new Set([c]),styleIds:new Set}),i(c,!1,e)},[_,$,w,I,i,l,e]),Z=n.useCallback((e,t)=>{let n=l[e];"STYLE_FOLDER"===n.type&&x(e=>{let l=new Set(e);return t?l.add(n.name):l.delete(n.name),l})},[l]),J=n.useCallback((e,t)=>{x(n=>{let r=new Set(n),a=l[e];if("STYLE_FOLDER"===a.type){let e=(0,rR.In)(a.name),l=""===e?t:e+"/"+t;A.has(a.name)&&(A.delete(a.name),A.add(l)),(0,rH.KU)(a).forEach(e=>{if(A.has(e.name)){let t=e.name.replace(a.name,"");A.add(l+t),A.delete(e.name)}})}return r}),s(l,e,t)},[s,A,l]),j=n.useCallback(e=>{u(l,e)},[u,l]),q=n.useCallback((e,t,l)=>{let n=t>.5?1:Math.round(1e3*t)/1e3;R({index:e,type:l?"in":"before"}),K(n)},[]),et=n.useCallback(()=>{x(e=>ek.l7.user("delete-styles",()=>{let t=new Set(e);return(I?(0,rH.QA)(I,l):[]).forEach(e=>{"STYLE_FOLDER"===e.type?((0,rH.a2)(e,(null==b?void 0:b.key)||null),A.delete(e.name),(0,rH.KU)(e).forEach(e=>A.delete(e.name))):(0,rH.Nr)(e,(null==b?void 0:b.key)||null)}),t})),F.Y5.triggerAction("commit"),T.isShown&&(S(C.sw()),S(k.XE()),V.glU.selectStyle(v.n3.INVALID,v.IA.INVALID)),_(null)},[T.isShown,_,I,l,null==b?void 0:b.key,A,S]),el=n.useMemo(()=>{let e=I?(0,rH.QA)(I,l):[];return(0,rH.Ug)(e).map(e=>e.node_id)},[I,l]),en=n.useCallback(()=>{V.glU.cutStyles(el)},[el]),er=n.useCallback((e,t)=>{t===aS.zy.PASTE?V.glU.pasteStyles():e.shouldPropagate=!0},[]);n.useEffect(()=>{if(!I)return;let e=e=>{e.target&&("INPUT"===e.target.tagName||"TEXTAREA"===e.target.tagName)||en()};return document.addEventListener("cut",e),()=>{document.removeEventListener("cut",e)}},[en,I]);let ea=n.useCallback(()=>{V.glU.pasteStyles()},[]),ei=n.useCallback(e=>{M(t=>[...t,e])},[]),es=n.useCallback(()=>{o()},[o]),eo=m.rf(y,"ondragend",n.useCallback(()=>{R(null),K(null),M([]),c()},[c])),ec=(0,rw.ZC)(I);n.useEffect(()=>{ec!==I&&I&&x(e=>{let l=new Set(e);for(let e of I.styleIds.values()){let n=t.find(t=>t.node_id===e);if(!n)continue;let r=(0,rR.ke)(n.name);for(let e=0;e<r.length;e++){let t=r.slice(0,e).join("/");l.delete(t)}}return l})},[I,ec,t]);let ed=n.useRef(null),ep=n.useCallback(e=>{ed.current=e},[ed]),eu=n.useMemo(()=>I?(0,rH.h$)(I,l):[],[I,l]),em=n.useMemo(()=>N?(0,rH.h$)(N,l):[],[N,l]),eh=n.useMemo(()=>[...eu,...em].sort((e,t)=>e-t),[eu,em]),e_=n.useCallback((e,t,s,o,c,p)=>{let u="STYLE_FOLDER"===e.type?e.name:e.node_id,m=!1,E=!1;for(let t of L)if("STYLE_FOLDER"===e.type){if(e.name===t){E=!0;break}e.name.startsWith(t)&&(m=!0)}else if((0,rR.In)(e.name)===t){m=!0;break}if(!E&&!m&&X(A,l).has(u))return null;let g=eh&&eh[eh.length-1]===t,y=eh&&eh[0]===t;if(e.type===aT.PW.STYLE){let l=(0,rH.rM)(e),a=null!=r&&r===e.node_id;return n.createElement(aK,{hideStylePreview:Y,recordingKey:`style-row-${t}`,index:t,key:e.node_id,isDragging:o,dsStyle:e,selected:s,selectedSecondary:(null==N?void 0:N.styleIds.has(e.node_id))||!1,level:l,stylePreviewShown:T,onContextMenu:j,updateContextMenuStyleRef:h,updateFocusRowRef:s?ep:null,onMouseDown:c,onMouseMove:p,onInspectStyle:d,updateSelection:_,isEditable:f,deleteSelectedItems:et,isRenaming:a,onRenameItem:i,stopRenamingItem:J,onCreateFolder:Q,isLastChildOfSelection:g})}{let l=null!=a&&a.name===e.name&&a.styleTypeSection===e.styleTypeSection,r=(null==W?void 0:W.folderNameToNestUnder)||null;return n.createElement(aD,{recordingKey:`folder-section-${e.styleTypeSection}-row-${t}`,key:t,index:t,isDragging:o,folder:e,selected:s,selectedSecondary:(null==N?void 0:N.folderNames.has(e.name))||!1,isCollapsed:A.has(e.name),temporarilyExpandFolder:ei,isTemporarilyExpanded:E,isRenaming:l,folderNameToNestUnder:r,onRenameItem:i,stopRenamingItem:J,level:e.level,toggleFolder:e=>Z(t,e),onContextMenu:j,onCreateFolder:Q,onMouseDown:c,onMouseMove:p,isEditable:f,deleteSelectedItems:et,hideStylePreview:Y,isFirstChildOfSelection:y})}},[_,eh,A,et,null==W?void 0:W.folderNameToNestUnder,X,Y,j,Q,d,i,a,r,null==N?void 0:N.folderNames,null==N?void 0:N.styleIds,J,l,T,ei,L,Z,h,f,ep]),eE=n.useCallback(t=>{let n=new Set,r=new Set;t.forEach(e=>{let t=l[e];"STYLE_FOLDER"===t.type?n.add(t.name):r.add(t.node_id)}),_({type:e,folderNames:n,styleIds:r})},[_,l,e]),eg=n.useRef(),ey=n.useRef();return n.useEffect(()=>{eg.current&&eu.length?(eg.current(),ed.current&&!ed.current.contains(document.activeElement)&&ed.current.focus()):ey.current&&!eu.length&&(ey.current(),ed.current=null)},[eg,eu,ed]),n.createElement(tH.vL,{name:"StyleDraggableList",handleClipboard:er,focusFunctionRef:eg,blurFunctionRef:ey},n.createElement(aB,{styleType:e},n.createElement(a9,{recordingKey:"style-draggable-list",listItems:l,onInsertItemsIn:z,canInsertItemsIn:H,onInsertItemsBetweenValues:$,onDrag:q,onDragStart:es,onDragEnd:eo,insertDividerStyle:null==W?void 0:W.dividerStyles,selectedIndices:eu,updateSelection:eE,renderListItem:e_,scrollContainer:g,isDragDisabled:!f}),n.createElement(az,{styleRowRef:E,onDeleteItems:et,onCutItems:en,onPasteItems:ea,onRenameItem:i,onEditStyle:d,onCreateFolder:Q,styleType:e})))}class a9 extends rZ.q{}var ie=l(635736);function it(e){var t,l,n;return(null==(t=e.modalShown)?void 0:t.type)===ie.y.type||(null==(n=null==(l=e.modalShown)?void 0:l.prevModal)?void 0:n.type)===ie.y.type}function il(){let e=(0,ie.m)(),t=(0,n.useCallback)(()=>{e()},[e]),l=(0,ee.d4)(it),r=0===(0,tN.Rb)().length&&!l;return n.createElement(tw.p,{name:"local_variables_panel"},n.createElement(eg.Zk,null,n.createElement(eg.fI,{className:r?"local_variables_panel--localVariablesPanelRowFaded--atToe local_variables_panel--localVariablesPanelRow--zR8nJ draggable_list--panelHeaderRowFaded--kETRR":"local_variables_panel--localVariablesPanelRow--zR8nJ"},n.createElement(eg.xw,{className:"local_variables_panel--titleText--7rdD7 draggable_list--panelTitleText--SwKez",onClick:t,"data-onboarding-key":"local-variables-panel-title"},n.createElement(P.Tx,{id:"variables.local_variables_panel.local_variables_title"})),n.createElement(tT.E,{name:"variables_modal_button"},(0,o.kc)().fpl_variables_button_migration?n.createElement(r$.d,{onClick:t,recordingKey:(0,m.Pt)("localVariablesPanel","variablesModalButton"),toggled:l,"aria-label":(0,P.t)("variables.local_variables_panel.open_variables_button_tooltip"),"data-tooltip":(0,P.t)("variables.local_variables_panel.open_variables_button_tooltip"),"data-tooltip-type":ed.Ib.TEXT},n.createElement(ei.U,{svg:aV.A},n.createElement(tf.A,null))):n.createElement(eI.YW,{className:"local_variables_panel--openAuthoringModalButton--FiNXt draggable_list--addButton--D0q--",selected:l,recordingKey:(0,m.Pt)("localVariablesPanel","variablesModalButton"),"data-tooltip":(0,P.t)("variables.local_variables_panel.open_variables_button_tooltip"),"data-tooltip-type":ed.Ib.TEXT,onClick:t},n.createElement(ei.U,{svg:aV.A},n.createElement(tf.A,null)))))))}var ir=l(871642),ia=l(390487),ii=l(37819),is=l(57392),io=l(715762),ic=l(507662),id=l(664241),ip=l(258376);function iu({recordingKey:e}){let t=(0,c.md)(is.I7);return(0,rb.Tt)()&&!(0,o.kc)().ds_variables_relax_modes&&t?n.createElement(ih,{recordingKey:e}):null}let im="VARIABLES_INCOMPATIBLE_MODES_UPDATE_DROPDOWN";function ih({recordingKey:e}){let t=(0,ee.wA)(),l=(0,tA.U)(),r=n.useRef(null),a=l&&l.type===im,i=n.useCallback(()=>{r.current&&t(es.j7({type:im,data:{targetRect:r.current.getBoundingClientRect()}}))},[t]),s=n.useCallback(()=>{t(eo.to({type:ic.T,data:{initialTab:aT.Wv.UPDATES,entrypoint:io.r6.VARIABLE_MODES_ACCEPT_UPDATES_DROPDOWN_OPTION}}))},[t]);return n.createElement(n.Fragment,null,n.createElement("div",{ref:r},n.createElement(eI.YW,{recordingKey:m.Pt(e,"updateIcon"),selected:!!a,svg:ip.A,className:id.l_,dataTestId:"updatesModesButton","data-tooltip-type":ed.Ib.TEXT,"data-tooltip":(0,P.t)("variables.layer_panel.header.update_button_direct.tooltip"),onMouseDown:e=>e.stopPropagation(),onClick:i})),a&&(r.current?n.createElement(em.Cf,{targetRect:r.current.getBoundingClientRect(),maxWidth:226,disableDropdownScrollContainer:!0,propagateCloseClick:!0},n.createElement(n.Fragment,null,n.createElement(ea.W.Option,{className:id.Ig,recordingKey:m.Pt(e,"description"),key:"description",disabled:!0},(0,P.t)("variables.layer_panel.header.update_button.dropdown.description")),n.createElement(ea.W.Separator,null),n.createElement(ea.W.Option,{onClick:s,recordingKey:m.Pt(e,"review-update"),key:"review_update"},(0,P.t)("variables.layer_panel.header.update_button_direct.dropdown.option")))):null))}var i_=l(75215),iE=l(251518),ig=l(205135),iy=l(129978),iv=l(781867);class ib extends n.PureComponent{constructor(e){super(e),this.chitRowRef=n.createRef(),this.colorFormatter=tI.TI,this.onColorChange=(e,t)=>{let l=e.a;e.a=1,F.Y5.updateSelectionProperties({backgroundColor:e,backgroundOpacity:l,backgroundEnabled:!0},{shouldCommit:t})},this.onColorChangeWithoutAlpha=(e,t)=>{F.Y5.updateSelectionProperties({backgroundColor:e,backgroundEnabled:!0},{shouldCommit:t})},this.onOpacityChange=(e,t)=>{F.Y5.updateSelectionProperties({backgroundOpacity:e,backgroundEnabled:0!==e},{shouldCommit:t})},this.onBackgroundEnabledChange=e=>F.Y5.updateSelectionProperties({backgroundEnabled:e}),this.onExportBackgroundDisabledChange=e=>{F.Y5.updateSelectionProperties({exportBackgroundDisabled:!e})},this.toggleColorPicker=()=>{if(this.props.pickerShown&&this.props.pickerShown.id===x.k8)this.props.dispatch(k.XE());else{(0,o.kc)().ce_properties_panel_tracking&&(0,rA.sx)("editor-background-panel-color-picker-show");let e=this.chitRowRef.current?(0,ep.cn)(this.chitRowRef.current):{x:0,y:0};this.props.dispatch(k.u1({id:x.k8,initialX:e.x,initialY:e.y})),this.props.dispatch(C.sw())}},this.mergeColorAndOpacity=(0,ag.xx)(e=>{let t=(0,H.E7)(e.backgroundColor),l=(0,H.E7)(e.backgroundOpacity);return null!=t&&null!=l?{...t,a:l}:e.backgroundColor||H.oV})}get opacity(){return(0,H.hS)(this.props.backgroundOpacity)&&"number"==typeof this.props.backgroundOpacity&&isNaN(this.props.backgroundOpacity)?0:this.props.backgroundOpacity}renderInputWithChit(){return n.createElement("div",{className:"background_panel--colorValueContainer---lsls paint_panels--colorValueContainer--DGeSP raw_components--borderFocusWithin--BaipZ paint_panels--_baseColorValueContainer--t-UIV raw_components--base--T7G0z raw_components--singleRowHeight--dKM4t"},n.createElement(lN.J,{color:this.mergeColorAndOpacity(this.props),opacity:this.opacity,onMouseDown:this.toggleColorPicker,recordingKey:m.Pt(this.props,"colorChit"),className:"background_panel--chit--EQGLT paint_panels--chit--twQEy"}),n.createElement(ig.AN,{className:this.props.backgroundEnabled?"background_panel--color--sBAtd paint_panels--colorInput--nSz13":"background_panel--colorHidden--CEpXN paint_panels--colorInputHidden--ZojfD paint_panels--colorInput--nSz13",formatter:this.colorFormatter,property:this.props.backgroundColor,onChange:this.onColorChangeWithoutAlpha,recordingKey:m.Pt(this.props,"color"),noBorderOnFocus:!0}),n.createElement(lS.Pd,{className:"background_panel--opacity--nwSdu paint_panels--opacityInputContainer--oqlsk",inputClassName:this.props.backgroundEnabled?void 0:"background_panel--opacityInputHidden--2-b0t paint_panels--opacityInputHidden--I2GEk",value:this.opacity,onValueChange:this.onOpacityChange,dispatch:this.props.dispatch,noBorderOnFocus:!0,recordingKey:m.Pt(this.props,"opacity")}))}renderVisibilityToggleButton(){return n.createElement("span",{className:"background_panel--visible--2-4Ns"},n.createElement(iv.B,{visible:this.props.backgroundEnabled,onChange:this.onBackgroundEnabledChange,recordingKey:m.Pt(this.props,"visibleToggle")}))}renderSimpleBackground(){return n.createElement("div",null,n.createElement(eg.fI,{className:"background_panel--panelTitleRow--uNINf"},n.createElement(eg.xw,null,n.createElement(P.Tx,{id:"fullscreen.properties_panel.page"})),n.createElement(iu,{recordingKey:"pageLevel"}),n.createElement(ii.M,{showLibrarySets:!0,recordingKey:"pageLevel"})),"ui2"===this.props.theme.version?this.renderUI2ColorInput():this.renderUI3ColorInput())}renderUI3ColorInput(){return n.createElement(ev.DE,{ref:this.chitRowRef,label:null,input:this.renderInputWithChit(),icon:this.renderVisibilityToggleButton()})}renderUI2ColorInput(){return n.createElement(n.Fragment,null,n.createElement(eg.fI,{forwardedRef:this.chitRowRef},this.renderInputWithChit(),this.renderVisibilityToggleButton()))}render(){var e;return n.createElement(tw.p,{name:"background_panel"},n.createElement(eg.Zk,null,this.renderSimpleBackground(),this.props.hasExports&&n.createElement(eg.fI,{className:"background_panel--checkboxLabelRow--r-hmK"},n.createElement(i_.t,{className:"background_panel--checkbox--6U3j-",id:"export-background-disabled",property:this.props.exportBackgroundDisabled===H.oV?H.oV:!this.props.exportBackgroundDisabled,onChange:this.onExportBackgroundDisabledChange,recordingKey:m.Pt(this.props,"exportDisableCheckbox")}),n.createElement(eg.JU,{className:"background_panel--checkboxLabel--ITthj",htmlFor:"export-background-disabled","data-tooltip-type":ed.Ib.TEXT,"data-tooltip":(0,P.t)("fullscreen.properties_panel.include_the_canvas_or_group_background_in_exports")},n.createElement(P.Tx,{id:"fullscreen.properties_panel.show_in_exports"}))),(null==(e=this.props.pickerShown)?void 0:e.id)===x.k8&&n.createElement(iE.sk,{disabledVariableIds:new Set,title:(0,P.t)("fullscreen.properties_panel.background"),initialPosition:new y.Mi(this.props.pickerShown.initialX,this.props.pickerShown.initialY),color:(0,H.hS)(this.mergeColorAndOpacity(this.props))?(0,H.E7)(this.mergeColorAndOpacity(this.props)):{r:1,g:1,b:1,a:1},boundVariable:null,onChange:this.onColorChange,recordingKey:m.Pt(this.props,"colorPicker")}),n.createElement(iy.wu,{showExplicitOnly:!0,recordingKey:"backgroundPanel-variableModeEntries"})))}}ib.displayName="BackgroundPanel";let iS=(0,er.SL)(ib);var iT=l(33136),iw=l(553609);function iP(e){let t=(0,iT.t)();return e.readOnly?n.createElement(iw.l,{...e}):t.nodesAreAllInsideStacks&&"AUTO"===t.stackPositioning?null:n.createElement(eg.Zk,null,n.createElement(eg.fI,null,n.createElement(eg.xw,{extended:!0},n.createElement(P.Tx,{id:"fullscreen.properties_panel.constraints_panel.constraints"}))),n.createElement(iw.l,{...e}))}function ik(e){return n.createElement(tw.p,{name:"constraints_panel"},n.createElement(iP,{...e}))}var iI=l(233711),iC=l(924491),iN=l(511617),iA=l(733169),ix=l(132135),iL=l(321487),iM=l(167807),iO=l(428467);function iR(e){let t=(0,n_.q5)(),l=(0,iO.usePermissionsState)(),r=(0,$.IW)(e.stylePreviewShown),a=(0,iM.$Q)(null==r?void 0:r.file_key).data;if(!r||!a)return null;let i=(0,ix.to)(a);return i=(0,iN.dR)(i,{"node-id":encodeURIComponent((0,iL.E)(r.node_id))}),n.createElement(tw.p,{name:"external_style_options"},n.createElement(eg.Zk,{key:"external-style-options"},(0,iA.J)({openFile:t,permissionsState:l,user:e.user,sourceLibraryFile:a})&&n.createElement(eg.fI,null,n.createElement(tl.N_,{className:ts.lf,href:i,target:"_blank",trusted:!0},n.createElement(P.Tx,{id:"fullscreen.properties_panel.go_to_style_definition_to_edit"})))))}var iD=l(975126),iF=l(503359),iV=l(668e3),iK=l(613023),iB=l(841368),iU=l(877953),iH=l(499777),iG=l(335691),iY=l(567488),iW=l(494057),i$=l(224690),iz=l(760066),iX=l(290022),iQ=l(493424),iZ=l(468570),iJ=l(414879),ij=l(559568),iq=l(737834),i0=l(77763),i1=l(861726),i5=l(416580),i4=l(113058),i6=l(301462),i3=l(878319),i2=l(219101),i8=l(282263),i7=l(952277),i9=l(161115);let se=new lt.SU;class st extends lr.c${}class sl extends lr.l6{}class sn extends n.PureComponent{render(){var e;let t=this.props.includePassThrough?i9.j4:i9.r5;return n.createElement(sl,{id:(e=this.props.id,`blend-mode-select-${e}`),className:this.props.className,inputClassName:this.props.inputClassName,chevronClassName:this.props.chevronClassName,property:this.props.property,formatter:se,onChange:this.props.onChange,onMouseDown:this.props.onMouseDown,willShowDropdown:this.props.willShowDropdown,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,recordingKey:this.props.recordingKey,dropdownWidth:this.props.isUI3?120:"auto",svg:this.props.isUI3?void 0:(0,i9.HC)((0,H.E7)(this.props.property)),enablePreview:!0},t.map((e,t)=>"SELECT_DIVIDER"===e?n.createElement(lr.sK,{key:t}):n.createElement(st,{key:t,value:e,recordingKey:m.Pt(this.props,e)})))}}sn.displayName="BlendMode";var sr=l(697652),sa=l(83695),si=l(731262),ss=l(82131),so=l(490393),sc=l(435091),sd=l(424148),sp=l(144919);function su(e){let{blendMode:t,opacity:l,visible:r}=e,a="ui3"===(0,er.DP)().version,s=n.useRef(null),c=n.useMemo(i$.On,[]),d=n.useMemo(i$.Tn,[]),{dropdownShown:p,isDefReferencedBySelection:u,selectedGUIDs:h,visibilityIsBoundToComponentProp:_}=(0,rc.R)(e=>({dropdownShown:e.dropdownShown,isDefReferencedBySelection:!!c(e,iG.R.VISIBLE),selectedGUIDs:(0,nU.qd)(e),visibilityIsBoundToComponentProp:d(e,(0,nU.qd)(e),iG.R.VISIBLE)})),E=(0,H.gl)(r),g=(0,ee.wA)(),y=n.useCallback((e,t=tU.zk.YES)=>{rM.wt.shouldReportForShouldCommit(t)&&i6.FZ.trackFromFullscreen("editor-blend-mode-change",{blendMode:e}),F.Y5.updateSelectionProperties({blendMode:e,visible:!0},{shouldCommit:t})},[]),v=n.useCallback((e,t)=>{F.Y5.updateSelectionProperties({opacity:e},{shouldCommit:t}),e>0&&!u&&F.Y5.updateSelectionProperties({visible:!0},{shouldCommit:t})},[u]),b=n.useRef(null),[,f]=sh(),{clearVariableConsumption:S}=(0,rb.u3)(["VISIBLE"]),{variableConsumptionMap:T}=(0,rb.R1)(),w=s_(),k=(0,tN.u)(w),I=null==k?void 0:k.name,C=sm();return n.createElement(tw.p,{name:"layer_panel"},n.createElement(eg.Zk,null,n.createElement(eg.fI,{className:ss.LO},n.createElement(sr.Tu,{isPanelBodyCollapsedAtom:null},n.createElement(eg.xw,{isPanelBodyCollapsedAtom:null},n.createElement(P.Tx,{id:"fullscreen.layer_panel.layer"})),n.createElement(iu,{recordingKey:"frameLevel"}),!C&&n.createElement(iY.yQ,{nodeField:iG.R.VISIBLE,defaultValue:r,guids:h}),n.createElement(ii.M,{showLibrarySets:!1,recordingKey:"frameLevel"}))),n.createElement(sr.JH,{isPanelBodyCollapsedAtom:null},n.createElement(eg.fI,null,n.createElement(sn,{id:"layer-blend-mode",className:sc.jK,inputClassName:sc.Df,chevronClassName:sc.ai,property:t,dispatch:g,dropdownShown:p,onChange:y,willShowDropdown:()=>((0,rA.sx)("editor-blend-mode-dropdown-show"),Promise.resolve()),includePassThrough:!0,recordingKey:m.Pt(e,"blendMode"),isUI3:a}),n.createElement(i2.e,{condition:!0,wrapper:t=>n.createElement(iz.sA,{recordingKey:m.Pt(e,"layerOpacityInputWrapper"),fields:["OPACITY"],disabled:!1,resolvedType:V.rXF.FLOAT,currentFieldValue:(0,H.hS)(l)?l:void 0,inputClassName:i()({[sc.ke]:!0,[sc.TQ]:!0}),hideIcon:!0,inputRef:s,hasBindingContextMenu:!0},t)},n.createElement(lS.Pd,{isTokenizable:!0,value:l,onValueChange:v,mixedMathHandler:sg,dispatch:g,recordingKey:m.Pt(e,"opacity"),forwardedRef:s,noBorderOnHover:!0})),n.createElement(sv,{recordingKey:e.recordingKey})),E&&!u&&n.createElement(eg.fI,{dataTestId:"mixed-visibility-label"},n.createElement(eg.UZ,{className:so.Pf},n.createElement(P.Tx,{id:"fullscreen.layer_panel.replace_mixed_visibility",svg:n.createElement("div",{className:sc.dY},n.createElement(ei.U,{svg:sp.A},n.createElement(i1.l,null)))}))),n.createElement("div",{className:sc.I0},n.createElement(iW.L,{nodeField:iG.R.VISIBLE,currentValue:e.visible})),(0,o.kc)().prototype_expressions_nodefields?T.VISIBLE&&n.createElement(rx.Y,{direction:"horizontal",spacing:"auto",verticalAlignItems:"center",horizontalAlignItems:"space-between",padding:{top:0,left:16,bottom:0,right:8}},n.createElement(sa.y3,{targetVariableData:T.VISIBLE.isMixed?void 0:T.VISIBLE,onClick:()=>{f(b.current)},isNarrowPanel:!0,isInCell:!1,showVariableThumbnails:!0,isInConditional:!1,isMixed:T.VISIBLE.isMixed}),n.createElement(eb.K,{onClick:()=>S(),"aria-label":(0,P.t)("variables.binding_ui.detach_variable_tooltip"),"data-tooltip":(0,P.t)("variables.binding_ui.detach_variable_tooltip"),"data-tooltip-type":ed.Ib.TEXT,recordingKey:"detachVisibilityVariable"},n.createElement(ei.U,{svg:sd.A},n.createElement(i5.U,null)))):C&&!_&&n.createElement(rx.Y,{direction:"horizontal",spacing:"auto",verticalAlignItems:"center",horizontalAlignItems:"space-between",padding:{top:0,left:16,bottom:0,right:8}},n.createElement(i7.P,{value:I||(0,P.t)("fullscreen.mixed"),isStandalone:!0,styleOverride:{width:"auto"},isDeleted:!!k&&(0,rf.eF)(k)}),n.createElement(eb.K,{onClick:()=>S(),"aria-label":(0,P.t)("variables.binding_ui.detach_variable_tooltip"),"data-tooltip":(0,P.t)("variables.binding_ui.detach_variable_tooltip"),"data-tooltip-type":ed.Ib.TEXT,recordingKey:"detachVisibilityVariable"},n.createElement(ei.U,{svg:sd.A},n.createElement(i5.U,null)))),n.createElement(iy.wu,{showExplicitOnly:!0,recordingKey:"layerPanel-variableModeEntries"}))))}function sm(){let{consumedVariable:e}=(0,rb.u3)(["VISIBLE"]),t=s_(),l=(0,tN.u)(t);return!!e&&!!l}let sh=()=>(0,i8.JV)(["VISIBLE"],V.rXF.BOOLEAN,void 0,{requestedTypes:[V.rXF.BOOLEAN,V.rXF.FLOAT,V.rXF.STRING],variableFilters:{[i3.t.MUST_INCLUDE_ONE_OF]:{[V.rXF.STRING]:si.O4},[i3.t.HIDE_IN_DEFAULT_VIEW]:{[V.rXF.FLOAT]:!0}},mapVariableIdToTypedValue:i8.eT});function s_(){let e;let{consumedVariable:t}=(0,rb.u3)(["VISIBLE"]);if(t){if((0,H.hS)(t)&&t.type===V.Z_n.ALIAS)e=t.value;else if((0,H.hS)(t)&&t.type===V.Z_n.EXPRESSION){for(let l of(0,rf.Pr)(t))if(l.type===V.Z_n.ALIAS){e=l.value;break}}}return e}class sE extends i4.M{getValueForNode(e){return e.opacity}setValueForNode(e,t){ek.l7.user("set-opacity",()=>{rM.wt.reportAnyPropertyChange(["opacity"]),e.opacity=t})}}let sg=new sE,sy=(0,i$.Tn)();function sv(e){let t=n.useCallback(e=>{F.Y5.updateSelectionProperties({visible:e})},[]),l=n.useMemo(i$.On,[]),{isDefReferencedBySelection:r,visibilityIsBoundToComponentProp:a}=(0,rc.R)(e=>({isDefReferencedBySelection:!!l(e,iG.R.VISIBLE),visibilityIsBoundToComponentProp:sy(e,(0,nU.qd)(e),iG.R.VISIBLE)})),i=(0,tN.SG)(["VISIBLE"]).data??[],[s]=(0,tK.lJ)("visible"),{consumedVariable:o}=(0,rb.u3)(["VISIBLE"]),c=n.useRef(null),[d,p]=sh(),u=s_(),h=(0,tN.u)(u),_=!!o&&!!h,E=_||a||r,g=!_&&!a&&i.length>0,y=s?(0,P.t)("fullscreen.properties_panel.tooltip_hide"):(0,P.t)("fullscreen.properties_panel.tooltip_show"),v=n.createElement("span",{className:sc.RK},n.createElement(iv.B,{disabled:E,visible:s,onChange:t,recordingKey:m.Pt(e,"visibleToggle")})),b=(0,eC.R)();return n.createElement("div",{className:sc.RK},n.createElement(iz.JQ,{ref:c,currentFieldValue:!!(0,H.gl)(s)||s,isActive:d,disabled:!g,onPickerOpen:()=>p(c.current),recordingKey:m.Pt(e,"visibilityVariableControl"),dataTestId:"visibility-variable-control"},b?n.createElement(eI.YW,{selected:!E&&!s,disabled:E,onClick:()=>t(s===H.oV||!s),recordingKey:m.Pt(e,"visibleToggle"),dataTestId:"visibility-variable-control","data-tooltip":y,"data-tooltip-type":ed.Ib.TEXT},s?n.createElement(iq._,null):n.createElement(i0.j,null)):v))}function sb(){let{consumedVariable:e,clearVariableConsumption:t}=(0,rb.u3)(["VISIBLE"]),l=s_(),r=(0,tN.u)(l),a=null==r?void 0:r.name,i=!!e&&!!r,s=n.useMemo(i$.Tn,[]),o=(0,tN.BQ)(l),c=(0,rc.R)(e=>s(e,(0,nU.qd)(e),iG.R.VISIBLE));return!i||c?null:n.createElement(ev.DE,{appendedClassName:"component_bound_vibisility_row--row--Pss97",input:n.createElement(i7.P,{value:a||(0,P.t)("fullscreen.mixed"),isStandalone:!0,classNameOverride:"component_bound_vibisility_row--pillCover--q5iKl",styleOverride:{width:"auto"},isDeleted:!!r&&(0,rf.eF)(r),fullWidth:!0,varaiablePillContainerClassName:"component_bound_vibisility_row--ui3RowVariablePillContainer--ocnP8",thumbnailValue:"MIXED"!==o?o:void 0}),icon:n.createElement("div",{className:"component_bound_vibisility_row--detachVisibilityIcon--FcjEN"},n.createElement(eb.K,{onClick:()=>t(),"aria-label":(0,P.t)("variables.binding_ui.detach_variable_tooltip"),"data-tooltip-type":ed.Ib.TEXT,recordingKey:"detachVisibilityVariable"},n.createElement(i5.U,null))),label:null})}var sf=l(824374);let sS=new lt.SU;class sT extends lr.c${}class sw extends lr.l6{renderInput(){return n.createElement(eb.K,{recordingKey:(0,m.Pt)(this.props.recordingKey,"blendMode"),"aria-label":(0,P.t)("properties.dropdown.apply_blend_mode"),onClick:this.onMouseDown,actionOnPointerDown:!0,"data-tooltip-type":ed.Ib.TEXT,"data-tooltip":(0,P.t)("properties.dropdown.apply_blend_mode")},n.createElement(sf.M,{value:this.props.property,normalIsActive:!0}))}}function sP(e){let[t,l]=(0,i9.sL)(),r=(0,ee.wA)(),a=(0,tA.U)(),i=i9.j4.map((t,l)=>"SELECT_DIVIDER"===t?n.createElement(lr.sK,{key:l}):n.createElement(sT,{key:l,value:t,recordingKey:m.Pt(e,"blendMode",t)}));return n.createElement(sw,{id:"layer-blend-mode-select",className:"selection_blend_mode_icon_button--container--Wv9Hd",dropdownClassName:"selection_blend_mode_icon_button--blendModeSelectDropdown--WcwN1 blend_mode_select--blendModeSelectDropdown--jlg6p",property:t,onChange:l,formatter:sS,dispatch:r,dropdownShown:a,onMouseDown:M.dG,minTop:6,recordingKey:m.Pt(e,"blendMode"),enablePreview:!0,dropdownAlignment:"right",willShowDropdown:()=>((0,rA.sx)("editor-blend-mode-dropdown-show"),Promise.resolve())},i)}var sk=l(866577);function sI(e){let t=(0,lQ.Df)(),l=(0,iU.C)("fpl_dialog_trigger"),r=(0,lQ.Jo)(),a=(0,iH.k)("corner-smoothing"),[i]=(0,tK.lJ)("rectangleCornerRadiiIndependent"),s=(0,tK.kl)("visible"),c=!r.rectangleCornerRadii,d=t.cornerRadius,[p,u]=n.useState(null),[h]=(0,tK.lJ)("opacity"),_=t.rectangleCornerRadii,E=t.rectangleCornerRadii&&!!p,g=!r.cornerRadius,y=g||c,v=(0,n.useRef)(null),b=n.useRef(null),f=sm(),S=n.useMemo(i$.On,[]),{isDefReferencedBySelection:T,selectedGUIDs:w}=(0,rc.R)(e=>({isDefReferencedBySelection:!!S(e,iG.R.VISIBLE),selectedGUIDs:(0,nU.qd)(e)})),k=n.useCallback((e,t)=>{F.Y5.updateSelectionProperties({opacity:e},{shouldCommit:t}),e>0&&!T&&F.Y5.updateSelectionProperties({visible:!0},{shouldCommit:t})},[T]),I=(0,n.useCallback)(()=>{a.hide(),F.Y5.deselectProperty()},[a]),C=(0,ee.wA)(),N=n.useCallback(()=>{(0,o.kc)().ce_properties_panel_tracking&&(0,rA.sx)("editor-transform-panel-change",{key:"rectangleCornerRadiiIndependent",value:!(0,H._W)(i,!1)}),!E&&v.current?u((0,ep.cn)(v.current,parseInt(sk.Je,10))):u(null)},[i,E]);return n.useEffect(()=>{u(null)},[w]),n.createElement(eg.Zk,null,n.createElement(li.Wv,{titleTx:n.createElement(P.Tx,{id:"fullscreen.appearance_panel.appearance"})},!f&&n.createElement(iY.yQ,{nodeField:iG.R.VISIBLE,defaultValue:s,guids:w}),n.createElement(iu,{recordingKey:"frameLevel"}),n.createElement(ii.M,{showLibrarySets:!1,recordingKey:"frameLevel"}),n.createElement(sv,{recordingKey:e.recordingKey}),n.createElement(sP,{recordingKey:e.recordingKey})),n.createElement(ev.fn,{ref:v,leftInput:n.createElement(iz.sA,{recordingKey:m.Pt(e,"layerOpacityInputWrapper"),fields:["OPACITY"],disabled:!1,resolvedType:V.rXF.FLOAT,currentFieldValue:(0,H.hS)(h)?h:void 0,inputRef:b,hasBindingContextMenu:!0},n.createElement(lS.Pd,{inputClassName:"appearance_panel--input--h3br5 raw_components--flushLeft--YH-5P",ui3RightJustifyPercentSign:!1,noBorderOnHover:!0,isTokenizable:!0,value:h,onValueChange:k,mixedMathHandler:sC,dispatch:C,recordingKey:m.Pt(e,"opacity"),forwardedRef:b},n.createElement("div",{className:"appearance_panel--opacityIconContainer---kdX-"},n.createElement(iV.N,null)))),rightInput:n.createElement(iQ.C,{recordingKey:e.recordingKey,disabled:!d||E||g}),icon:d?_?n.createElement(tT.E,{name:"independent_corner_radius_toggle"},l?n.createElement(r$.d,{actionOnPointerDown:!0,toggled:E,onClick:N,"aria-label":(0,P.t)("fullscreen.properties_panel.transform_panel.independent_corners"),disabled:y,recordingKey:m.Pt(e,"rectangleCornerToolIndependentToggle")},n.createElement(iK.Q,null)):n.createElement(eg.YW,{selected:E,onClick:N,"data-tooltip-type":ed.Ib.TEXT,"data-tooltip":(0,P.t)("fullscreen.properties_panel.transform_panel.independent_corners"),recordingKey:m.Pt(e,"rectangleCornerToolIndependentToggle"),disabled:y},n.createElement(iK.Q,null))):n.createElement(eg.YW,{onMouseDown:e=>(0,iX._)(a,v,e),recordingKey:m.Pt(e,"cornerSmoothingToggle"),"data-tooltip-type":ed.Ib.TEXT,"data-tooltip":(0,P.t)("fullscreen.properties_panel.transform_panel.corner_smoothing"),selected:a.showing,disabled:g},n.createElement(iB.J,null)):null,leftLabel:n.createElement(P.Tx,{id:"fullscreen.properties_panel.section_appearance.label_opacity"}),rightLabel:d?n.createElement(P.Tx,{id:"fullscreen.properties_panel.transform_panel.corner_radius"}):null}),(t.count||t.starInnerScale)&&n.createElement(ij.cU,{countShown:t.count,countDisabled:!r.count,starInnerScaleShown:t.starInnerScale,starInnerScaleDisabled:!r.starInnerScale,recordingKey:e.recordingKey}),t.arcData&&n.createElement(ij.Je,{arcDataDisabled:!r.arcData,recordingKey:e.recordingKey}),n.createElement(iW.L,{nodeField:iG.R.VISIBLE,currentValue:s}),n.createElement(iy.wu,{showExplicitOnly:!0,recordingKey:"layerPanel-variableModeEntries"}),n.createElement(sb,null),E&&p&&n.createElement(iJ.$,{initialPosition:p,onClose:N,recordingKey:m.Pt(e,"advanced")}),a.showing&&n.createElement(iZ.T,{initialPosition:a.initialPosition,onClose:I,recordingKey:m.Pt(e,"advanced")}))}let sC=new sE;var sN=l(89586);let sA="mask_panel--maskTypeDropdown--3Etsx";class sx extends lr.l6{}class sL extends lr.c${}class sM extends n.PureComponent{constructor(){super(...arguments),this.onMaskTypeChange=(e,t=tU.zk.YES)=>{F.Y5.updateSelectionProperties({maskType:e},{shouldCommit:t})},this.maskTypeFormatter={format:e=>{switch(e){case"ALPHA":return(0,P.t)("fullscreen.mask_panel.alpha");case"OUTLINE":return(0,P.t)("fullscreen.mask_panel.vector");case"LUMINANCE":return(0,P.t)("fullscreen.mask_panel.luminance")}},formatExtended:e=>{switch(e){case"ALPHA":return{text:(0,P.t)("fullscreen.mask_panel.alpha_extended")};case"OUTLINE":return{text:(0,P.t)("fullscreen.mask_panel.vector_extended")};case"LUMINANCE":return{text:(0,P.t)("fullscreen.mask_panel.luminance_extended")}}}},this.stopPropagation=e=>e.stopPropagation()}render(){let e=n.createElement(eg.fI,null,n.createElement(sx,{id:"mask-type-dropdown",className:sA,property:this.props.maskType,formatter:this.maskTypeFormatter,onChange:this.onMaskTypeChange,dispatch:this.props.dispatch,dropdownClassName:sA,dropdownShown:this.props.dropdownShown,onMouseDown:this.stopPropagation,recordingKey:m.Pt(this.props,"maskType"),enablePreview:!0},n.createElement(sL,{value:"ALPHA",recordingKey:m.Pt(this.props,"maskType","alpha")}),n.createElement(sL,{value:"OUTLINE",recordingKey:m.Pt(this.props,"maskType","outline")}),n.createElement(sL,{value:"LUMINANCE",recordingKey:m.Pt(this.props,"maskType","luminance")})));return n.createElement(tw.p,{name:"mask_panel"},n.createElement(eg.Zk,null,n.createElement(eg.fI,null,n.createElement(eg.xw,null,n.createElement(P.Tx,{id:"fullscreen.mask_panel.mask"}))),e))}}sM.displayName="MaskPanel";var sO=l(750693),sR=l(536825),sD=l(819785),sF=l(695038);function sV({addProperty:e,children:t,contentsVisibleOrMixed:l,minusDisabled:r,plusDisabled:a,recordingKey:i,removeProperty:s,showButton:o,title:c,dataTestId:d,shouldHideButton:p}){let{version:u}=(0,er.DP)(),h=(0,n.useCallback)(()=>{!1!==l||a||e()},[e,l,a]),_=l===H.oV,E=!_&&!l;null==o&&(o=!0===l?"-":"+");let g="+"===o?n.createElement(eb.K,{as:"button",recordingKey:m.Pt(i,"addButton"),onClick:e,onMouseDown:M.dG,disabled:a,"aria-label":(0,P.t)("fullscreen.properties_panel.add"),"data-testid":d??""},n.createElement(ei.U,{svg:e8.A,fallbackSvg:t4.A},n.createElement(en.e,null))):n.createElement(eb.K,{as:"button",recordingKey:m.Pt(i,"removeButton"),onClick:s,onMouseDown:M.dG,disabled:r,"aria-label":(0,P.t)("fullscreen.properties_panel.remove"),"data-testid":d??""},n.createElement(ei.U,{svg:sD.A,fallbackSvg:sF.A},n.createElement(sR.O,null)));return"ui3"===u?n.createElement(n.Fragment,null,c&&n.createElement(li.r,{onMouseDown:h,faded:E,titleTx:n.createElement("span",null,c),icon:p?void 0:g}),_&&n.createElement(eg.fI,null,n.createElement(eg.UZ,{className:so.Pf},n.createElement(P.Tx,{id:"fullscreen.properties_panel.click_plus_to_replace_mixed_content"}))),!_&&!E&&t):n.createElement(n.Fragment,null,c&&n.createElement(eg.fI,{onMouseDown:h,className:E?so.et:void 0,recordingKey:m.Pt(i,"panelTitle")},n.createElement(eg.xw,{faded:E,extended:!0},n.createElement("div",{className:so.yr},c)),n.createElement(eg.$4,null,p?null:g)),_&&n.createElement(eg.fI,null,n.createElement(eg.UZ,{className:so.Pf},n.createElement(P.Tx,{id:"fullscreen.properties_panel.click_plus_to_replace_mixed_content"}))),!_&&!E&&t)}class sK extends m.uA{constructor(){super(...arguments),this.noop=()=>{}}render(){return n.createElement(tw.p,{name:"remove_group_fill_and_stroke_panel"},n.createElement(eg.Zk,null,n.createElement(sV,{title:"Background",addProperty:this.noop,removeProperty:V.glU.clearFillAndStrokePaintsOnSelectedGroups,contentsVisibleOrMixed:!0},n.createElement(eg.fI,{className:"remove_group_fill_and_stroke_panel--labelContainer--ngqjq"},n.createElement(eg.UZ,{className:"remove_group_fill_and_stroke_panel--label--orOpK"},n.createElement(P.Tx,{id:"fullscreen.remove_group_fill_and_stroke.background_color_group_unsupported"}))))))}}var sB=l(456363),sU=l(161459),sH=l(832637),sG=l(529358),sY=l(376503),sW=l(362679),s$=l(13556),sz=l(306413);function sX(e){var t;let l="stroke-settings",[r,a]=(0,c.fp)(sB.GI),i=r.paints||[],s=(0,ee.wA)(),o=n.useContext(ta.zK),d=()=>null!=o,p=n.useRef(null),u=e=>{a({paints:e}),G.Tm.clearCache()},h=e=>{let{strokeWeight:t,dashPattern:l}=e,n=(0,H.E7)(t);n&&a({strokeWeight:n});let r=(0,H.E7)(l);r&&a({dashPattern:r})},_=e=>{let t=i.filter((t,l)=>!e.has(l));0===t.length&&(t=[i[0]]),u(t)},E=(e,{fromSearch:t}={})=>{s(rI.AV({style:e,inheritStyleKeyField:"inheritFillStyleKeyForStroke",fromSearch:t}))},{version:g}=(0,er.DP)(),y=!!r.styleId||i.length>0,v=(null==(t=e.pickerShown)?void 0:t.id)===l,b=!e.userFlags.dismissed_shift_to_draw_straight_lines_hint,f=n.createElement(sG.v9,{strokeWeight:r.strokeWeight||sU.qB,onChange:h,recordingKey:m.Pt(e,"weight")}),S=n.createElement(sY.qR,{className:"ui3"===g?void 0:"pencil_tool_panel--dashCap--OD1E2",dashCap:(0,sY.Hd)(r.strokeCap||"ROUND")||"ROUND",onChange:e=>{a({strokeCap:e})},recordingKey:m.Pt(e,"dashCap")}),T=n.createElement(eg.YW,{svg:sW.A,fallbackSvg:s$.A,className:"pencil_tool_panel--advancedStroke--1497y",onClick:()=>{var t;if((null==(t=e.pickerShown)?void 0:t.id)===l)s(k.XE());else{if(!p)return;let e=q.findDOMNode(p.current),t=(0,ep.cn)(e);s(k.u1({id:l,initialX:t.x,initialY:t.y}))}},onMouseDown:e=>e.stopPropagation(),selected:v,"data-tooltip-type":ed.Ib.TEXT,"data-tooltip":(0,P.t)("fullscreen.pencil_tool.advanced_stroke_settings"),recordingKey:m.Pt(e,"more")});return n.createElement("div",{className:"pencil_tool_panel--pencilPanelContainer--O-fFF"},n.createElement(eg.Zk,null,n.createElement(sO.W4,{title:(0,P.t)("fullscreen.pencil_tool.stroke"),propertyList:i,onChange:u,currentSelectedProperty:e.currentSelectedProperty,selectedPropertyType:V.rrT.STROKE_PRESET,styleType:"FILL",addProperty:()=>{F.Y5.triggerAction("add-stroke-to-selection")},onDeleteProperty:e=>_(e),onReorder:()=>{G.Tm.clearCache()},renderProperty:(t,l,r,a,o,c,p,u,h)=>{var y;let v=d()?"preview-paint":"paint",b=G.Tm.getId(l,V.rrT.STROKE_PRESET,v),f=i.slice(0,l).some(e=>e.visible);return n.createElement(sO.Gg,{key:`paint-${l}`,id:b,index:l,inheritStyleKeyField:"inheritFillStyleKeyForStroke",singletonRow:1===i.length,selectedPropertyType:V.rrT.STROKE_PRESET,paint:t,selected:e.stylePickerShown.isShown?(null==(y=e.pickerShown)?void 0:y.id)===b:r,isDragging:a,hasFocus:o,pickerInStyleCreationShown:e.pickerInStyleCreationShown,stylePickerShown:e.stylePickerShown,onChange:c,onApplyStyle:E,onMouseDown:p,onMouseMove:u,onMouseUp:h,onRemovePaint:i.length>1?()=>_(new Set([l])):void 0,hideVisibilityToggle:1===i.length,currentSelectedGradientStop:e.currentSelectedGradientStop,currentTool:V.NLJ.VECTOR_PENCIL,colorFormat:e.colorFormat,dispatch:s,dropdownShown:e.dropdownShown,pickerShown:e.pickerShown,editModeType:e.editModeType,defaultColor:G.Em,library:e.library,openFile:e.openFile,recordingKey:m.Pt(e,l),variableScopes:new Set([V.j0r.STROKE]),isUI3:"ui3"===g,hasVisiblePaintBelow:f})},recordingKey:e.recordingKey,sceneGraphSelection:e.sceneGraphSelection,library:e.library,modalShown:e.modalShown,openFile:e.openFile,inheritStyleKeyField:"inheritFillStyleKeyForStroke",inheritStyleKey:r.styleId||null,inheritStyleID:null,selectedStyleProperties:e.selectedStyleProperties,stylePickerListLayout:e.stylePickerListLayout,stylePickerShown:e.stylePickerShown,onToggleListLayout:()=>{s(k.Y({isListLayout:!e.stylePickerListLayout}))},removeAllProperties:null,onApplyStyle:E,defaultColor:G.rC}),y&&("ui3"===g?n.createElement(ev.fn,{ref:p,leftLabel:n.createElement(P.Tx,{id:"fullscreen.properties_panel.section_stroke.label_weight"}),leftInput:f,rightLabel:n.createElement(P.Tx,{id:"fullscreen.properties_panel.section_stroke.label_end_cap"}),rightInput:S,icon:T}):n.createElement(eg.fI,{ref:p},f,S,T))),b&&n.createElement("div",{className:"pencil_tool_panel--hintPanel--917wK"},n.createElement(sH.u,{title:(0,P.t)("fullscreen.pencil_tool.hold_shift_to_draw_straight_lines"),icon_DEPRECATED:sz.A,userFlag:"dismissed_shift_to_draw_straight_lines_hint",hintText:(0,P.t)("fullscreen.pencil_tool.now_vertical_horizontal_and_diagonal_lines_are_a_breeze")})),v&&e.pickerShown&&n.createElement(sY._2,{onChange:h,strokePanelMode:V.yTM.PENCIL,strokePanelTerminalPointCount:2,strokeCap:r.strokeCap||"ROUND",strokeJoin:"ROUND",maxStrokeWeight:r.strokeWeight||sU.qB,dashPattern:r.dashPattern,dropdownShown:e.dropdownShown,pickerShown:e.pickerShown,recordingKey:m.Pt(e,"advanced")}))}function sQ(e){let t=(0,K.Ku)(),l=(0,rc.R)(e=>{var t;return{currentSelectedGradientStop:e.mirror.appModel.currentSelectedGradientStop,library:e.library,dropdownShown:e.dropdownShown,modalShown:e.modalShown,pickerShown:e.pickerShown,pickerInStyleCreationShown:e.pickerInStyleCreationShown,stylePickerShown:e.stylePickerShown,colorPicker:e.colorPicker,styleSets:e.styleSets,openFileKey:(null==(t=e.openFile)?void 0:t.key)||null,reposById:e.repos,teams:e.teams,editModeType:e.mirror.appModel.activeCanvasEditModeType,currentTool:e.mirror.appModel.currentTool,sceneGraphSelection:e.mirror.sceneGraphSelection,currentSelectedProperty:e.mirror.appModel.currentSelectedProperty,inheritStyleKey:e.mirror.selectionProperties.inheritFillStyleKeyForStroke||null,selectedStyleProperties:e.mirror.selectedStyleProperties,stylePickerListLayout:e.stylePickerListLayout,userFlags:e.userFlags}});return n.createElement(sX,{...l,...e,colorFormat:t})}var sZ=l(438377),sJ=l(270296),sj=l(843495),sq=l(147723),s0=l(144119),s1=l(252828);function s5({label:e,tab:t,active:l,className:r,recordingKey:a,keyboardShortcut:i}){let s=(0,ee.d4)(e=>e.mirror.appModel.topLevelMode),o=(0,tB.dH)(),c=(0,eC.R)(),d=(0,tg.cJ)(),p=m.rf(a,"mousedown",()=>{if(!l){let e=s4(t,c,d).analyticsName;(0,rA.sx)("properties-panel-select-tab",{tab:e}),o===V.NLJ.SCALE&&t===V.FAf.PROTOTYPE&&F.Y5.triggerAction("set-tool-default"),(0,sj.NT)(t),s===V.lyf.PREVIEW&&(t===V.FAf.COMMENT?F.Y5.triggerAction("set-tool-comments"):F.Y5.triggerAction("set-tool-default"))}});return n.createElement("div",{className:r,onMouseDown:p,"data-label":e,...i?{"data-tooltip-type":ed.Ib.TEXT,"data-tooltip":e,"data-tooltip-shortcut-key":i}:void 0},e)}function s4(e,t,l){return({[V.FAf.DESIGN]:{label:(0,P.t)("fullscreen.properties_panel.design"),tab:V.FAf.DESIGN,className:ts.Mf,recordingKey:"designTab",analyticsName:"design"},[V.FAf.PROTOTYPE]:{label:l?(0,P.t)("fullscreen.properties_panel.interactions"):(0,P.t)("fullscreen.properties_panel.prototype"),tab:V.FAf.PROTOTYPE,className:ts.Mf,recordingKey:l?"interactionsTab":"prototypeTab",analyticsName:l?"interactions":"prototype"},[V.FAf.INSPECT]:{label:(0,P.t)("fullscreen.properties_panel.properties"),tab:V.FAf.INSPECT,className:ts.Mf,recordingKey:"inspectTab",analyticsName:"inspect"},[V.FAf.COMMENT]:{label:t?(0,P.t)("fullscreen.properties_panel.comments"):(0,P.t)("fullscreen.properties_panel.comment"),tab:V.FAf.COMMENT,className:ts.Mf,recordingKey:"commentTab",analyticsName:"comment"},[V.FAf.EXPORT]:{label:(0,P.t)("fullscreen.properties_panel.export"),tab:V.FAf.EXPORT,className:ts.Mf,recordingKey:"exportTab",analyticsName:"export"},[V.FAf.SLIDE]:{label:(0,P.t)("fullscreen.properties_panel.design"),tab:V.FAf.SLIDE,className:ts.Mf,recordingKey:"designTab",analyticsName:"design"},[V.FAf.SLIDE_ANIMATION]:{label:(0,P.t)("slides.properties_panel.animate"),tab:V.FAf.SLIDE_ANIMATION,className:ts.Mf,recordingKey:"animateTab",analyticsName:"animate"},[V.FAf.SITE]:{label:(0,P.t)("fullscreen.properties_panel.design"),tab:V.FAf.SITE,className:ts.Mf,recordingKey:"sitesTab",analyticsName:"sites"}})[e]}function s6({activeTab:e,isUI3:t,shouldShowAlignControls:l,shouldRenderInspectTab:r,recordingKey:a}){let i=(0,ee.d4)(e=>e.mirror.appModel.topLevelMode),s=(0,tB.dH)(),o=(0,tB.p8)("isReadOnly"),c=(0,tc.ks)(),d=o&&!c,p=(0,s0.sO)(),u=(0,tg.cJ)(),m=(()=>{let l=t?p?[V.FAf.COMMENT]:[V.FAf.COMMENT,V.FAf.INSPECT]:[V.FAf.COMMENT,V.FAf.INSPECT,V.FAf.EXPORT];switch(i){case V.lyf.LAYOUT:if(d)return l;if(e===V.FAf.COMMENT)return[V.FAf.COMMENT];if(u)return[V.FAf.SITE,V.FAf.PROTOTYPE];if(p)return[V.FAf.SLIDE,V.FAf.SLIDE_ANIMATION];return r?[V.FAf.DESIGN,V.FAf.PROTOTYPE,V.FAf.INSPECT]:[V.FAf.DESIGN,V.FAf.PROTOTYPE];case V.lyf.PREVIEW:case V.lyf.DEV_HANDOFF:return l;case V.lyf.BRANCHING:return[V.FAf.INSPECT];default:return[V.FAf.DESIGN,V.FAf.PROTOTYPE,V.FAf.INSPECT]}})(),h=m.find(t=>t===e),_=m.map((l,n)=>{let r=s4(l,t,u),a=r.tab===e||0===n&&void 0===h,o=r.className;return a&&(o=m.length>1?ts.yR:ts.iV),{...r,className:o,active:a,topLevelMode:i,currentTool:s}});return!m.length||(0,X.Zd)()&&!o||1===m.length&&!t?null:n.createElement(A.j9.Consumer,null,()=>{if(t)return n.createElement(s3,{recordingKey:a,tabInfo:_});let r=e===V.FAf.DESIGN&&l||e===V.FAf.COMMENT?ts.yW:ts.hv;return n.createElement("div",{className:r,"data-non-interactive":!0},_.map((e,t)=>n.createElement(s5,{key:t,...e})))})}function s3({tabInfo:e,recordingKey:t}){return n.createElement("div",{className:ts.A7},n.createElement("div",{className:ts.tq},e.map((e,t)=>n.createElement(s5,{key:t,...e}))),n.createElement("div",{className:ts.wR},n.createElement(s1.HT,{recordingKey:m.Pt(t,"zoomMenu")})),n.createElement("div",{"data-onboarding-key":sq.D9,className:ts.qq}))}var s2=l(438371),s8=l(122255),s7=l(544403),s9=l(73163),oe=l(146394),ot=l(155300);let ol={[V.eVK.TOP_LEFT]:"anchor_point_selector--apTopLeft--jsueH",[V.eVK.TOP_CENTER]:"anchor_point_selector--apTopMiddle--Wp-kD",[V.eVK.TOP_RIGHT]:"anchor_point_selector--apTopRight--mbC5X",[V.eVK.MIDDLE_LEFT]:"anchor_point_selector--apMiddleLeft--G-YlO",[V.eVK.MIDDLE_CENTER]:"anchor_point_selector--apMiddleMiddle--gut-r",[V.eVK.MIDDLE_RIGHT]:"anchor_point_selector--apMiddleRight--VZnhH",[V.eVK.BOTTOM_LEFT]:"anchor_point_selector--apBottomLeft--30X3n",[V.eVK.BOTTOM_CENTER]:"anchor_point_selector--apBottomMiddle--ySpzF",[V.eVK.BOTTOM_RIGHT]:"anchor_point_selector--apBottomRight--rXs-P"},on={[V.eVK.TOP_LEFT]:"top_left",[V.eVK.TOP_CENTER]:"top_center",[V.eVK.TOP_RIGHT]:"top_right",[V.eVK.MIDDLE_LEFT]:"middle_left",[V.eVK.MIDDLE_CENTER]:"middle_center",[V.eVK.MIDDLE_RIGHT]:"middle_right",[V.eVK.BOTTOM_LEFT]:"bottom_left",[V.eVK.BOTTOM_CENTER]:"bottom_center",[V.eVK.BOTTOM_RIGHT]:"bottom_right"};function or(e){let{value:t,anchorPoint:l,onAnchorPointChange:r,disabled:a,dataTestId:s}=e,o=n.useCallback(()=>{r(t)},[r,t]),c=t===l;return n.createElement("button",{className:`anchor_point_selector--anchorPointButton--JCPGp ${ol[t]}`,onClick:o,disabled:a,"data-testid":s},n.createElement("div",{className:i()("anchor_point_selector--anchorPointButtonInner--LSo9Y",{"anchor_point_selector--apButtonActive--eNX6V":c,"anchor_point_selector--disabled--YCcFc":a}),"data-testid":c?`${s}.active`:void 0}))}let oa=e=>"INPUT"===e.tagName;function oi(e){let{anchorPoint:t,onAnchorPointChange:l,disabled:r,restoreFocusElements:a}=e,[s,o]=n.useState(document.activeElement),c=e=>{l(e),s&&oa(s)&&(null==a?void 0:a.includes(s))&&s.focus()};return n.createElement("div",{className:i()("anchor_point_selector--anchorPointSelector--ZC9rv",{"anchor_point_selector--anchorPointSelectorDisabled--JScxh":r}),onMouseDown:()=>{o(document.activeElement)}},n.createElement(n.Fragment,null,n.createElement(or,{disabled:r,value:V.eVK.TOP_LEFT,anchorPoint:t,onAnchorPointChange:c,dataTestId:`scale_panel.anchor.${on[V.eVK.TOP_LEFT]}`}),n.createElement(or,{disabled:r,value:V.eVK.TOP_CENTER,anchorPoint:t,onAnchorPointChange:c,dataTestId:`scale_panel.anchor.${on[V.eVK.TOP_CENTER]}`}),n.createElement(or,{disabled:r,value:V.eVK.TOP_RIGHT,anchorPoint:t,onAnchorPointChange:c,dataTestId:`scale_panel.anchor.${on[V.eVK.TOP_RIGHT]}`})),n.createElement(n.Fragment,null,n.createElement(or,{disabled:r,value:V.eVK.MIDDLE_LEFT,anchorPoint:t,onAnchorPointChange:c,dataTestId:`scale_panel.anchor.${on[V.eVK.MIDDLE_LEFT]}`}),n.createElement(or,{disabled:r,value:V.eVK.MIDDLE_CENTER,anchorPoint:t,onAnchorPointChange:c,dataTestId:`scale_panel.anchor.${on[V.eVK.MIDDLE_CENTER]}`}),n.createElement(or,{disabled:r,value:V.eVK.MIDDLE_RIGHT,anchorPoint:t,onAnchorPointChange:c,dataTestId:`scale_panel.anchor.${on[V.eVK.MIDDLE_RIGHT]}`})),n.createElement(n.Fragment,null,n.createElement(or,{disabled:r,value:V.eVK.BOTTOM_LEFT,anchorPoint:t,onAnchorPointChange:c,dataTestId:`scale_panel.anchor.${on[V.eVK.BOTTOM_LEFT]}`}),n.createElement(or,{disabled:r,value:V.eVK.BOTTOM_CENTER,anchorPoint:t,onAnchorPointChange:c,dataTestId:`scale_panel.anchor.${on[V.eVK.BOTTOM_CENTER]}`}),n.createElement(or,{disabled:r,value:V.eVK.BOTTOM_RIGHT,anchorPoint:t,onAnchorPointChange:c,dataTestId:`scale_panel.anchor.${on[V.eVK.BOTTOM_RIGHT]}`})))}let os=V.eVK.MIDDLE_CENTER;var oo=(e=>(e.TextInput="text-input",e.Selector="selector",e))(oo||{}),oc=(e=>(e.Select="select",e.Input="input",e.Scrub="scrub",e.Width="width",e.Height="height",e))(oc||{});function od(e,t){return(0,p.xN)(e,0)?((0,h.x1)("clampScaleValue","scale is 0",{originalValue:e,newValue:t}),1):(0,p.qE)(t/e,.01,100)}var op=l(336417),ou=l(127285),om=l(360882),oh=l(614851),o_=l(59466);let oE=[.25,.5,.75,1,2,3,4,5,10];class og extends lT.a3{}class oy extends lr.c${}let ov=new class{constructor(){this.MAX_SCALE=100,this.MIN_SCALE=.01}parse(e){let t=(0,om.q)(e),l=(0,ou.O4)(t,1);if(null!==l.value&&isFinite(l.value)){let t=(0,om.v)(e);return{value:l.value,anchorPoint:null===t?void 0:t}}throw new lX.LS("Could not parse input",l.error)}format(e){if(null==e)return"";let t=parseFloat(e.value.toFixed(2));return`${t}x`}getNudgeAmount(e){return e?1:.5}incrementBy(e,t){return{value:e.value+t,anchorPoint:e.anchorPoint}}snap(e,t){return{value:(0,p.YE)(e.value,t),anchorPoint:e.anchorPoint}}clamp(e){return{value:(0,p.qE)(e.value,this.MIN_SCALE,this.MAX_SCALE),anchorPoint:e.anchorPoint}}isEqual(e,t){return e.value===t.value&&e.anchorPoint===t.anchorPoint}},ob=n.forwardRef((e,t)=>{let{disabled:l,scale:r,onScaleChange:a,recordingKey:i,onInputKeyDown:s}=e,o=(0,ee.wA)(),c=(0,ee.d4)(e=>e.dropdownShown),d=m.c1(i),p=(0,ab.GS)(),u=oE.map((e,t)=>n.createElement(oy,{key:t,value:{value:e},recordingKey:d("scaleInput",e)})),h={smallNudgeAmount:1,bigNudgeAmount:10,scrubMultiplier:1,wheelMultiplier:1,postScrubMultiplier:.01,postBigNudgeAmount:1,postWheelMultiplier:.1,resolution:.01,"data-tooltip":"","data-tooltip-type":ed.Ib.TEXT,dispatch:o,value:{value:r},onValueChange:(e,t)=>{a(e.value,oc.Scrub,t),t&&F.Y5.commit()},scrubbingDisabled:l,formatter:ov};return n.createElement(lT.ow,{value:{select:p?lw.pW:void 0,inputComponent:p?lw.gm:void 0}},n.createElement(lr.tV,{value:{chevron:p?lP.c9:void 0}},n.createElement(og,{scrubbableControlProps:h,id:"scale-input-fullscreen.scale_panel.scale",forwardedRef:t,className:"scale_row--scaleCombobox--jimxi",property:{value:r},onKeyDown:s,onChange:(e,t,l)=>{a(e.value,l===lT.G7.Input?oc.Input:oc.Select,t??tU.zk.NO,e.anchorPoint),t&&F.Y5.commit()},formatter:ov,dispatch:o,dropdownShown:c,onMouseDown:e=>{e.stopPropagation()},recordingKey:d("scaleInput"),disabled:l,svg:o_.A,svgClassName:oh.QK,ui3Icon:n.createElement(op.l,null),dropdownWidth:104,dataTestId:"scale_panel.scale"},u)))}),of=n.forwardRef(e=>n.createElement(eg.fI,null,n.createElement(ob,{...e}))),oS="scale_width_height_row--condensedWidthHeightRow--VOTEM",oT="scale_width_height_row--condensedScrubbableInput--XxHxl",ow={smallNudgeAmount:.01,bigNudgeAmount:.1,scrubMultiplier:1,wheelMultiplier:1,postScrubMultiplier:.01,postBigNudgeAmount:1,postWheelMultiplier:.1,resolution:.01};function oP(e){let{disabled:t,scale:l,property:r,selectionRegionsBounds:a,selectionRegionsOriginalBounds:i,onScaleChange:s,recordingKey:o,forwardedRef:c,onKeyDown:d}=e,u="width"===r?oc.Width:oc.Height,h=(0,ee.wA)(),_=m.c1(o),E=function(){if(a&&a.length){let e=a[0][r];return a.every(t=>(0,p.xN)(t[r],e,.005))?e:H.oV}return H.oV}(),g=(0,lQ.Xs)(),y=(0,H.gl)(E)?ow:{},v=(0,ab.GS)();return n.createElement(lS.$j,{noBorderOnHover:!0,dispatch:h,forwardedRef:c,className:oT,inputClassName:oh.hF,disabled:t,floatingPointFormat:v?void 0:{maxNumDigits:4},onKeyDown:d,dataTestId:`scale_panel.${r}`,"data-tooltip-type":ed.Ib.TEXT,"data-tooltip":"width"===r?(0,P.t)("fullscreen.properties_panel.transform_panel.width"):(0,P.t)("fullscreen.properties_panel.transform_panel.height"),tooltipForScreenReadersOnly:!0,recordingKey:_(`${r}Input.input`),min:(0,H.gl)(E)?.01:1,value:E??0,mixedMathHandler:{getValue:()=>l,onChange:(e,t,l)=>{let n=t(e);Number.isNaN(n)||s((0,p.qE)(n,.01,100),u,l)}},onValueChange:(e,t)=>{!Number.isNaN(e)&&E&&E!==H.oV&&i&&i.length&&s(od(i[0][r],e),u,t)},...g,...y},n.createElement("span",{className:`${oh.QK} svg`},"width"===r?n.createElement(P.Tx,{id:"fullscreen.properties_panel.transform_panel.w"}):n.createElement(P.Tx,{id:"fullscreen.properties_panel.transform_panel.h"})))}function ok(e){let{widthRef:t,heightRef:l,onWidthInputKeyDown:r,onHeightInputKeyDown:a,...i}=e;return n.createElement(oP,{...i,property:"width",forwardedRef:t,onKeyDown:r})}function oI(e){let{widthRef:t,heightRef:l,onWidthInputKeyDown:r,onHeightInputKeyDown:a,...i}=e;return n.createElement(oP,{...i,property:"height",forwardedRef:l,onKeyDown:a})}function oC(e){return n.createElement(eg.fI,{className:oS},n.createElement(ok,{...e}),n.createElement(oI,{...e}))}function oN(e){let t=n.createElement(ok,{...e}),l=n.createElement(oI,{...e});return n.createElement(ev.fn,{leftLabel:(0,P.t)("fullscreen.properties_panel.transform_panel.width"),leftInput:t,rightLabel:(0,P.t)("fullscreen.properties_panel.transform_panel.height"),rightInput:l,icon:null})}var oA=l(889012),ox=l.n(oA),oL=l(939683);let oM="scale_panel--scalePanelRow--Cbovd";var oO=l(630834);let oR=()=>{F.Y5.triggerAction("set-tool-default")};function oD(e){let t=(0,ee.d4)(e=>e.mirror.sceneGraphSelection),l=(0,tK.kl)("selectionRegions"),r=(0,H.E7)(l),a=(0,rw.ZC)(r),i=n.useRef(0),[s,c]=(0,n.useState)(void 0),d=(0,rw.ZC)(s),u=n.useRef(null),h=(0,tK.kl)("selectionResizable"),_=(0,H._W)(h,!1),E=(0,tB.p8)("activeUserAction"),g=(0,rw.ZC)(E),y=(0,ll.J2)(V.Ez5.propertiesPanelState().shownPropertiesPanels),v=(0,rw.ZC)(y),[b,f]=(0,n.useState)(!1),S=n.useRef(null),T=n.useRef(null),w=n.useRef(null),k=(0,tB.p8)("currentTool"),I=(0,rw.ZC)(k),C=k!==V.NLJ.SCALE,N=!_||C,A=(0,ab.GS)(),[x,L]=(0,n.useState)(os),M=(0,ll.J2)(V.Ez5.canvasViewState().scaleToolLastCanvasAnchorPoint),O=m.qP(e.recordingKey??"","anchorPointChange",L),[R,D]=(0,n.useState)(void 0),K=(0,n.useCallback)(e=>{void 0===R?D(e):R!==e&&D(null)},[R]),{trackScaleChangeEvent:B,trackScaleToolDismissed:U,trackAnchorPointChange:G}=function(){let e=(0,oL.am)(),t=(0,n.useCallback)(t=>{e("scale_tool_panel_set_value",{key:"height",...t})},[e]),l=(0,n.useMemo)(()=>ox()(t,3e3),[t]),r=(0,n.useCallback)((e,n)=>n?l(e):t(e),[l,t]),a=(0,n.useCallback)(t=>e("scale_tool_panel_set_value",{key:"width",...t}),[e]),i=(0,n.useMemo)(()=>ox()(a,3e3),[a]),s=(0,n.useCallback)((e,t)=>t?i(e):a(e),[i,a]),o=(0,n.useCallback)(t=>e("scale_tool_panel_set_value",{key:"scale",...t}),[e]),c=(0,n.useMemo)(()=>ox()(o,3e3),[o]),d=(0,n.useCallback)((e,t)=>t?c(e):o(e),[c,o]),p=(0,n.useCallback)(t=>e("scale_tool_panel_dismissed",{...t}),[e]);return{trackScaleChangeEvent:d,trackWidthChangeEvent:s,trackHeightChangeEvent:r,trackAnchorPointChange:(0,n.useCallback)(t=>e("scale_tool_set_anchor_point",{...t}),[e]),trackScaleToolDismissed:p}}();(0,n.useEffect)(()=>{E===V.QOV.RESIZING&&x!==M&&(K(M),O(M))},[E,x,O,K,M]);let[Y,W]=(0,n.useState)(1),[$,z]=(0,n.useState)(!1),[X,Q]=(0,n.useState)(!1),[Z,J]=(0,n.useState)(!0),j=(0,n.useCallback)((e,t)=>{s&&s.length&&(V.glU.setScale(e,t,s.map(e=>({origin:{x:e.x,y:e.y},size:{x:e.width,y:e.height}})),null!==R),Q(!0),K(t))},[s,R,K]);(0,n.useEffect)(()=>{z(!0)},[t]),(0,n.useEffect)(()=>{!(null==v?void 0:v[V.ibQ.SCALE_ITEM])&&(null==y?void 0:y[V.ibQ.SCALE_ITEM])&&z(!0)},[y,v]);let et=(0,n.useCallback)(()=>X?(Q(!1),!0):E===V.QOV.RESIZING||E===V.QOV.DEFAULT&&g===V.QOV.RESIZING,[E,X,g]);(0,n.useLayoutEffect)(()=>{if(a&&a.length&&r&&r.length&&a.length===r.length)for(let e=0;e<r.length;e++){let{x:t,y:l,width:n,height:i}=r[e].bounds,{x:s,y:o,width:c,height:d}=a[e].bounds;if(c!==n||d!==i){if(!et()&&!$){z((0,p.xN)(c,n)!==(0,p.xN)(d,i));break}}else if(s!==t||o!==l){K(null);break}}},[a,r,et,K,$]),(0,n.useLayoutEffect)(()=>{let e=!1;if((0,o.kc)().ce_scale_tool_skew&&r){let t=u.current??r.map(e=>(e.bounds.width||1)/(e.bounds.height||1)),l=V.glU.getSelectionAngleSum();if(r.length===t.length){u.current=[];for(let n=0;n<r.length;++n){let a=(r[n].bounds.width||1)/(r[n].bounds.height||1);(e||(0,ot.o)(a,t[n],1e-4))&&(0,ot.o)(l,i.current,1e-4)||(e=!0),u.current.push(a),i.current=l}}}(e||$)&&(W(1),O(os),V.Ez5.canvasViewState().scaleToolLastCanvasAnchorPoint.set(os),D(void 0),c(V.glU.getSelectionRegionsBounds().map(({origin:e,size:t})=>({x:e.x,y:e.y,width:t.x,height:t.y}))),f(!1),z(!1))},[$,r,O,M]),(0,n.useLayoutEffect)(()=>{r&&r.length&&s&&s.length&&(r!==a||(0,o.kc)().ce_scale_tool_skew&&s!==d)&&(Z?W(od(s[0].width,r[0].bounds.width)):J(!0))},[d,r,s,a,Z]),(0,n.useEffect)(()=>{let e=k===V.NLJ.SCALE&&I!==V.NLJ.SCALE;e&&Object.keys(t).length>0&&e&&[V.QOV.DEFAULT,V.QOV.SELECTING_TEXT].includes(E)&&S.current&&(S.current.focus(),S.current.select())},[E,k,I,t]),(0,n.useEffect)(()=>{let e=()=>{S.current&&(f(!1),S.current.focus(),S.current.select())};return oe.h.subscribeScaleToolActivated(e),()=>{oe.h.unsubscribeScaleToolActivated(e)}},[]),(0,n.useEffect)(()=>{let e=e=>{e.target!==S.current&&e.target!==T.current&&e.target!==w.current&&f(!0)};return document.addEventListener("focusin",e),()=>{document.removeEventListener("focusin",e)}},[]);let el=(0,n.useCallback)(e=>{let t="Escape"===e.key,l="Enter"===e.key;!b&&(l||t)&&oR()},[b]),en=n.createElement(eg.$4,null,n.createElement(eb.K,{onClick:()=>{oR(),U({selectionCount:Object.keys(t).length})},"aria-label":(0,P.t)("fullscreen.scale_panel.close")},n.createElement(ei.U,{svg:oO.default,fallbackSvg:oO.default},n.createElement(tb.A,null)))),er=n.createElement(ob,{scale:Y,onInputKeyDown:el,onScaleChange:ek.nc.user("change-scale",(e,t,l,n)=>{W(e),J(!1),void 0!==n&&(0,o.kc)().ee_scale_tool_ap_input?(B({value:e,source:t,anchorPoint:n,anchorPointSource:oo.TextInput}),j(e,n),O(n)):(t===oc.Select?B({value:e,source:t,anchorPoint:x,anchorPointSource:oo.Selector}):B({value:e,source:t,anchorPoint:x,anchorPointSource:oo.Selector},!0),(0,q.flushSync)(()=>{j(e,x),l&&r&&r.length>1&&V.glU.logMultiEditActionForSelection("scale_panel_finish",null)}))}),disabled:N,recordingKey:e.recordingKey,ref:S}),ea=n.createElement(oi,{restoreFocusElements:[S.current,T.current,w.current].filter(Boolean),anchorPoint:x,onAnchorPointChange:ek.nc.user("change-anchor-point",e=>{e!==x&&(1!==Y&&(j(1,x),j(Y,e)),O(e)),G({anchorPoint:e})}),disabled:N}),es=n.createElement(A?oN:oC,{scale:Y,selectionRegionsBounds:r.map(e=>e.bounds),selectionRegionsOriginalBounds:s,onScaleChange:ek.nc.user("change-scale",(e,t,l)=>{B({value:e,source:t,anchorPoint:x,anchorPointSource:oo.Selector},!0),W(e),J(!1),j(e,x),l&&(r&&r.length>1&&V.glU.logMultiEditActionForSelection("scale_panel_finish",null),F.Y5.commit())}),widthRef:T,heightRef:w,onHeightInputKeyDown:el,onWidthInputKeyDown:el,disabled:N,recordingKey:e.recordingKey});return A?n.createElement(eg.Zk,{"data-testid":`scale_panel.state.${C?"hidden":N?"disabled":"enabled"}`,className:"scale_panel--scalePanel--EfJhl"},n.createElement(li.r,{titleTx:n.createElement(P.Tx,{id:"fullscreen.scale_panel.scale"}),icon:en}),es,n.createElement(ev.sY,{leftLabel:(0,P.t)("fullscreen.scale_panel.scale"),rightLabel:(0,P.t)("fullscreen.scale_panel.anchor_point"),topLeftInput:er,bottomLeftInput:null,rightInput:ea,topIcon:null,bottomIcon:null})):n.createElement(eg.Zk,{"data-testid":`scale_panel.state.${C?"hidden":N?"disabled":"enabled"}`},n.createElement(eg.fI,{className:oM},n.createElement(eg.xw,null,n.createElement(P.Tx,{id:"fullscreen.scale_panel.scale"})),en,ea),n.createElement(eg.fI,null,er),es)}let oF={smallNudgeAmount:.01,bigNudgeAmount:.1,scrubMultiplier:1,wheelMultiplier:1,postScrubMultiplier:.01,postBigNudgeAmount:1,postWheelMultiplier:.1,resolution:.01};function oV({disabled:e,widthOrHeight:t,scale:l,property:r,onScaleChange:a,onWidthOrHeightChange:i,recordingKey:s,forwardedRef:o,onKeyDown:c}){let d="width"===r?oc.Width:oc.Height,p=(0,ee.wA)(),u=(0,lQ.Xs)(),h=(0,H.gl)(t)?oF:{},_=m.c1(s);return n.createElement(lS.$j,{noBorderOnHover:!0,dispatch:p,forwardedRef:o,className:oT,inputClassName:oh.hF,disabled:e,floatingPointFormat:{maxNumDigits:4},onKeyDown:c,dataTestId:`scale_panel.${r}`,"data-tooltip-type":ed.Ib.TEXT,"data-tooltip":"width"===r?(0,P.t)("fullscreen.properties_panel.transform_panel.width"):(0,P.t)("fullscreen.properties_panel.transform_panel.height"),tooltipForScreenReadersOnly:!0,recordingKey:_(`${r}Input.input`),min:(0,H.gl)(t)?.01:1,value:t||0,mixedMathHandler:{getValue:()=>l,onChange:(e,t,l)=>{let n=t(e);Number.isNaN(n)||a(n,d,l)}},onValueChange:(e,l)=>{!Number.isNaN(e)&&t&&t!==H.oV&&i(e,l)},...u,...h},n.createElement("span",{className:`${oh.QK} svg`},"width"===r?n.createElement(P.Tx,{id:"fullscreen.properties_panel.transform_panel.w"}):n.createElement(P.Tx,{id:"fullscreen.properties_panel.transform_panel.h"})))}function oK({width:e,height:t,onWidthChange:l,onHeightChange:r,onWidthInputKeyDown:a,onHeightInputKeyDown:i,widthInputRef:s,heightInputRef:o,...c}){return n.createElement(eg.fI,{className:oS},n.createElement(oV,{...c,property:"width",widthOrHeight:e,onWidthOrHeightChange:l,onKeyDown:a,forwardedRef:s}),n.createElement(oV,{...c,widthOrHeight:t,onWidthOrHeightChange:r,onKeyDown:i,property:"height",forwardedRef:o}))}let oB=l(630834);function oU(){F.Y5.triggerAction("set-tool-default")}function oH({recordingKey:e}){let t=(0,ll.J2)(V.yFm.state().scale),l=ek.nc.user("change-scale",e=>{V.yFm.setScale(e)}),r=(0,ll.J2)(V.yFm.state().width);r="number"==typeof r?r:H.oV;let a=ek.nc.user("change-scale-width",e=>{V.yFm.setWidth(e)}),i=(0,ll.J2)(V.yFm.state().height);i="number"==typeof i?i:H.oV;let s=ek.nc.user("change-scale-height",e=>{V.yFm.setHeight(e)}),o=(0,ll.J2)(V.yFm.state().anchorPoint),c=ek.nc.user("change-anchor-point",e=>{V.yFm.setAnchorPoint(e)}),{handleKeyDown:d,heightInputRef:p,scaleInputRef:u,widthInputRef:m}=function(){let e=(0,ee.d4)(e=>e.mirror.sceneGraphSelection),[t,l]=n.useState(!1),r=n.useRef(null),a=n.useRef(null),i=n.useRef(null),s=(0,tB.p8)("currentTool"),o=(0,rw.ZC)(s),c=(0,tB.p8)("activeUserAction"),[d,p]=n.useState(!1);n.useEffect(()=>{let t=s===V.NLJ.SCALE&&o!==V.NLJ.SCALE;Object.keys(e).length>0&&t&&[V.QOV.DEFAULT,V.QOV.SELECTING_TEXT].includes(c)&&r.current&&(r.current.focus(),r.current.select())},[c,s,o,e]),n.useEffect(()=>{let e=()=>{r.current&&(l(!1),p(!1),r.current.focus(),r.current.select())};return oe.h.subscribeScaleToolActivated(e),()=>{oe.h.unsubscribeScaleToolActivated(e)}},[]),n.useEffect(()=>{let e=e=>{e.target!==r.current&&e.target!==a.current&&e.target!==i.current&&l(!0)};return document.addEventListener("focusin",e),()=>{document.removeEventListener("focusin",e)}},[]);let u=n.useCallback(e=>{let l="Escape"===e.key,n="Enter"===e.key;!t&&(n||l)&&p(!0)},[t]);return n.useEffect(()=>{d&&oU()}),{handleKeyDown:u,scaleInputRef:r,widthInputRef:a,heightInputRef:i}}();return n.createElement(eg.Zk,null,n.createElement(eg.fI,{className:oM},n.createElement(eg.xw,null,n.createElement(P.Tx,{id:"fullscreen.scale_panel.scale"})),n.createElement("span",null,n.createElement(eb.K,{onClick:oU,"aria-label":(0,P.t)("fullscreen.scale_panel.close")},n.createElement(ei.U,{fix_me_removeThisPropAndProvideUI3Icon:!0,svg:oB,fallbackSvg:oB}))),n.createElement(oi,{restoreFocusElements:[u.current,m.current,p.current].filter(Boolean),anchorPoint:o,onAnchorPointChange:c,disabled:!1})),n.createElement(of,{scale:t,onScaleChange:l,disabled:!1,onInputKeyDown:d,recordingKey:e,ref:u}),n.createElement(oK,{scale:t,width:r,height:i,onWidthChange:a,onHeightChange:s,onScaleChange:l,onKeyDown:d,widthInputRef:m,heightInputRef:p,disabled:!1,recordingKey:e}))}function oG(e){return n.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},n.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M8 9.5a.5.5 0 0 0-1 0v5a.5.5 0 0 0 1 0v-5Zm9 0a.5.5 0 0 0-1 0v5a.5.5 0 0 0 1 0v-5Zm-8-2a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5Zm.5 8.5a.5.5 0 0 0 0 1h5a.5.5 0 0 0 0-1h-5Z",clipRule:"evenodd"}))}var oY=l(460528),oW=l(553738),o$=l(410465),oz=l(933466),oX=l(700829),oQ=l(467213),oZ=l(416082),oJ=l(283942),oj=l(221537);let oq="alignment_view_v4--indicator--VmKfE",o0="alignment_view_v4--indicatorBaseline--4kxfb",o1="alignment_view_v4--counterCenter--MlF9q";function o5({onClick:e,onDoubleClick:t,onHover:l,...r}){let a=(0,oj.rO)(r.stackPrimaryAlignItems),s="BASELINE"===r.stackCounterAlignItems,o="HORIZONTAL"===r.stackMode?"HORIZONTAL":"VERTICAL",c="WRAP"===r.stackWrap,d="HORIZONTAL"===o?"alignment_view_v4--horizontal--UiniT":"alignment_view_v4--vertical--JVrRJ",p=a?"alignment_view_v4--spaceBetween--RZOdp":"alignment_view_v4--packed--MZMpk",u=(0,H.hS)(r.stackPrimaryAlignItems)&&(0,H.hS)(r.stackCounterAlignItems),m=r.primaryHover&&r.counterHover,h=(0,n.useCallback)(e=>{let[l,n]=ce(e.target);if(a){let t=e.target.getBoundingClientRect();"HORIZONTAL"===o?l=Math.floor((e.clientX-t.x)/t.width*3):n=Math.floor((e.clientY-t.y)/t.height*3)}t(l,n)},[t,a,o]),_=(0,n.useCallback)(e=>l(...ce(e.target)),[l]),E=(0,n.useCallback)(e=>l(null,null),[l]);return n.createElement("div",{className:i()(r.className,"alignment_view_v4--mainContainer--zUBsm",d,p,{"alignment_view_v4--baselineAlign--xLTR2":s}),tabIndex:0,onKeyDown:r.onKeyDown},n.createElement(o9,{baseline:s}),n.createElement(o8,{stackMode:o,spaceBetween:a,baselineAlign:s,onMouseMove:_,onMouseOut:E,onClick:e,onDoubleClick:h}),m&&n.createElement(o4,{hover:!0,primaryAlign:r.primaryHover,counterAlign:r.counterHover,isStackWrap:c}),u&&n.createElement(o4,{primaryAlign:r.stackPrimaryAlignItems,counterAlign:r.stackCounterAlignItems,isStackWrap:c}),s&&n.createElement(o2,{onClick:r.onRemoveBaseline}))}function o4({hover:e,primaryAlign:t,counterAlign:l,isStackWrap:r}){return n.createElement("div",{className:i()("alignment_view_v4--indicatorContainer--ewQnB alignment_view_v4--_centered--S6qQk",t?o3[t]:void 0,l?o6[l]:void 0,{"alignment_view_v4--hover---ncmo":e})},n.createElement("div",{className:i()("alignment_view_v4--indicatorGroup--vlMlW",{"alignment_view_v4--wrap--nsYBR":r})},"BASELINE"===l?(0,oj.rO)(t)?n.createElement(n.Fragment,null,n.createElement("div",{className:oq}),n.createElement("span",{className:o0},"A"),n.createElement("div",{className:oq})):n.createElement("span",{className:o0},"A"):r?n.createElement(n.Fragment,null,n.createElement("div",{className:oq}),n.createElement("div",{className:oq}),n.createElement("div",{className:oq}),n.createElement("div",{className:oq}),n.createElement("div",{className:oq})):n.createElement(n.Fragment,null,n.createElement("div",{className:oq}),n.createElement("div",{className:oq}),n.createElement("div",{className:oq}))))}let o6={MIN:"alignment_view_v4--counterMin--1LPg6",CENTER:o1,MAX:"alignment_view_v4--counterMax--HzBqX",BASELINE:o1},o3={MIN:"alignment_view_v4--primaryMin--DHsQj",CENTER:"alignment_view_v4--primaryCenter--ci9Aj",MAX:"alignment_view_v4--primaryMax--i8kqd",SPACE_EVENLY:"",SPACE_BETWEEN:""};function o2({onClick:e}){let t=cl(),l=cn(),r=2*t/3+2,a=t-9,i=t-5.5;return n.createElement("svg",{className:"alignment_view_v4--baselineControls--cwzcf alignment_view_v4--_centered--S6qQk",width:t,height:t,viewBox:l,fill:"none"},n.createElement("g",{className:"alignment_view_v4--baselineHovered--uY49E","data-tooltip-type":ed.Ib.TEXT,"data-tooltip":(0,P.t)("fullscreen.properties_panel.stack_panel.remove_baseline_align"),onClick:e},n.createElement("rect",{x:"4.5",y:`${r}`,width:`${a}`,height:"14",rx:"2",fill:"var(--color-bg-selected-tertiary, #EDF5FA)"}),n.createElement("line",{x1:"5.5",y1:`${r}`,x2:`${i}`,y2:`${r}`,stroke:"var(--color-bg-brand-hover, #0D99FF)",strokeWidth:"2",strokeLinecap:"round",strokeDasharray:"1 5"}),n.createElement("line",{x1:"5.5",y1:`${r}`,x2:`${i}`,y2:`${r}`,stroke:"var(--color-bg-tertiary, rgba(0, 0, 0, 0.3))",strokeWidth:"2",strokeLinecap:"round"})))}function o8({spaceBetween:e,stackMode:t,baselineAlign:l,onMouseMove:r,onMouseOut:a,onClick:i,onDoubleClick:s}){let o=ct({stackMode:t,baselineAlign:l,spaceBetween:e});return n.createElement("div",{className:"alignment_view_v4--tooltipGrid--1PH8Z alignment_view_v4--_centered--S6qQk",onMouseMove:r,onMouseOut:a,onClick:i,onDoubleClick:s},o.map((l,r)=>{let a=r%3,i=Math.floor(r/3);return"HORIZONTAL"===t&&e&&(i=a,a=0),n.createElement(o7,{key:r,x:a,y:i,..."string"==typeof l?{tooltip:l}:l})}))}function o7({x:e,y:t,tooltip:l,below:r}){return n.createElement("div",{"data-x":e,"data-y":t,"data-tooltip-type":ed.Ib.TEXT,"data-tooltip":l,"data-tooltip-show-above":!r||void 0})}function o9({baseline:e}){let t=cn(),l=cl(),r=l/3,a=`${r}`,i=`${r/2}`,s=e?r:0,o=e?r:l,c=(0,n.useId)();return n.createElement("svg",{width:l,height:l,viewBox:t,fill:"currentColor"},n.createElement("defs",null,n.createElement("pattern",{id:c,width:a,height:a,patternUnits:"userSpaceOnUse"},n.createElement("circle",{cx:i,cy:i,r:"1"}))),n.createElement("rect",{width:"79",height:o,y:s,fill:`url(#${c})`}))}function ce(e){let{x:t,y:l}=e.dataset;return[parseInt(t),parseInt(l)]}function ct({baselineAlign:e,spaceBetween:t,stackMode:l,isUi3:n}){return e&&t?n?[{tooltip:(0,P.t)("fullscreen.properties_panel.stack_panel.align_text_baseline"),below:!0}]:[(0,P.t)("fullscreen.properties_panel.stack_panel.align_baseline")]:e?[{tooltip:(0,P.t)("fullscreen.properties_panel.stack_panel.align_left_baseline"),below:n},{tooltip:(0,P.t)("fullscreen.properties_panel.stack_panel.align_center_baseline"),below:n},{tooltip:(0,P.t)("fullscreen.properties_panel.stack_panel.align_right_baseline"),below:n}]:t?"HORIZONTAL"===l?n?[(0,P.t)("fullscreen.properties_panel.stack_panel.align_top"),(0,P.t)("fullscreen.properties_panel.stack_panel.align_center"),{tooltip:(0,P.t)("fullscreen.properties_panel.stack_panel.align_bottom"),below:!0}]:[(0,P.t)("fullscreen.properties_panel.stack_panel.align_auto_top_gap"),(0,P.t)("fullscreen.properties_panel.stack_panel.align_auto_center_gap"),{tooltip:(0,P.t)("fullscreen.properties_panel.stack_panel.align_auto_bottom_gap"),below:!0}]:n?[(0,P.t)("fullscreen.properties_panel.stack_panel.align_left"),(0,P.t)("fullscreen.properties_panel.stack_panel.align_center"),(0,P.t)("fullscreen.properties_panel.stack_panel.align_right")]:[(0,P.t)("fullscreen.properties_panel.stack_panel.align_auto_left_gap"),(0,P.t)("fullscreen.properties_panel.stack_panel.align_auto_center_gap"),(0,P.t)("fullscreen.properties_panel.stack_panel.align_auto_right_gap")]:[(0,P.t)("fullscreen.properties_panel.stack_panel.align_top_left"),(0,P.t)("fullscreen.properties_panel.stack_panel.align_top_center"),(0,P.t)("fullscreen.properties_panel.stack_panel.align_top_right"),(0,P.t)("fullscreen.properties_panel.stack_panel.align_left"),(0,P.t)("fullscreen.properties_panel.stack_panel.align_center"),(0,P.t)("fullscreen.properties_panel.stack_panel.align_right"),{tooltip:(0,P.t)("fullscreen.properties_panel.stack_panel.align_bottom_left"),below:!0},{tooltip:(0,P.t)("fullscreen.properties_panel.stack_panel.align_bottom_center"),below:!0},{tooltip:(0,P.t)("fullscreen.properties_panel.stack_panel.align_bottom_right"),below:!0}]}let cl=()=>(0,s.jz)("60px"),cn=()=>{let e=cl();return`0 0 ${e} ${e}`},cr="alignment_view_v4_ui3--indicatorBaseline--NUe6M",ca="alignment_view_v4_ui3--counterCenter--QC-B7";function ci({onClick:e,onDoubleClick:t,onHover:l,...r}){let a=(0,oj.rO)(r.stackPrimaryAlignItems),s="BASELINE"===r.stackCounterAlignItems,o="HORIZONTAL"===r.stackMode?"HORIZONTAL":"VERTICAL",c="WRAP"===r.stackWrap,d="HORIZONTAL"===o?"alignment_view_v4_ui3--horizontal--2Shqc":"alignment_view_v4_ui3--vertical--zGQMJ",p=a?"alignment_view_v4_ui3--spaceBetween--o3EAq":"alignment_view_v4_ui3--packed--EvdQi",u=(0,H.hS)(r.stackPrimaryAlignItems)&&(0,H.hS)(r.stackCounterAlignItems),m=r.primaryHover&&r.counterHover,h=(0,n.useCallback)(e=>{let[l,n]=cE(e.target);if(a){let t=e.target.getBoundingClientRect();"HORIZONTAL"===o?l=Math.floor((e.clientX-t.x)/t.width*3):n=Math.floor((e.clientY-t.y)/t.height*3)}t(l,n)},[t,a,o]),_=(0,n.useCallback)(e=>l(...cE(e.target)),[l]),E=(0,n.useCallback)(e=>l(null,null),[l]);return n.createElement("div",{className:i()(r.className,"alignment_view_v4_ui3--mainContainer---0NcS",d,p,{"alignment_view_v4_ui3--baselineAlign--OxyzT":s}),tabIndex:0,onKeyDown:r.onKeyDown},n.createElement(c_,null),n.createElement(cu,{stackMode:o,spaceBetween:a,baselineAlign:s,onMouseMove:_,onMouseOut:E,onClick:e,onDoubleClick:h}),m&&n.createElement(cs,{hover:!0,primaryAlign:r.primaryHover,counterAlign:r.counterHover,isStackWrap:c}),u&&n.createElement(cs,{primaryAlign:r.stackPrimaryAlignItems,counterAlign:r.stackCounterAlignItems,isStackWrap:c}),s&&n.createElement("div",{className:"alignment_view_v4_ui3--grid3x3--306xj alignment_view_v4_ui3--_centered--MV2if"},n.createElement(cp,{onClick:r.onRemoveBaseline})))}function cs({hover:e,primaryAlign:t,counterAlign:l,isStackWrap:r}){function a(){let e=(0,oj.rO)(t);if("BASELINE"===l)return e?n.createElement(n.Fragment,null,n.createElement("span",{className:cr},"A"),n.createElement("span",{className:cr},"A"),n.createElement("span",{className:cr},"A")):n.createElement("span",{className:cr},"A");let a=r&&!e?5:3;return n.createElement(co,{n:a})}return n.createElement("div",{className:i()("alignment_view_v4_ui3--indicatorContainer--napq- alignment_view_v4_ui3--tooltipGrid--HBKLD alignment_view_v4_ui3--grid3x3--306xj alignment_view_v4_ui3--_centered--MV2if",t?cd[t]:void 0,l?cc[l]:void 0,{"alignment_view_v4_ui3--hover--ypG6x":e})},"BASELINE"===l?a():n.createElement("div",{className:"alignment_view_v4_ui3--indicatorGridCell--lp1lH"},n.createElement("div",{className:i()("alignment_view_v4_ui3--indicatorGroup--urXG2",{"alignment_view_v4_ui3--wrap--JWwtI":r})},a())))}function co({n:e}){return n.createElement(n.Fragment,null,Array.from({length:e},(e,t)=>n.createElement("div",{key:t,className:"alignment_view_v4_ui3--indicator--82j5F"})))}let cc={MIN:"alignment_view_v4_ui3--counterMin--aOx1R",CENTER:ca,MAX:"alignment_view_v4_ui3--counterMax--cCtqr",BASELINE:ca},cd={MIN:"alignment_view_v4_ui3--primaryMin--Q8O6a",CENTER:"alignment_view_v4_ui3--primaryCenter--RzFRC",MAX:"alignment_view_v4_ui3--primaryMax--eMvqL",SPACE_EVENLY:"",SPACE_BETWEEN:""};function cp({onClick:e}){return n.createElement("button",{className:"alignment_view_v4_ui3--baselineControls--xazGW alignment_view_v4_ui3--_centered--MV2if","data-tooltip-type":ed.Ib.TEXT,"data-tooltip":(0,P.t)("fullscreen.properties_panel.stack_panel.remove_baseline_align"),onClick:e},n.createElement("div",{className:"alignment_view_v4_ui3--baselineControlLine--6BBmA"}))}function cu({spaceBetween:e,stackMode:t,baselineAlign:l,onMouseMove:r,onMouseOut:a,onClick:i,onDoubleClick:s}){let o=ct({stackMode:t,baselineAlign:l,spaceBetween:e,isUi3:(0,eC.R)()});return n.createElement("div",{className:"alignment_view_v4_ui3--tooltipGrid--HBKLD alignment_view_v4_ui3--grid3x3--306xj alignment_view_v4_ui3--_centered--MV2if",onMouseMove:r,onMouseOut:a,onClick:void 0,onMouseUp:i,onDoubleClick:s},"HORIZONTAL"===t&&l&&e?n.createElement(cm,{tooltips:o}):o.map((l,r)=>{let a=r%3,i=Math.floor(r/3);return"HORIZONTAL"===t&&e&&(i=a,a=0),n.createElement(ch,{key:r,x:a,y:i,..."string"==typeof l?{tooltip:l}:l})}))}function cm({tooltips:e}){let t=(0,n.useId)(),l=e[0];return null==l?null:n.createElement(n.Fragment,null,n.createElement("div",{"data-tooltip-proxy-element-id":t}),n.createElement(ch,{id:t,x:1,y:1,..."string"==typeof l?{tooltip:l}:l}),n.createElement("div",{"data-tooltip-proxy-element-id":t}))}function ch({id:e,x:t,y:l,tooltip:r,below:a}){return n.createElement("div",{id:e,"data-x":t,"data-y":l,"data-tooltip-type":ed.Ib.TEXT,"data-tooltip":r,"data-tooltip-show-above":!a||void 0})}function c_(){return n.createElement("div",{className:"alignment_view_v4_ui3--dotGrid--N6RPe alignment_view_v4_ui3--grid3x3--306xj alignment_view_v4_ui3--_centered--MV2if"},Array.from({length:9},(e,t)=>n.createElement("div",{className:"alignment_view_v4_ui3--dotGridCell--r7m5y",key:t},n.createElement("div",{key:t,className:"alignment_view_v4_ui3--dot--d5NQx"}))))}function cE(e){let{x:t,y:l}=e.dataset;return[parseInt(t),parseInt(l)]}var cg=l(232531),cy=l(876618);let cv=["MIN","CENTER","MAX"];function cb({className:e,recordingKey:t}){let l=(0,tK.kl)("stackMode"),r=(0,tK.kl)("stackWrap"),[a,i]=(0,tK.lJ)("stackPrimaryAlignItems"),[s,o]=(0,tK.lJ)("stackCounterAlignItems"),[c,u]=(0,n.useState)(void 0),[h,_]=(0,n.useState)(void 0),E=(0,cy.sR)(),g=(0,cy.uV)(),y=(0,oL.am)(),v=(0,eC.R)(),b=(0,ee.d4)(nU.qd),f=(0,oj.rO)(a),S="BASELINE"===s,T=(0,n.useCallback)((e,t)=>{if(null==e||null==t){u(void 0),_(void 0);return}let n=cf(e,t,l,f),r=cS(e,t,l,S);u(n),_(r)},[l,S,f,u,_]),w=m.rf(t,"click",(0,n.useCallback)(e=>{let t=c,l=h;e&&e.__interactionTest&&(t=e.primaryAlignItems,l=e.counterAlignItems),t&&l&&(f||i(t,tU.zk.NO),o(l),y("Autolayout alignment grid used",{nodeIds:b}))},[c,h,f,o,y,i,b]),{recordMetadata:()=>({primaryAlignItems:c,counterAlignItems:h}),playbackMetadata:e=>({...e,__interactionTest:!0})}),{clearVariableConsumption:P}=(0,cg.O)("STACK_SPACING",V.rXF.FLOAT),k=(0,n.useCallback)((e,t)=>{g(void 0===t||t,e,tU.zk.NO),P()},[g,P]),I=(0,n.useCallback)((e,t)=>{if(f){g(!1,"alignment double click",tU.zk.NO);let n=cf(e,t,l,!1),r=cS(e,t,l,S);u(n),_(r),i(n,tU.zk.NO),o(r),y("Autolayout spacing mode changed",{mode:n,doubleClick:!0})}else k("alignment double click"),o(cS(e,t,l,S))},[k,S,f,o,i,g,l,y]),C=(0,n.useCallback)(()=>{o("CENTER"),y("Disable baseline alignment",{source:"alignment grid"})},[o,y]),N=m.v_(t,"keydown",(0,n.useCallback)(e=>{function t(e){"HORIZONTAL"===l?i(e):o(e)}function n(e){"VERTICAL"===l?i(e):o(e)}function r(e,t){if((0,H.gl)(e))return"CENTER";let l=cv.indexOf(e);if(-1===l)return null;let n=(0,p.qE)(l+t,0,cv.length-1);return cv[n]}let c="HORIZONTAL"===l?a:s,u="VERTICAL"===l?a:s;switch(e.keyCode){case d.Uz.ESCAPE:case d.Uz.ENTER:e.currentTarget.blur();break;case d.Uz.UP_ARROW:{let e=r(u,-1);e&&n(e);break}case d.Uz.DOWN_ARROW:{let e=r(u,1);e&&n(e);break}case d.Uz.LEFT_ARROW:{let e=r(c,-1);e&&t(e);break}case d.Uz.RIGHT_ARROW:{let e=r(c,1);e&&t(e);break}case d.Uz.B:"HORIZONTAL"===l&&E("BASELINE"!==s,"alignment keyboard");break;case d.Uz.X:k("alignment keyboard",!(0,oj.rO)(a));break;case d.Uz.W:n("MIN");break;case d.Uz.A:t("MIN");break;case d.Uz.S:n("MAX");break;case d.Uz.D:t("MAX");break;case d.Uz.V:n("CENTER");break;case d.Uz.H:t("CENTER");break;default:(0,oJ.jr)(e,oJ.W0.YES,oJ.VA.YES);return}e.preventDefault()},[k,s,a,E,o,i,l])),A=v?n.createElement(ci,{className:e,stackMode:l,stackWrap:r,stackPrimaryAlignItems:a,stackCounterAlignItems:s,onHover:T,onClick:w,onDoubleClick:I,onKeyDown:N,onRemoveBaseline:C,counterHover:h,primaryHover:c}):n.createElement(o5,{className:e,stackMode:l,stackWrap:r,stackPrimaryAlignItems:a,stackCounterAlignItems:s,onHover:T,onClick:w,onDoubleClick:I,onKeyDown:N,onRemoveBaseline:C,counterHover:h,primaryHover:c});return n.createElement(tT.E,{name:"alignment_view"},A)}function cf(e,t,l,n){return n?(0,o.kc)().ce_stack_justify_space_between?"SPACE_BETWEEN":"SPACE_EVENLY":cv["VERTICAL"===l?t:e]}function cS(e,t,l,n){return n?"BASELINE":cv["VERTICAL"===l?e:t]}var cT=l(630978),cw=l(178466),cP=l(791489),ck=l(931828),cI=l(309798),cC=l(801161);function cN({onClick:e,onOpen:t,modalKey:l,...r}){let a=(0,ee.wA)(),i=(0,iH.X)(),s=(0,n.useRef)(null),o=(0,eC.R)(),c=(null==i?void 0:i.id)===l,d=(0,rw.ZC)(c),p=c?new y.Mi(i.initialX,i.initialY):null,u=(0,n.useRef)(r.onClose);u.current=r.onClose,(0,n.useEffect)(()=>{var e;d&&!c&&(null==(e=u.current)||e.call(u))},[c,d]),(0,n.useEffect)(()=>()=>{var e;return null==(e=u.current)?void 0:e.call(u)},[]);let h=(0,n.useCallback)(()=>{c&&(a(k.XE()),F.Y5.deselectProperty())},[a,c]),_=(0,n.useCallback)(()=>{if(c)return;e||null==t||t();let{top:n}=q.findDOMNode(s.current).getBoundingClientRect();a(k.u1({id:l,initialX:ep.qo,initialY:n}))},[a,c,l,e,t]);(0,n.useEffect)(()=>{null!=r.open&&(r.open?_():h())},[h,_,r.open]);let E=n.createElement(eI.YW,{ref:s,svg:r.svg,fallbackSvg:r.fallbackSvg,"data-tooltip-type":ed.Ib.TEXT,"data-tooltip":r.tooltip,onMouseMove:()=>{c&&a(cC.jD())},onMouseDown:e??(e=>{e.stopPropagation(),c?h():_()}),recordingKey:m.Pt(r,"trigger"),selected:c,className:r.buttonClassName},o?r.ui3Icon:void 0),g=r.buttonInteractableName?n.createElement(tT.E,{name:r.buttonInteractableName},E):E,v=c?n.createElement(ez.vx,{title:r.title,initialPosition:p,initialConstraints:{x:"right",y:"top"},headerSize:"small",onClose:h,recordingKey:m.Pt(r,"modal")},r.children):null,b=v&&r.modalTrackableName?n.createElement(tw.p,{name:"stack_layout_details_modal"},v):v;return n.createElement(n.Fragment,null,g,b)}var cA=l(63666),cx=l(70964),cL=l(579623),cM=l(280106);let cO="stack_layout_details_preview--stroke--tWkNh",cR="stack_layout_details_preview--strokeLight--RsPk7",cD="stack_layout_details_preview--fill--V74cf",cF="stack_layout_details_preview--fillWhite--uTjlG",cV="stack_layout_details_preview--fillTertiary--xuwqQ",cK={reverseStackingOrder:function({enabled:e}){let t=[n.createElement("g",{key:"1",filter:"url(#reverse-stacking-order-filter)"},n.createElement("rect",{className:cF,x:"67",y:"40",width:"40",height:"40",rx:"20"}),n.createElement("path",{className:cD,d:"M88.4893 53.9091V67H87.294V55.1619H87.2173L84.1491 57.201V55.9609L87.2429 53.9091H88.4893Z"}),n.createElement("rect",{className:cO,x:"66.5",y:"39.5",width:"41",height:"41",rx:"20.5"})),n.createElement("g",{key:"2",filter:"url(#reverse-stacking-order-filter)"},n.createElement("rect",{className:cF,x:"99",y:"40",width:"40",height:"40",rx:"20"}),n.createElement("path",{className:cD,d:"M114.964 67V66.1243L119.241 61.3175C119.799 60.6868 120.248 60.1477 120.589 59.7003C120.93 59.2528 121.177 58.8395 121.331 58.4602C121.488 58.081 121.567 57.6868 121.567 57.2777C121.567 56.7791 121.45 56.3445 121.216 55.9737C120.986 55.5987 120.668 55.3068 120.263 55.098C119.858 54.8892 119.402 54.7848 118.895 54.7848C118.358 54.7848 117.888 54.8999 117.483 55.13C117.082 55.3601 116.771 55.6754 116.549 56.076C116.328 56.4766 116.217 56.9368 116.217 57.4567H115.073C115.073 56.7322 115.239 56.0909 115.571 55.5327C115.908 54.9702 116.366 54.5291 116.946 54.2095C117.53 53.8899 118.19 53.7301 118.927 53.7301C119.656 53.7301 120.304 53.8878 120.87 54.2031C121.437 54.5142 121.883 54.9382 122.206 55.4751C122.53 56.0121 122.692 56.6129 122.692 57.2777C122.692 57.7592 122.607 58.2259 122.437 58.6776C122.27 59.1293 121.983 59.6321 121.574 60.1861C121.165 60.7401 120.598 61.4176 119.873 62.2188L116.626 65.843V65.9261H123.101V67H114.964Z"}),n.createElement("rect",{className:cO,x:"98.5",y:"39.5",width:"41",height:"41",rx:"20.5"})),n.createElement("g",{key:"3",filter:"url(#reverse-stacking-order-filter)"},n.createElement("rect",{className:cF,x:"131",y:"40",width:"40",height:"40",rx:"20"}),n.createElement("path",{className:cD,d:"M151.048 67.179C150.243 67.179 149.522 67.0341 148.887 66.7443C148.252 66.4503 147.75 66.0433 147.379 65.5234C147.008 65.0036 146.812 64.4048 146.791 63.7273H147.999C148.02 64.2045 148.167 64.6222 148.44 64.9801C148.713 65.3338 149.075 65.6108 149.527 65.8111C149.978 66.0071 150.481 66.1051 151.035 66.1051C151.64 66.1051 152.173 65.9922 152.633 65.7663C153.098 65.5405 153.46 65.2315 153.72 64.8395C153.984 64.4432 154.116 63.9957 154.116 63.4972C154.116 62.9687 153.982 62.5021 153.713 62.0973C153.445 61.6925 153.059 61.3771 152.556 61.1513C152.058 60.9254 151.461 60.8125 150.767 60.8125H150V59.7386H150.767C151.333 59.7386 151.834 59.6364 152.269 59.4318C152.708 59.223 153.053 58.9311 153.304 58.5561C153.556 58.1811 153.681 57.7401 153.681 57.233C153.681 56.7514 153.573 56.3274 153.355 55.9609C153.138 55.5945 152.831 55.3068 152.435 55.098C152.043 54.8892 151.585 54.7848 151.061 54.7848C150.554 54.7848 150.089 54.8828 149.667 55.0788C149.245 55.2749 148.904 55.5518 148.645 55.9098C148.389 56.2678 148.252 56.6918 148.235 57.1818H147.078C147.096 56.5 147.283 55.9013 147.641 55.3857C148.003 54.8658 148.483 54.4609 149.079 54.1712C149.68 53.8771 150.345 53.7301 151.074 53.7301C151.845 53.7301 152.512 53.8878 153.074 54.2031C153.637 54.5185 154.071 54.9382 154.378 55.4624C154.689 55.9822 154.845 56.5554 154.845 57.1818C154.845 57.9276 154.642 58.5668 154.238 59.0994C153.833 59.6278 153.287 59.9943 152.601 60.1989V60.282C153.436 60.4482 154.093 60.8189 154.57 61.3942C155.051 61.9652 155.292 62.6662 155.292 63.4972C155.292 64.196 155.109 64.8246 154.743 65.3828C154.376 65.9368 153.873 66.3757 153.234 66.6996C152.599 67.0192 151.87 67.179 151.048 67.179Z"}),n.createElement("rect",{className:cO,x:"130.5",y:"39.5",width:"41",height:"41",rx:"20.5"}))];return e&&t.reverse(),n.createElement("svg",{width:"240",height:"120",fill:"none"},t,n.createElement("rect",{className:cR,x:"58.5",y:"28.5",width:"123",height:"63",rx:"3.5",strokeDasharray:"4 2"}),n.createElement("defs",null,n.createElement("filter",{id:"reverse-stacking-order-filter",x:"-1px",y:"-1px",width:"44",height:"42",filterUnits:"objectBoundingBox",colorInterpolationFilters:"sRGB"},n.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),n.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),n.createElement("feOffset",{dx:"2"}),n.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),n.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),n.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_1112_23748"}),n.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_1112_23748",result:"shape"}))))},alignToBaseline:function(){return n.createElement("svg",{width:240,height:120,fill:"none"},n.createElement("path",{className:i()("stack_layout_details_preview--alignToBaselineLine--Erw5t","stack_layout_details_preview--strokeAssistive--GgFOd"),d:"M38 60.5h164"}),n.createElement("g",{className:"stack_layout_details_preview--alignToBaselineA--kQYyh"},n.createElement("path",{className:cD,d:"M63.8516 67L65.2514 63.0561H70.7486L72.1484 67H73.4013L68.6392 53.9091H67.3608L62.5987 67H63.8516ZM65.6349 61.9822L67.9553 55.4624H68.0447L70.3651 61.9822H65.6349Z"}),n.createElement("rect",{className:cO,x:46.5,y:38.5,width:43,height:43,rx:1.5})),n.createElement("rect",{className:i()("stack_layout_details_preview--alignToBaselineEmpty--Z-l7O",cO),x:98.5,y:38.5,width:43,height:43,rx:1.5}),n.createElement("g",{className:"stack_layout_details_preview--alignToBaselineG--YayQ-"},n.createElement("path",{className:cD,d:"M171.843 68.8864C174.169 68.8864 175.895 67.7486 175.895 65.2557V55.1818H174.783V57.0547H174.668C174.265 56.1726 173.453 55.0476 171.651 55.0476C169.222 55.0476 167.592 57.0803 167.592 60.0653C167.592 63.076 169.279 64.8977 171.632 64.8977C173.396 64.8977 174.259 63.875 174.649 62.9737H174.751V65.1854C174.751 67.0135 173.581 67.8636 171.843 67.8636C170.161 67.8636 169.356 67.0518 168.941 66.304L168.007 66.9176C168.583 68.0426 169.835 68.8864 171.843 68.8864ZM171.766 63.8558C169.816 63.8558 168.736 62.2962 168.736 60.0462C168.736 57.8345 169.797 56.0831 171.766 56.0831C173.69 56.0831 174.77 57.745 174.77 60.0462C174.77 62.4176 173.658 63.8558 171.766 63.8558Z"}),n.createElement("rect",{className:cO,x:150.5,y:38.5,width:43,height:43,rx:1.5})),n.createElement("rect",{className:i()("stack_layout_details_preview--alignToBaselineOutline--YlRIY",cR),x:38.5,y:30.5,width:163,height:59,rx:3.5,strokeDasharray:"4 2",vectorEffect:"non-scaling-stroke"}))},bordersTakeSpace:function(){return n.createElement("svg",{width:240,height:120,fill:"none"},n.createElement("g",{className:"stack_layout_details_preview--bordersTakeSpaceLeft--WTfPZ"},n.createElement("rect",{className:cV,x:"43",y:"37",width:"48",height:"48",rx:"2"}),n.createElement("rect",{className:cF,x:"49",y:"43",width:"36",height:"36",rx:"2"})),n.createElement("g",{className:"stack_layout_details_preview--bordersTakeSpaceRight--QCBF1"},n.createElement("rect",{className:cV,x:"98",y:"37",width:"99",height:"48",rx:"2"}),n.createElement("rect",{className:cF,x:"104",y:"43",width:"87",height:"36",rx:"2"})),n.createElement("rect",{className:i()("stack_layout_details_preview--bordersTakeSpaceOutline--Xq42w",cR),x:"48.5",y:"42.5",width:"143",height:"37",rx:"1.5",strokeDasharray:"4 2",vectorEffect:"non-scaling-stroke"}))}};function cB({setting:e,enabled:t}){let l=e?cK[e]:null;return n.createElement("div",{className:i()("stack_layout_details_preview--preview---r9k-",{"stack_layout_details_preview--active--yCMB3":t}),"data-non-interactive":!0},l?n.createElement(l,{enabled:t}):n.createElement("div",{className:"stack_layout_details_preview--previewText--0NBYb"},n.createElement(P.Tx,{id:"fullscreen.properties_panel.stack_panel.preview"})))}let cU="stack_layout_details_modal--dropdownControl--PRPD5",cH="stack_layout_details_modal--onboardingBody--SQp9T",cG="stack_layout_details_modal--input--h2Yc7",cY="stack_layout_details_modal--chevron--tW9wo";var cW=l(769502);let c$="seen_stack_spacing_auto_onboarding";function cz(e){let[t,l]=(0,n.useState)(!1),[r,a]=(0,n.useState)({enabled:!1}),i=(0,eC.R)()?(0,P.t)("fullscreen.properties_panel.section_autoLayout.settings"):(0,P.t)("fullscreen.properties_panel.stack_panel.advanced_layout");return n.createElement(n.Fragment,null,n.createElement(cN,{title:i,tooltip:i,modalKey:"LAYOUT_DETAILS_PICKER",buttonInteractableName:"open_stack_layout_details_modal_button",modalTrackableName:"stack_layout_details_modal",svg:sW.A,ui3Icon:n.createElement(tf.A,null),buttonClassName:cW.Sj,recordingKey:e.recordingKey,onClose:()=>{setTimeout(()=>{l(!0)},250)}},n.createElement(cB,{setting:r.setting,enabled:r.enabled}),n.createElement("div",{className:"stack_layout_details_modal--controls--SFjhS"},n.createElement(cZ,{updatePreview:a,recordingKey:e.recordingKey}),n.createElement(cX,{updatePreview:a,recordingKey:e.recordingKey}),n.createElement(cQ,{updatePreview:a,recordingKey:e.recordingKey}))),t&&n.createElement(cq,{onDismiss:()=>l(!1)}))}function cX({updatePreview:e,recordingKey:t}){var l;let r=(0,ee.wA)(),a=(0,tA.U)(),[i,s]=(0,tK.lJ)("stackReverseZIndex"),o=(0,oL.am)(),c=(0,ee.d4)(nU.qd),d=(0,ab.GS)(),p=(null==(l=(0,cw.Gq)())?void 0:l.getPrimaryLocale(!0))===cP.Xn?120:180,u=!0===i;return n.createElement(tT.E,{name:"stacking_order_control"},n.createElement(cL.L,{label:(0,P.t)("fullscreen.properties_panel.stack_panel.canvas_stacking_order"),onMouseEnter:()=>e({setting:"reverseStackingOrder",enabled:u}),onMouseLeave:()=>e({enabled:!1})},n.createElement(lr.l6,{id:"reverse-stacking-order-select",dispatch:r,className:cU,inputClassName:cG,chevronClassName:cY,textAlign:d?void 0:"right",property:i,formatter:cJ,onChange:e=>{s(e),o(e?"Enable reverse zIndex":"Disable reverse zIndex",{nodeIds:c})},recordingKey:m.Pt(t,"reverseStackingOrder"),dropdownShown:a,dropdownAlignment:"right",dropdownWidth:p,onOptionFocus:t=>e({setting:null!=t?"reverseStackingOrder":void 0,enabled:!!t})},n.createElement(lr.c$,{value:!0}),n.createElement(lr.c$,{value:!1}))))}function cQ({updatePreview:e,recordingKey:t}){let l=(0,tK.kl)("stackMode"),r="BASELINE"===(0,tK.kl)("stackCounterAlignItems"),a="HORIZONTAL"!==l,i=(0,cy.sR)();return n.createElement(tT.E,{name:"baseline_alignment_control"},n.createElement(cM.k,{label:(0,P.t)("fullscreen.properties_panel.stack_panel.align_text_baseline"),recordingKey:m.Pt(t,"alignToBaseline"),property:r,disabled:a,onChange:t=>{i(t,"modal"),e({setting:"alignToBaseline",enabled:t})},onFocus:t=>{e({setting:"alignToBaseline",enabled:r})},onHover:(t,l)=>{e({setting:"ENTER"===l?"alignToBaseline":void 0,enabled:t})},"data-tooltip":a?(0,P.t)("fullscreen.properties_panel.stack_panel.only_applicable_for_horizontal_layout"):void 0,"data-tooltip-type":ed.Ib.TEXT}))}function cZ({updatePreview:e,recordingKey:t}){let l=(0,ee.wA)(),r=(0,tA.U)(),[a,i]=(0,tK.lJ)("bordersTakeSpace"),s=(0,oL.am)(),o=(0,ee.d4)(nU.qd),c=(0,ab.GS)(),d=!0===a;return n.createElement(tT.E,{name:"borders_take_space_control"},n.createElement(cL.L,{label:(0,P.t)("fullscreen.properties_panel.stack_panel.borders_take_space"),onMouseEnter:()=>e({setting:"bordersTakeSpace",enabled:d}),onMouseLeave:()=>e({enabled:!1})},n.createElement(lr.l6,{id:"borders-take-space-select",dispatch:l,className:cU,inputClassName:cG,chevronClassName:cY,dropdownWidth:168,textAlign:c?void 0:"right",property:d,formatter:cj,onChange:e=>{i(e),s("change_borders_take_space",{enabled:e,source:"modal",nodeIds:o})},recordingKey:m.Pt(t,"bordersTakeSpace"),dropdownShown:r,onOptionFocus:t=>e({setting:null!=t?"bordersTakeSpace":void 0,enabled:!!t})},n.createElement(lr.c$,{value:!0}),n.createElement(lr.c$,{value:!1}))))}let cJ={format:e=>e?(0,P.t)("fullscreen.properties_panel.stack_panel.first_on_top"):(0,P.t)("fullscreen.properties_panel.stack_panel.last_on_top")},cj={format:e=>e?(0,P.t)("fullscreen.properties_panel.stack_panel.included"):(0,P.t)("fullscreen.properties_panel.stack_panel.excluded"),formatExtended:e=>({text:e?(0,P.t)("fullscreen.properties_panel.stack_panel.included_in_layout"):(0,P.t)("fullscreen.properties_panel.stack_panel.excluded_from_layout")})};function cq({onDismiss:e}){let t=(0,ee.wA)();return(0,cI.f)(c$)?null:n.createElement(cA.OA,{targetKey:"stack-spacing-input",shouldNotWrapInParagraphTag:!0,dismissModal:()=>{t(ck.b({[c$]:!0})),e()},background:"light",width:268,title:n.createElement(P.Tx,{id:"fullscreen.properties_panel.stack_panel.gap_onboarding_title"}),secondaryCtaText:n.createElement("a",{href:"https://help.figma.com/hc/articles/360040451373-Explore-auto-layout-properties#spacing-between",target:"_blank",style:{textDecoration:"none"}},n.createElement(P.Tx,{id:"general.learn_more"})),onClickSecondaryCta:tF.lQ,ctaText:n.createElement(P.Tx,{id:"general.got_it"}),onClickPrimaryCta:e,arrowPosition:ez.F_.RIGHT_TITLE},n.createElement(cx.Gv,{containerClassName:"stack_layout_details_modal--onboardingImg--4Uak-",src:"https://static.figma.com/uploads/94241d15e9d47a0c73734ae71850674f78cd4ab0"}),n.createElement("p",{className:cH},n.createElement(P.Tx,{id:"fullscreen.properties_panel.stack_panel.gap_onboarding_body1",gapBetweenItems:n.createElement("strong",null,n.createElement(P.Tx,{id:"fullscreen.properties_panel.stack_panel.gap_items"}))})),n.createElement("p",{className:cH},n.createElement(P.Tx,{id:"fullscreen.properties_panel.stack_panel.gap_onboarding_body2",auto:n.createElement("strong",null,n.createElement(P.Tx,{id:"fullscreen.properties_panel.stack_panel.auto"}))})))}var c0=l(802411),c1=l(729943),c5=l(253781);function c4(e){return n.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},n.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M7.5 7h2a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1-.5-.5v-2a.5.5 0 0 1 .5-.5ZM6 7.5A1.5 1.5 0 0 1 7.5 6h2A1.5 1.5 0 0 1 11 7.5v2A1.5 1.5 0 0 1 9.5 11h-2A1.5 1.5 0 0 1 6 9.5v-2Zm8.5-.5h2a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1-.5-.5v-2a.5.5 0 0 1 .5-.5Zm-1.5.5A1.5 1.5 0 0 1 14.5 6h2A1.5 1.5 0 0 1 18 7.5v2a1.5 1.5 0 0 1-1.5 1.5h-2A1.5 1.5 0 0 1 13 9.5v-2ZM9.5 14h-2a.5.5 0 0 0-.5.5v2a.5.5 0 0 0 .5.5h2a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 0-.5-.5Zm-2-1A1.5 1.5 0 0 0 6 14.5v2A1.5 1.5 0 0 0 7.5 18h2a1.5 1.5 0 0 0 1.5-1.5v-2A1.5 1.5 0 0 0 9.5 13h-2Zm10.384 1.32a.5.5 0 0 0-.768-.64l-2.15 2.58-1.112-1.114a.5.5 0 0 0-.708.708l1.5 1.5a.5.5 0 0 0 .738-.034l2.5-3Z",clipRule:"evenodd"}))}function c6(e){return n.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},n.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M16.5 7h-9a.5.5 0 0 0-.5.5v2a.5.5 0 0 0 .5.5h9a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 0-.5-.5Zm-9-1A1.5 1.5 0 0 0 6 7.5v2A1.5 1.5 0 0 0 7.5 11h9A1.5 1.5 0 0 0 18 9.5v-2A1.5 1.5 0 0 0 16.5 6h-9Zm2 8h-2a.5.5 0 0 0-.5.5v2a.5.5 0 0 0 .5.5h2a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 0-.5-.5Zm-2-1A1.5 1.5 0 0 0 6 14.5v2A1.5 1.5 0 0 0 7.5 18h2a1.5 1.5 0 0 0 1.5-1.5v-2A1.5 1.5 0 0 0 9.5 13h-2Zm10.384 1.32a.5.5 0 0 0-.768-.64l-2.15 2.58-1.112-1.114a.5.5 0 0 0-.708.708l1.5 1.5a.5.5 0 0 0 .738-.034l2.5-3Z",clipRule:"evenodd"}))}function c3(e){let{propertiesPanelShouldShowRemoveAutoLayout:t}=ds(),l=t?(0,P.t)("fullscreen.properties_panel.stack_panel.remove_auto_layout"):(0,P.t)("fullscreen.properties_panel.stack_panel.use_auto_layout"),{actionEnabledStackSelection:r,actionEnabledUnstackSelection:a}=ds(),i=t?a:r,s=t?"unstack-selection":"stack-selection",o=(0,n.useCallback)(()=>{F.Y5.triggerActionInUserEditScope(s,{source:"panel"})},[s]);return n.createElement(eI.YW,{"aria-label":l,"data-tooltip":l,"data-tooltip-type":ed.Ib.TEXT,"data-tooltip-shortcut-key":s,selected:t,showTooltipWhenSelectedIsTrue:!0,disabled:!i,onClick:o,recordingKey:m.Pt(e.recordingKey,t?"removeButton":"addButton")},n.createElement(c2,null))}function c2(){let e=(0,tK.kl)("stackMode"),t=(0,tK.kl)("stackWrap"),{propertiesPanelShouldShowRemoveAutoLayout:l}=ds();if(!l)return n.createElement(c1.Q,null);if((0,H.gl)(e)||null==e||(0,H.gl)(t))return n.createElement(c5.v,null);if("WRAP"===t)return n.createElement(c4,null);switch(e){case"NONE":case"HORIZONTAL":return n.createElement(c5.v,null);case"VERTICAL":return n.createElement(c6,null)}}var c8=l(258890),c7=l(996620),c9=l(689606),de=l(957069),dt=l(733982);function dl(e){return n.createElement(tw.p,{name:"stack_panel"},n.createElement(dn,{...e}))}let dn=n.memo(e=>{let{version:t}=(0,er.DP)();return"ui3"===t?n.createElement(da,{...e}):n.createElement(dr,{...e})});function dr(e){let{showMigrationUi:t,actionEnabledStackSelection:l,actionEnabledUnstackSelection:r,propertiesPanelShouldShowRemoveAutoLayout:a,wrappingEnabled:i}=ds();return n.createElement(eg.Zk,null,n.createElement(sV,{title:n.createElement(P.Tx,{id:"fullscreen.properties_panel.stack_panel.auto_layout"}),addProperty:()=>{F.Y5.triggerActionInUserEditScope("stack-selection",{source:"panel"})},removeProperty:()=>{F.Y5.triggerActionInUserEditScope("unstack-selection",{source:"panel"})},contentsVisibleOrMixed:e.onlyStacksSelected,showButton:a?"-":"+",minusDisabled:!r,plusDisabled:!l,recordingKey:e.recordingKey,dataTestId:"open-stack-panel"},t?n.createElement(dd,null):n.createElement(n.Fragment,null,n.createElement(eg.fI,{className:i?cW.TE:cW.mm},n.createElement(dp,{recordingKey:e.recordingKey}),n.createElement("div",{className:cW.T$},n.createElement(cb,{recordingKey:m.Pt(e,"alignment")})),n.createElement(cz,{recordingKey:m.Pt(e,"stackLayoutDetails")}),n.createElement(du,{recordingKey:e.recordingKey}),i&&n.createElement(dm,{recordingKey:e.recordingKey})),n.createElement(dh,{recordingKey:e.recordingKey}))))}function da(e){let t=e.onlyStacksSelected?n.createElement(P.Tx,{id:"fullscreen.properties_panel.stack_panel.auto_layout"}):n.createElement(P.Tx,{id:"fullscreen.properties_panel.stack_panel.layout"}),l=(0,ll.J2)(V.Ez5.propertiesPanelState().shownPropertiesPanels),r=(0,ee.d4)(e=>e.mirror.selectionProperties),a=(0,sJ.aW)(l,void 0,r,void 0);return n.createElement(eg.Zk,{"data-onboarding-key":oY.W},n.createElement(li.Wv,{titleTx:t},n.createElement(iD.hw,{recordingKey:m.Pt(e,"frameFitButton")}),a?n.createElement(c3,{recordingKey:e.recordingKey}):void 0),n.createElement(di,{...e}))}function di({onlyStacksSelected:e,onlyShowResizingRow:t,recordingKey:l}){var r;let{showMigrationUi:a,wrappingEnabled:i,textAutoResize:s,missingFont:o}=ds(),c=(0,lQ.Df)(),d=(0,n.useRef)(null),p=(0,tK.kl)("nodesAreAllInsideStacks"),u=(0,ll.J2)(V.Ez5.propertiesPanelState().enabledTypePanelControls),h=!!(null==(r=F.Y5)?void 0:r.isFontListLoaded()),_=(0,tK.kl)("numSelectedByType"),E=(0,O.vx)(_,"TEXT"),g="transformPanel",y=n.createElement(n.Fragment,null,n.createElement(ij.Ws,{recordingKey:g,forwardedRef:d}),n.createElement(oQ.J,{visible:!!(e||p),widthHeightRowRef:d})),v=c.fixedFrameOptions&&n.createElement(oz.u,{recordingKey:l}),b=E&&n.createElement("div",{className:cW.Z2},n.createElement(oZ.f,{disabled:!h||!!o,enabledTypePanelControls:u,textAutoResize:s,recordingKey:l})),f=n.createElement(oX.e,{recordingKey:g});return!e||t?n.createElement(n.Fragment,null,y,b,v,f):n.createElement(n.Fragment,null,a?n.createElement(dd,null):n.createElement(n.Fragment,null,y,n.createElement(ev.sY,{topLeftInput:n.createElement(dp,{recordingKey:l}),rightInput:n.createElement(cb,{recordingKey:m.Pt(l,"alignment")}),leftLabel:i?n.createElement(P.Tx,{id:"fullscreen.properties_panel.section_autoLayout.label_direction"}):n.createElement(P.Tx,{id:"fullscreen.properties_panel.section_autoLayout.label_direction_and_gap"}),rightLabel:n.createElement(P.Tx,{id:"fullscreen.properties_panel.section_autoLayout.label_alignment"}),bottomLeftInput:i?null:n.createElement(du,{recordingKey:l}),topIcon:n.createElement(cz,{recordingKey:m.Pt(l,"stackLayoutDetails")}),bottomIcon:null}),i?n.createElement(ev.fn,{leftInput:n.createElement(du,{recordingKey:l}),rightInput:n.createElement(dm,{recordingKey:l}),icon:null,leftLabel:n.createElement(P.Tx,{id:"fullscreen.properties_panel.section_autoLayout.label_gap"}),rightLabel:null}):null,n.createElement(dh,{recordingKey:l}),n.createElement(oz.u,{recordingKey:l}),f))}function ds(){return(0,rc.R)(e=>{let{mirror:{appModel:t,selectionProperties:{propertiesPanelShouldShowRemoveAutoLayout:l,containsStacksNeedingAlignmentMigration:n,stackMode:r,stackWrap:a,textAutoResize:i,missingFont:s}}}=e;return{showMigrationUi:n,actionEnabledStackSelection:(0,J.Yh)(t,"stack-selection"),actionEnabledMultiStackSelection:(0,J.Yh)(t,"run-multi-stack-auto-layout"),actionEnabledUnstackSelection:(0,J.Yh)(t,"unstack-selection"),propertiesPanelShouldShowRemoveAutoLayout:l,wrappingEnabled:("HORIZONTAL"===r||(0,H.gl)(r))&&("WRAP"===a||(0,H.gl)(a)),textAutoResize:i,missingFont:s}})}let dc=!1;function dd(){let e;let t=(0,oL.am)(),[l,r]=(0,n.useState)(!1),{isOrInInstance:a,containsComponents:i}=(0,rc.R)(e=>{let{isInstanceSelected:t,isInstanceSublayerSelected:l,numSelectedByType:n}=e.mirror.selectionProperties;return{isOrInInstance:!!(t||l),containsComponents:!!n&&!!n.SYMBOL}});(0,n.useEffect)(()=>{dc||(t("stack_v2_migration_info_shown"),dc=!0)},[t]),(0,tB.f4)(()=>{r(!1)});let s=(0,n.useCallback)(()=>{let e=V.AlE.getActiveCanvas();ek.l7.user("update-stack-to-alv3",()=>{V.Qa7.updateStackToAutoLayoutV3(e,V.Ez5.bigNudgeAmount())}),F.Y5.triggerAction("commit"),r(!0),t("stack_v2_migration_updated")},[t]),o=(0,n.useCallback)(e=>{F.Y5.triggerActionInUserEditScope("undo"),r(!1)},[]);if(l)return n.createElement(eg.fI,{className:cW.A5},n.createElement("span",{className:cW.Yv},n.createElement(P.Tx,{id:"fullscreen.properties_panel.stack_panel.auto_layout_updated"})),n.createElement("a",{className:cW._V,onClick:o},n.createElement(P.Tx,{id:"fullscreen.properties_panel.stack_panel.undo"})));let c=V.AlE.getActiveCanvas(),d=V.Qa7.isOrInInstanceWithDeprecatedAlignmentOverride(c);return e=a?d?(0,P.t)("fullscreen.properties_panel.stack_panel.tooltip_old_version_instance_overrides"):(0,P.t)("fullscreen.properties_panel.stack_panel.tooltip_old_version_instance"):i?(0,P.t)("fullscreen.properties_panel.stack_panel.tooltip_old_version_components"):(0,P.t)("fullscreen.properties_panel.stack_panel.tooltip_old_version"),n.createElement(eg.fI,{className:cW.A5},n.createElement("div",{className:cW.Yv},n.createElement(P.Tx,{id:"fullscreen.properties_panel.stack_panel.new_auto_layout_version_available"}),n.createElement(ew.B,{className:cW.zp,svg:dt.A,"data-tooltip-type":ed.Ib.SPECIAL,"data-tooltip":ed.MW.AUTOLAYOUT_V3_MIGRATION_INFO,"data-tooltip-interactive":!0,"data-tooltip-show-immediately":!0,"data-tooltip-text":e})),n.createElement(tl.nR,{onClick:s,className:cW.RM,type:"button",disabled:a&&!d},n.createElement(P.Tx,{id:"fullscreen.properties_panel.stack_panel.update"})))}function dp(e){let t=(0,nC.Zr)("unstack-selection"),l=(0,tK.kl)("stackMode"),r=(0,tK.kl)("stackWrap"),{version:a}=(0,er.DP)(),i=(0,oL.am)(),s=(0,ee.d4)(nU.qd),o="ui2"===a?cW.N:cW.O_;return n.createElement(tT.E,{name:"stack_mode_control"},n.createElement("div",{className:o,"data-onboarding-key":"stack-mode-control"},n.createElement(o$.I,{property:"HORIZONTAL"===l&&"WRAP"===r?"WRAP":l,onChange:e=>{i("Stack Mode Changed",{stackMode:e,nodeIds:s}),ek.l7.user("set-stack-mode",()=>V.Qa7.setStackModeAndFlipPrimaryAndCounterAxisValues(e))},recordingKey:m.Pt(e,"stackMode"),disabled:!t},n.createElement(o$.Y,{svg:c7.A,value:"VERTICAL",tooltip:(0,P.t)("fullscreen.properties_panel.stack_panel.vertical_direction")}),n.createElement(o$.Y,{svg:c8.A,value:"HORIZONTAL",tooltip:(0,P.t)("fullscreen.properties_panel.stack_panel.horizontal_direction")}),n.createElement(o$.Y,{svg:de.A,value:"WRAP",tooltip:(0,P.t)("fullscreen.properties_panel.stack_panel.wrap")}))))}function du(e){let t=(0,oj.Wx)(),l=(0,oj.Y9)(),{version:r}=(0,er.DP)(),a="ui2"===r?cW.Kz:void 0;return n.createElement(tT.E,{name:"stack_spacing_control"},n.createElement(lw.KI,{outerClassName:a,onFocus:()=>t(V.RN9.SPACING,!0),onBlur:()=>t(V.RN9.SPACING,!1),onScrubBegin:()=>t(V.RN9.SPACING,!0),onScrubEnd:()=>t(V.RN9.SPACING,!1),onMouseEnter:()=>l(V.RN9.SPACING,!0),onMouseLeave:()=>l(V.RN9.SPACING,!1),onNudge:()=>V.glU.temporarilyHideOverlay(V.hJs.SELECTION),recordingKey:m.Pt(e,"stackSpacing"),source:"panel",onboardingKey:"stack-spacing-input"}))}function dm(e){let t=(0,oj.Wx)(),l=(0,oj.Y9)(),{version:r}=(0,er.DP)(),a="ui3"===r?void 0:cW.UN;return n.createElement(tT.E,{name:"stack_counter_spacing_input"},n.createElement(cT.q,{outerClassName:a,onFocus:()=>t(V.RN9.COUNTER_SPACING,!0),onBlur:()=>t(V.RN9.COUNTER_SPACING,!1),onScrubBegin:()=>t(V.RN9.COUNTER_SPACING,!0),onScrubEnd:()=>t(V.RN9.COUNTER_SPACING,!1),onMouseEnter:()=>l(V.RN9.COUNTER_SPACING,!0),onMouseLeave:()=>l(V.RN9.COUNTER_SPACING,!1),onNudge:()=>V.glU.temporarilyHideOverlay(V.hJs.SELECTION),recordingKey:m.Pt(e,"stackCounterSpacing"),inputTestId:"stack-counter-spacing",source:"panel"}))}function dh({recordingKey:e}){let[t,l]=(0,n.useState)(!1),[r,a]=(0,n.useState)(!1),i=(0,c0.U)(),{version:s}=(0,er.DP)();(0,tB.f4)(e=>{let{stackHorizontalPadding:t,stackPaddingRight:n,stackVerticalPadding:r,stackPaddingBottom:a}=e.mirror.selectionProperties,s=(0,H.q)(t,n),o=(0,H.q)(r,a);l((0,H.gl)(s)||(0,H.gl)(o)||i)});let o=(0,oL.am)(),c=(0,ee.d4)(nU.qd),p=(0,eC.R)(),u=()=>{l(!t),V.Qa7.setFocusStackPanelInput(V.RN9.PADDING_ALL,!1),o(t?"Disable autolayout independent padding":"Enable autolayout independent padding",{nodeIds:c})},h=p?n.createElement(r$.d,{onClick:u,toggled:t,actionOnPointerDown:!0,"data-tooltip-type":ed.Ib.TEXT,"aria-label":(0,P.t)("fullscreen.properties_panel.stack_panel.independent_paddings"),"data-tooltip":(0,P.t)("fullscreen.properties_panel.stack_panel.independent_paddings"),recordingKey:m.Pt(e,"showAllPaddingControls"),"data-test-id":"stack-padding-toggle"},n.createElement(oG,null)):n.createElement(oW.m,{"data-tooltip-type":ed.Ib.TEXT,"aria-label":(0,P.t)("fullscreen.properties_panel.stack_panel.independent_paddings"),"data-tooltip":(0,P.t)("fullscreen.properties_panel.stack_panel.independent_paddings"),recordingKey:m.Pt(e,"showAllPaddingControls"),"data-test-id":"stack-padding-toggle",onMouseDown:u,svg:c9.A,toggled:t,className:cW.NC});return n.createElement(tT.E,{name:"stack_padding_controls"},n.createElement("ui3"===s?dE:d_,{showAllPaddingControls:t,showSinglePaddingControl:r,setShowSinglePaddingControl:a,recordingKey:e,handleClick:function(e){(0,d.Fo)(e)&&a(!0)},showAllPaddingControlsToggle:h}))}function d_({showAllPaddingControls:e,showSinglePaddingControl:t,setShowSinglePaddingControl:l,recordingKey:r,handleClick:a,showAllPaddingControlsToggle:s}){return n.createElement(eg.fI,{heightMultiplier:e&&!t?2:void 0},t?n.createElement(dg,{className:cW.mR,paddingSelection:oj.mx.ALL,onBlur:()=>l(!1),focusOnMount:!0,recordingKey:r}):e?n.createElement(n.Fragment,null,n.createElement(dg,{className:i()(cW.oH,cW.aO),paddingSelection:oj.mx.LEFT,onClick:a,recordingKey:r,inputTestId:"padding-left"}),n.createElement(dg,{className:i()(cW.oH,cW.uH),paddingSelection:oj.mx.RIGHT,onClick:a,recordingKey:r,inputTestId:"padding-right"}),n.createElement(dg,{className:i()(cW.T1,cW.aO),paddingSelection:oj.mx.TOP,onClick:a,recordingKey:r,inputTestId:"padding-top"}),n.createElement(dg,{className:i()(cW.T1,cW.uH),paddingSelection:oj.mx.BOTTOM,onClick:a,recordingKey:r,inputTestId:"padding-bottom"})):n.createElement(n.Fragment,null,n.createElement(dg,{className:cW.oH,paddingSelection:oj.mx.HORIZONTAL,onClick:a,recordingKey:r,inputTestId:"padding-horizontal"}),n.createElement(dg,{className:cW.T1,paddingSelection:oj.mx.VERTICAL,onClick:a,recordingKey:r,inputTestId:"padding-vertical"})),s)}function dE({showAllPaddingControls:e,showSinglePaddingControl:t,setShowSinglePaddingControl:l,recordingKey:r,handleClick:a,showAllPaddingControlsToggle:i}){return t?n.createElement(ev.fn,{leftInput:n.createElement(dg,{paddingSelection:oj.mx.ALL,onBlur:()=>l(!1),focusOnMount:!0,recordingKey:r}),rightInput:null,icon:i,leftLabel:n.createElement(P.Tx,{id:"fullscreen.properties_panel.section_autoLayout.label_padding"}),rightLabel:null}):e?n.createElement(n.Fragment,null,n.createElement(ev.fn,{leftInput:n.createElement(dg,{paddingSelection:oj.mx.LEFT,onClick:a,recordingKey:r}),rightInput:n.createElement(dg,{paddingSelection:oj.mx.TOP,onClick:a,recordingKey:r}),icon:i,leftLabel:n.createElement(P.Tx,{id:"fullscreen.properties_panel.section_autoLayout.label_padding"}),rightLabel:null}),n.createElement(ev.fn,{leftInput:n.createElement(dg,{paddingSelection:oj.mx.RIGHT,onClick:a,recordingKey:r}),rightInput:n.createElement(dg,{paddingSelection:oj.mx.BOTTOM,onClick:a,recordingKey:r}),icon:null,leftLabel:null,rightLabel:null})):n.createElement(ev.fn,{leftInput:n.createElement(dg,{paddingSelection:oj.mx.HORIZONTAL,onClick:a,recordingKey:r,inputTestId:"padding-horizontal"}),rightInput:n.createElement(dg,{paddingSelection:oj.mx.VERTICAL,onClick:a,recordingKey:r,inputTestId:"padding-vertical"}),icon:i,leftLabel:n.createElement(P.Tx,{id:"fullscreen.properties_panel.section_autoLayout.label_padding"}),rightLabel:null})}function dg({className:e,paddingSelection:t,recordingKey:l,inputTestId:r,onClick:a,onBlur:i,focusOnMount:s}){let o=(0,oj.Wx)(),c=(0,oj.Y9)();return n.createElement(c0.s,{outerClassName:e,paddingSelection:t,focusOnMount:s,onFocus:()=>V.Qa7.setFocusStackPanelInput(t,!0),onBlur:e=>{V.Qa7.setFocusStackPanelInput(t,!1),null==i||i(e)},onMouseEnter:()=>c(t,!0),onMouseLeave:()=>c(t,!1),onClick:a,onScrubBegin:()=>o(t,!0),onScrubEnd:()=>o(t,!1),onNudge:()=>V.glU.temporarilyHideOverlay(V.hJs.SELECTION),recordingKey:m.Pt(l,"stackPadding",oj.mx[t]),inputTestId:r,source:"panel"})}var dy=l(7723);let dv="template-controls-picker";var db=l(929077);function df(){let{sceneNodesToEdit:e,description:t}=(0,rc.R)(e=>({sceneNodesToEdit:(0,nU.F4)(e),description:e.mirror.selectionProperties.description})),l="string"==typeof t?t:"",r=n.useCallback(t=>{ek.l7.user("set-description",()=>{for(let l of e)l.setDescriptionRich(t)})},[e]),a=n.useCallback(()=>{F.Y5.commit()},[]);return n.createElement("div",{className:"template_controls_menu--descriptionContainer--pRK0M"},n.createElement(db.A,{description:l,isViewOnly:!1,placeholder:(0,P.t)("design_systems.template_panel.template_placeholder"),onBlur:a,onSubmit:r}))}function dS(){let e=(0,ee.wA)(),t=(0,ee.d4)(e=>e.pickerShown),l=new y.Mi(null==t?void 0:t.initialX,null==t?void 0:t.initialY);return(null==t?void 0:t.id)!==dv?null:n.createElement(ez.vx,{autoflowHeight:!0,headerSize:"small",initialPosition:l,initialWidth:320,onClose:()=>{e(k.XE())},scrollOverflow:!1,title:(0,P.t)("design_systems.template_panel.template_controls")},n.createElement(df,null))}var dT=l(400439),dw=l(832039),dP=l(691151),dk=l(999918);let dI=n.memo(function(){let{containingTemplate:e,pickerShown:t,templateDescription:l}=(0,rc.R)(e=>({containingTemplate:(0,ej._k)(e),pickerShown:e.pickerShown,templateDescription:e.mirror.selectionProperties.description??""})),r=(0,ee.d4)(ec.Dr),a=(0,ee.d4)(ec.cB),i=n.useRef(null),s=(0,ee.wA)(),o=n.useCallback((e,t,l=ep.qo)=>{if(!i)return;let n=q.findDOMNode(i.current),r=(0,ep.cn)(n,l);s(k.u1({id:t,initialX:r.x,initialY:r.y})),s(C.sw()),s(k.Uv())},[s]),c=n.useCallback(e=>{(null==t?void 0:t.id)===dv?s(k.XE()):o(e,dv,320)},[t,s,o]);return e&&e.isAlive()?n.createElement(eg.Zk,{ref:i},n.createElement(eg.fI,{className:ss.LO},n.createElement(dy.R,{guid:e.guid,value:e.name,canEdit:!0,icon:n.createElement(ew.B,{svg:dP.A,className:dw.Kk}),editAction:"rename-template"}),n.createElement("span",{className:dT.MC},n.createElement(eI.YW,{className:dT.UW,selected:(null==t?void 0:t.id)===dv,onClick:c,onMouseDown:e=>e.stopPropagation(),"data-tooltip-type":ed.Ib.TEXT,"data-tooltip":(0,P.t)("design_systems.template_panel.template_controls"),svg:dk.A,recordingKey:"templateControls"}))),n.createElement(e_.n,{description:l}),r&&a&&n.createElement(eE.x,null),n.createElement(dS,null)):null});var dC=l(509453),dN=l(333483);function dA({onExpand:e}){return n.createElement(eg.Zk,{"data-testid":"toggle-simplified-panels",className:dN.aW},n.createElement(dC.z,{onClick:e,recordingKey:"toggleSimplifiedPanels"},n.createElement(P.Tx,{id:"design_systems.component_properties.show_more_properties"})))}var dx=l(968399),dL=l(96225);let dM=(0,s.jz)(rF.uj0);class dO extends m.o6{constructor(){super(...arguments),this.state={panelState:ti.GR.DEFAULT_EXPANDED,width:U.R.propertiesPanelSplitPosition},this.onMouseDown=m.cZ(this,"mousedown",()=>{F.Y5.deselectProperty(),this.props.pickerShown&&this.props.pickerShown.id.startsWith(x.Yr)&&c.zl.get(tx.ik)||this.props.dispatch(k.XE()),this.props.dispatch((0,I.vq)()),this.props.dispatch(C.sw()),this.props.dispatch(k.Uv())}),this.onContextMenu=e=>{let t=e.target;if(t){let l=t.tagName,n=t.type;l&&"INPUT"===l.toUpperCase()&&n&&"TEXT"===n.toUpperCase()||t.isContentEditable||e.preventDefault()}},this.showCreateStyleModal=({styleType:e,inheritStyleKeyField:t,nodeId:l,rowLeft:n,rowTop:r})=>{this.props.dispatch(C.sw()),this.props.dispatch(C.Zs({rowLeft:n,rowTop:r,styleType:e,inheritStyleKeyField:t,nodeId:l}))},this._stylePreviewThumbnail=new Q.H4(()=>{var e;let t=(0,$.IW)(this.props.stylePreviewShown),l=null==(e=this.props.openFile)?void 0:e.canEdit,r=!!t||!l||this.props.appModel.isReadOnly;return n.createElement(tu,{key:"style-preview-panel",selectedStyleProperties:this.props.selectedStyleProperties,isInspectPanel:this.props.propertiesPanelTab===V.FAf.INSPECT,stylePreviewShown:this.props.stylePreviewShown,externalStyle:t,isRenaming:this.props.library.isRenamingSelectedStyle,viewOnly:r,dispatch:this.props.dispatch,recordingKey:m.Pt(this.props,"stylePreviewPanel")})}),this.onCloseStylePreviewModal=()=>{V.glU.selectStyle(v.n3.INVALID,v.IA.INVALID),this.props.dispatch(C.sw()),this.props.dispatch((0,N.B)())},this.renderStylePreviewModal=()=>{var e;if(!this.props.stylePreviewShown.isShown||![V.FAf.DESIGN,V.FAf.SITE,V.FAf.INSPECT].includes(this.props.propertiesPanelTab))return;let t=this.props.selectedStyleProperties,l=new y.Mi(this.props.stylePreviewShown.rowLeft-ti.tA,this.props.stylePreviewShown.rowTop);if(this.props.stylePreviewShown.isCreating){let{styleType:e,inheritStyleKeyField:t,styleNameInputPrefix:r}=this.props.stylePreviewShown;return n.createElement(to,{recordingKey:"createStyleModal",initialPosition:l,styleNameInputPrefix:r,styleType:e,inheritStyleKeyField:t})}{let r=!(0,R.eE)(this.props.stylePreviewShown.style,this.props.openFile),a=r||!(null==(e=this.props.openFile)?void 0:e.canEdit)||this.props.appModel.topLevelMode===Y.lyf.BRANCHING,i=(0,w.dI)(t.guid);if(!(i&&this.props.library.local.styles[i]&&!this.props.library.local.styles[i].is_soft_deleted)&&!r||!this.props.selectedStyleProperties.guid)return;return n.createElement(ta.zK.Provider,{value:ta.zM.EDIT_STYLE},n.createElement(ez.vx,{title:this.getStylePreviewThumbnailTitle(t.styleType,a),key:(0,$.Gj)(this.props.stylePreviewShown.style),headerSize:"small",initialWidth:ti.tA,initialPosition:l,onClose:this.onCloseStylePreviewModal,recordingKey:m.Pt(this.props,"modal"),dragHeaderOnly:!0},n.createElement("div",{className:ts.FY},this._stylePreviewThumbnail.render({isVisible:!0}),this._externalStyleLink.render({isVisible:r}))))}},this._externalStyleLink=new Q.H4(()=>n.createElement(iR,{stylePreviewShown:this.props.stylePreviewShown,user:this.props.user})),this._framePresetPanel=new Q.H4(()=>n.createElement(iD.nl,{key:"frame-presets",dispatch:this.props.dispatch,expandedFramePresetType:this.props.expandedFramePresetType,recordingKey:"framePresetPanel"})),this._pencilToolPanel=new Q.H4(()=>n.createElement(sQ,{key:"pencilToolPanel",id:"pencilToolPanel",openFile:this.props.openFile,recordingKey:"pencilToolPanel"})),this._canvasBackgroundPanel=new Q.H4(()=>{let e=this.props.selectionProperties;return n.createElement(iS,{key:"canvas-background",backgroundColor:e.backgroundColor,backgroundEnabled:e.backgroundEnabled,backgroundOpacity:e.backgroundOpacity,exportBackgroundDisabled:e.exportBackgroundDisabled,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,modalShown:this.props.modalShown,editModeType:this.props.appModel.activeCanvasEditModeType,pickerShown:this.props.pickerShown,currentTool:this.props.appModel.currentTool,colorFormat:this.props.colorFormat,library:this.props.library,openFile:this.props.openFile,recordingKey:"canvasBackgroundPanel",currentSelectedProperty:this.props.appModel.currentSelectedProperty,currentSelectedGradientStop:this.props.appModel.currentSelectedGradientStop,defaultColor:G.rC,sceneGraphSelection:this.props.sceneGraphSelection,selectedStyleProperties:this.props.selectedStyleProperties,hasExports:!!e.exportSettings&&(0,H._W)(e.exportSettings,[]).length>0})}),this._viewOnlyFlowsPanel=new Q.H4(()=>n.createElement(th.A,{viewOnly:!0})),this._localStylesPanel=new Q.H4(e=>n.createElement(a2,{key:e,scrollContainer:this.scrollContainer,recordingKey:e})),this._transformPanel=new Q.H4(()=>{var e;return n.createElement(ij.zq,{key:"transform",propertiesPanelState:this.state.panelState,recordingKey:"transformPanel",pickerShown:this.props.pickerShown,openFileKey:(null==(e=this.props.openFile)?void 0:e.key)||null,canEditConstraints:this.props.isUI3&&this.shouldShowConstraintsResizingPanel(),onlyShowXYInputsRow:this.props.isUI3&&this.state.panelState===ti.GR.DEFAULT_SIMPLIFIED})}),this._vectorPanel=new Q.H4(()=>{let e=this.selectionProperties(),t=this.props.isUI3;return n.createElement(ij.Ss,{key:"vector-transform",x:e.x,y:e.y,cornerRadius:e.cornerRadius,handleMirroring:e.handleMirroring,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,recordingKey:"vectorTransformPanel",isUI3:t})}),this._liveObjectPanel=new Q.H4(()=>n.createElement(sN.cI,{key:"live-object",recordingKey:"liveObjectPanel",pasteSources:this.props.selectionProperties.pasteSources})),this._instancePanel=new Q.H4(()=>{let e=this.props.selectionProperties;return n.createElement(iF._,{key:"instance",symbolGUIDsBackingSelection:e.symbolGUIDsBackingSelection,resettableInstanceOverridesMap:e.resettableInstanceOverrides,stateGroupSelectionInfo:e.stateGroupSelectionInfo,recordingKey:"instancePanel"})}),this._constraintsResizingPanel=new Q.H4(()=>{var e;return n.createElement(ik,{key:"constraints",openFileKey:(null==(e=this.props.openFile)?void 0:e.key)||null,dropdownShown:this.props.dropdownShown,recordingKey:"constraintsPanel"})}),this._interactionsPanel=new Q.H4(()=>n.createElement(s2.y7,{key:"interactions"})),this._stackPanel=new Q.H4(()=>n.createElement(dl,{key:"stack",onlyShowResizingRow:this.props.isUI3&&this.state.panelState===ti.GR.DEFAULT_SIMPLIFIED,onlyStacksSelected:this.props.shownPanels[V.ibQ.STACK_ITEM],recordingKey:"stackPanel"})),this._removeGroupFillAndStrokePanel=new Q.H4(()=>n.createElement(sK,{key:"remove-group-fill-stroke"})),this._maskPanel=new Q.H4(()=>{let e=this.selectionProperties();return n.createElement(sM,{key:"mask",maskType:e.maskType,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,recordingKey:"maskPanel"})}),this._componentPropertiesPanel=new Q.H4(()=>n.createElement(e7,{key:"componentProperties",recordingKey:"propsPanel"})),this._componentPanel=new Q.H4(()=>n.createElement(eh.cu,{key:"component",recordingKey:"componentPanel"})),this._templatePropertiesPanel=new Q.H4(()=>n.createElement(t_,{key:"templateProperties",recordingKey:"templatePropsPanel"})),this._templatePanel=new Q.H4(()=>n.createElement(dI,{key:"template"})),this._gridsPanel=new Q.H4(()=>n.createElement(ti.tC,{key:"grids",selectionProperties:this.props.selectionProperties})),this._layerPanel=new Q.H4(()=>{let e=this.props.selectionProperties;return this.props.isUI3?n.createElement(sI,{recordingKey:"appearancePanel"}):n.createElement(su,{key:"layer",blendMode:e.blendMode,opacity:e.opacity,visible:e.visible,variableConsumptionInfo:e.variableConsumptionInfo,recordingKey:"layerPanel"})}),this._localVariablesPanel=new Q.H4(()=>n.createElement(il,{key:"local-variables"})),this._typePanel=new Q.H4(()=>n.createElement(ti.gc,{key:"type",selectionProperties:this.props.selectionProperties})),this._selectionPaints=new Q.H4(()=>n.createElement(sO.UA,{key:"selection-paints",selectionPaints:this.props.selectionPaints,recordingKey:"selectionPaintsPanel",dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,sceneGraphSelection:this.props.sceneGraphSelection,currentSelectedGradientStop:this.props.appModel.currentSelectedGradientStop,pickerShown:this.props.pickerShown,stylePickerListLayout:this.props.stylePickerListLayout,currentTool:this.props.appModel.currentTool,colorFormat:this.props.colorFormat,editModeType:this.props.appModel.activeCanvasEditModeType,defaultColor:G.rC,library:this.props.library,openFile:this.props.openFile,isUI3:this.props.isUI3})),this._fillPanel=new Q.H4(()=>{let e;return this.props.selectionProperties.numSelectedByType&&(e=(0,tz.aZ)(V.rrT.FILL,this.props.selectionProperties.numSelectedByType)),n.createElement(ti.B8,{key:"fill",selectionProperties:this.props.selectionProperties,variableScopes:e})}),this._strokePanel=new Q.H4(()=>{let e=this.props.selectionProperties;return n.createElement(sO.$p,{key:"stroke",stylePickerShown:this.props.stylePickerShown,strokePanelMode:this.props.strokePanelMode,strokePanelTerminalPointCount:this.props.strokePanelTerminalPointCount,strokePaints:e.strokePaints,borderSharedWeight:e.borderSharedWeight,strokeWeight:e.strokeWeight,strokeAlign:e.strokeAlign,strokeCap:e.strokeCap,strokeJoin:e.strokeJoin,miterLimitAngle:e.miterLimitAngle,connectorLineStyle:e.connectorLineStyle,leftEndCap:e.leftEndCap,rightEndCap:e.rightEndCap,maxStrokeWeight:e.maxStrokeWeight,dashPattern:e.dashPattern,dashCap:e.dashCap,terminalCap:e.terminalCap,arcRadius:e.arcRadius,arcSweep:e.arcSweep,numSelectedByType:e.numSelectedByType,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,modalShown:this.props.modalShown,pickerShown:this.props.pickerShown,pickerInStyleCreationShown:this.props.pickerInStyleCreationShown,stylePickerListLayout:this.props.stylePickerListLayout,currentSelectedProperty:this.props.appModel.currentSelectedProperty,currentSelectedGradientStop:this.props.appModel.currentSelectedGradientStop,currentTool:this.props.appModel.currentTool,colorFormat:this.props.colorFormat,editModeType:this.props.appModel.activeCanvasEditModeType,defaultColor:G.Em,inheritStyleKey:e.inheritFillStyleKeyForStroke||null,inheritStyleID:e.styleIdForStrokeFill||null,library:this.props.library,sceneGraphSelection:this.props.sceneGraphSelection,selectedStyleProperties:this.props.selectedStyleProperties,openFile:this.props.openFile,recordingKey:"strokePanel",isPanelBodyCollapsedAtom:null})}),this._effectsPanel=new Q.H4(()=>n.createElement(ti.w5,{key:"effects",selectionProperties:this.props.selectionProperties})),this._slidesShadowPanel=new Q.H4(()=>n.createElement(n9,{recordingKey:"slidesShadowPanel"})),this._exportPanelInspectTab=new Q.H4(()=>{let e=this.selectionProperties(),t=this.props.openFile,l=(0,J.Nf)(this.props.appModel);return n.createElement(iC.LI,{key:"export",title:this.isReadOnlyNonInspect()?(0,P.t)("fullscreen.properties_panel.export"):(0,P.t)("fullscreen.properties_panel.presets"),standalone:!0,openFile:t,singleNodeName:iC.LI.singleNodeNameFrom(e),numSelected:e.numSelected,exportSettings:e.exportSettings,sceneGraphSelection:this.props.sceneGraphSelection,currentPage:l,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,currentSelectedProperty:this.props.appModel.currentSelectedProperty,pickerShown:this.props.pickerShown,recordingKey:"exportsPanel",saveAsState:this.props.saveAsState,panelWidth:sJ.iP})}),this._exportPanel=new Q.H4(()=>{let e=this.props.selectionProperties,t=(0,J.Nf)(this.props.appModel);return n.createElement(iC.LI,{key:"export",openFile:this.props.openFile,singleNodeName:iC.LI.singleNodeNameFrom(e),numSelected:e.numSelected,exportSettings:e.exportSettings,sceneGraphSelection:this.props.sceneGraphSelection,currentPage:t,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,currentSelectedProperty:this.props.appModel.currentSelectedProperty,pickerShown:this.props.pickerShown,recordingKey:"exportsPanel",saveAsState:this.props.saveAsState,panelWidth:sJ.iP})}),this._pluginPanel=new Q.H4(()=>{var e,t;let l=this.selectionProperties();return n.createElement(sZ.Q,{key:"plugin",pluginRelaunchData:l.pluginRelaunchData,localPlugins:this.props.localPlugins,publishedPlugins:this.props.publishedPlugins,allSavedPlugins:this.props.allSavedPlugins.plugins,orgEntity:(0,D.Jl)(this.props),dispatch:this.props.dispatch,openFileKey:(null==(e=this.props.openFile)?void 0:e.key)||null,editorType:(null==(t=this.props.openFile)?void 0:t.editorType)?(0,Z.wN)(this.props.openFile.editorType):null,numSelected:l.numSelected??0,recordingKey:"pluginPanel"})}),this._prototypePanel=new Q.H4(()=>n.createElement(s8.Z0,{key:"prototype",dispatch:this.props.dispatch,selectionProperties:this.selectionProperties(),appModel:this.props.appModel,pickerShown:this.props.pickerShown,dropdownShown:this.props.dropdownShown,currentTool:this.props.appModel.currentTool,colorFormat:this.props.colorFormat,sceneGraphSelection:this.props.sceneGraphSelection,editModeType:this.props.appModel.activeCanvasEditModeType,library:this.props.library,openFile:this.props.openFile,userFlags:this.props.userFlags,recordingKey:"prototypePanel"})),this._scalePanel=new Q.H4(()=>(0,o.kc)().ce_scale_tool_v2?n.createElement(oH,{key:"scale",recordingKey:"scalePanel"}):n.createElement(oD,{key:"scale",recordingKey:"scalePanel"})),this._slidesAlignPanel=new Q.H4(()=>n.createElement(le,{recordingKey:"slidesAlignPanel"})),this._slidesThemePanel=new Q.H4(()=>n.createElement(rr,{recordingKey:"slidesThemePanel"})),this._slidesInstancePanel=new Q.H4(()=>n.createElement(nW,{recordingKey:"slidesInstancePanel"})),this._slidesFillPanel=new Q.H4(()=>n.createElement(nB,{recordingKey:"slidesFillPanel"})),this._slidesOpacityPanel=new Q.H4(()=>n.createElement(n6,{recordingKey:"slidesOpacityPanel"})),this._slidesTypePanel=new Q.H4(()=>n.createElement(ao,{recordingKey:"slidesTypePanel"})),this._slidesLinkPanel=new Q.H4(()=>n.createElement(n4,{recordingKey:"slidesLinkPanel"})),this._slidesBorderPanel=new Q.H4(()=>n.createElement(lz,{recordingKey:"slidesBorderPanel"})),this._slidesCornerPanel=new Q.H4(()=>n.createElement(l1,{recordingKey:"slidesCornerPanel"})),this._slidesAnimationPanel=new Q.H4(()=>n.createElement(lE,{selection:this.props.sceneGraphSelection})),this._slidesEmbeddablePrototypePanel=new Q.H4(()=>n.createElement(l9,{selection:this.props.sceneGraphSelection})),this._slidesInteractiveWidgetPanel=new Q.H4(()=>n.createElement(nX,{selection:this.props.sceneGraphSelection})),this._slidesSelectionPaints=new Q.H4(()=>n.createElement(sO.UA,{key:"selection-paints",selectionPaints:this.props.selectionPaints,recordingKey:"selectionPaintsPanel",dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,sceneGraphSelection:this.props.sceneGraphSelection,currentSelectedGradientStop:this.props.appModel.currentSelectedGradientStop,pickerShown:this.props.pickerShown,stylePickerListLayout:this.props.stylePickerListLayout,currentTool:this.props.appModel.currentTool,colorFormat:this.props.colorFormat,editModeType:this.props.appModel.activeCanvasEditModeType,defaultColor:G.rC,library:this.props.library,openFile:this.props.openFile,isUI3:this.props.isUI3,customColorPicker:t6,hideCustomColorPickerFillTypeToggle:!1})),this._sitesPositionPanel=new Q.H4(()=>n.createElement(tE.Qc,{recordingKey:"positionPanel"})),this._sitesLinkPanel=new Q.H4(()=>n.createElement(tE.rC,{key:"link"})),this._sitesPageMetadataPanel=new Q.H4(()=>n.createElement(tE.li,{key:"pageMetadata"})),this._sitesCanvasOverlayPanel=new Q.H4(()=>n.createElement(tE.rf,{key:"overlayPreview"})),this._sitesAccessibilityPanel=new Q.H4(()=>n.createElement(tE.l,{key:"accessibility"})),this._sitesHTMLWidgetPanel=new Q.H4(()=>n.createElement(tE.Mr,{key:"htmlWidget"})),this._sitesInteractionsPanel=new Q.H4(()=>n.createElement(tE.GO,{key:"interactions"})),this.isStyleSelected=()=>this.props.selectedStyleProperties&&!!this.props.selectedStyleProperties.guid,this.isLiveObjectSelected=()=>(this.props.selectionProperties.pasteSources||[]).length>0,this.selectionProperties=()=>this.isStyleSelected()?this.props.selectedStyleProperties:this.props.selectionProperties,this.shouldShowAlignControls=()=>(0,sJ.d6)(this.props.shownPanels),this.shouldRenderUI3ToolbarItems=()=>this.props.isUI3,this.shouldShowConstraintsResizingPanel=()=>{let e=this.props.shownPanels;return!this.scaleShouldHideOtherPanels()&&e[V.ibQ.CONSTRAINTS_ITEM]},this.shouldShowInteractionsPanel=()=>!!this.props.selectionProperties.isValidPrototypingSourceSelected,this.isStateSelected=()=>{var e;return(null==(e=this.props.selectionProperties.stateGroupSelectionInfo)?void 0:e.mode)===V.iCO.STATE},this.shouldShowLocalVariablesPanel=()=>{let e=(0,ah.P)(this.props.selectedView),t=this.props.shownPanels;return!this.scaleShouldHideOtherPanels()&&!this.props.appModel.isReadOnly&&0===Object.keys(this.props.sceneGraphSelection).length&&!t[V.ibQ.FRAME_PRESETS]&&!e},this.shouldShowSelectionPaintsPanel=()=>{let e=this.props.shownPanels;return(0,sJ.fI)(e,this.scaleShouldHideOtherPanels(),this.props.selectionPaints)},this.shouldShowSlidesSelectionPaintsPanel=()=>{let{numSelected:e,numSelectedByType:t}=this.props.selectionProperties;return!(1===e&&t&&t.SLIDE)&&this.shouldShowSelectionPaintsPanel()},this.shouldShowSlidesLinkPanel=()=>{let{numSelectedByType:e}=this.props.selectionProperties;return!!e&&(e.TEXT??0)>0&&(0,O.OU)(e,["TEXT"])},this.shouldShowSlidesAlignPanel=()=>{let{numSelectedByType:e}=this.props.selectionProperties,t=e&&(0,O.vx)(e,"SLIDE");return this.shouldShowAlignControls()&&!t},this.doesNotHaveAnySelectedText=()=>{let{numSelectedByType:e}=this.props.selectionProperties;return!((null==e?void 0:e.TEXT)&&e.TEXT>0)},this.shouldShowStackPanel=e=>{let t=this.props.shownPanels;return(0,sJ.IY)(t,this.scaleShouldHideOtherPanels(),this.props.selectionProperties,this.isStyleSelected()?this.props.selectedStyleProperties:void 0,e)},this.scaleShouldHideOtherPanels=()=>this.props.shownPanels[V.ibQ.SCALE_ITEM]&&!(0,o.kc)().ee_scale_tool_show_all_panels,this.shouldShowExportPanel=()=>this.props.openFile&&!(0,z.Pe)(this.props.openFile)&&!(0,B.MP)(),this.shouldShowLocalStylesPanel=()=>{let e=(0,ah.P)(this.props.selectedView);return!this.scaleShouldHideOtherPanels()&&0===Object.keys(this.props.sceneGraphSelection).length&&!this.props.shownPanels[V.ibQ.FRAME_PRESETS]&&!e},this.renderSimplifiedDesignPanels=()=>{let e=this.props.shownPanels;if((0,u.Im)(e)||Object.keys(e).every(t=>!e[parseInt(t)])){let e=Error("Rendering simplified design tab with no shownPropertiesPanels");(0,h.$D)(_.e.FIGJAM_CORE,e)}return n.createElement(S.i,{displayAs:S.C.Block},0===Object.keys(this.props.sceneGraphSelection).length&&n.createElement(ia.Mw,{panelName:ia.ON.DESIGN}),!this.props.isUI3&&this.shouldShowAlignControls()&&n.createElement(ir.AV,{recordingKey:"alignPanel"}),this.shouldRenderUI3ToolbarItems()&&n.createElement(dx._i,{recordingKey:"toolbarView",shouldShowComponentPropertiesPanel:this.shouldShowComponentPropertiesPanel(),shouldShowInstancePanel:this.shouldShowInstancePanel()}),this.props.isUI3&&this._instancePanel.render({isVisible:!this.scaleShouldHideOtherPanels()&&!this.isLiveObjectSelected()}),this._transformPanel.render({isVisible:!0}),this.props.isUI3&&this._stackPanel.render({isVisible:this.shouldShowStackPanel(this.props.hasMergedDimensionsAndAutolayout)}),this._scalePanel.render({isVisible:e[V.ibQ.SCALE_ITEM]}),!this.props.isUI3&&this._instancePanel.render({isVisible:!this.scaleShouldHideOtherPanels()&&!this.isLiveObjectSelected()}),this._constraintsResizingPanel.render({isVisible:!this.props.isUI3&&this.shouldShowConstraintsResizingPanel()}),(0,X.Zd)()&&this._interactionsPanel.render({isVisible:this.shouldShowInteractionsPanel()}),!this.props.isUI3&&this._layerPanel.render({isVisible:e[V.ibQ.LAYER_ITEM]}),this.state.panelState===ti.GR.DEFAULT_SIMPLIFIED&&n.createElement(dA,{onExpand:()=>{this.setState({panelState:ti.GR.OVERRIDDEN_EXPANDED})}}),this.state.panelState===ti.GR.OVERRIDDEN_EXPANDED&&n.createElement(n.Fragment,null,this.props.isUI3&&this._layerPanel.render({isVisible:e[V.ibQ.LAYER_ITEM]}),n.createElement(iI.Q,{selection:this.props.sceneGraphSelection,shownPanels:this.props.shownPanels,scaleShouldHideOtherPanels:this.scaleShouldHideOtherPanels()}),this._templatePanel.render({isVisible:e[V.ibQ.TEMPLATE_ITEM]}),this._componentPanel.render({isVisible:e[V.ibQ.COMPONENT_ITEM]}),this._vectorPanel.render({isVisible:e[V.ibQ.VECTOR_ITEM]}),!this.props.isUI3&&this._stackPanel.render({isVisible:this.shouldShowStackPanel(this.props.hasMergedDimensionsAndAutolayout)}),this._maskPanel.render({isVisible:e[V.ibQ.MASK_ITEM]}),!this.props.isUI3&&this._gridsPanel.render({isVisible:e[V.ibQ.GRIDS_ITEM]}),this._typePanel.render({isVisible:e[V.ibQ.TYPE_ITEM]}),this._canvasBackgroundPanel.render({isVisible:e[V.ibQ.CANVAS_ITEM]}),this._removeGroupFillAndStrokePanel.render({isVisible:e[V.ibQ.REMOVE_GROUP_BACKGROUND_ITEM]}),this._fillPanel.render({isVisible:e[V.ibQ.FILL_ITEM]}),this._strokePanel.render({isVisible:e[V.ibQ.STROKE_ITEM]}),!this.props.isUI3&&this._selectionPaints.render({isVisible:this.shouldShowSelectionPaintsPanel()}),(0,X.Zd)()&&this._prototypePanel.render({isVisible:!0}),this._effectsPanel.render({isVisible:e[V.ibQ.EFFECTS_ITEM]}),this.props.isUI3&&this._selectionPaints.render({isVisible:this.shouldShowSelectionPaintsPanel()}),this.props.isUI3&&this._gridsPanel.render({isVisible:e[V.ibQ.GRIDS_ITEM]}),this.props.isUI3&&this.shouldShowExportPanel()&&this._exportPanel.render({isVisible:e[V.ibQ.EXPORT_ITEM]}),this._pluginPanel.render({isVisible:!this.scaleShouldHideOtherPanels()})),!this.props.isUI3&&this.shouldShowExportPanel()&&this._exportPanel.render({isVisible:e[V.ibQ.EXPORT_ITEM]}),this._pluginPanel.render({isVisible:!this.scaleShouldHideOtherPanels()}))},this.renderDesignPanels=()=>{let e=this.props.shownPanels;return(((0,u.Im)(e)||Object.keys(e).every(t=>!e[parseInt(t)]))&&!window.figmaPerfTesting&&!(0,E.Lg)()&&!(0,E.nl)()&&(0,h.x1)("PropertiesPanel","Rendering design tab with no shownPropertiesPanels",{isEmpty:(0,u.Im)(e),shouldRenderInspectTab:this.shouldRenderInspectTab()}),e[V.ibQ.FRAME_PRESETS])?n.createElement(S.i,{displayAs:S.C.Block},this._framePresetPanel.render({isVisible:!0})):e[V.ibQ.PENCIL_TOOL]?n.createElement(S.i,{displayAs:S.C.Block},this._pencilToolPanel.render({isVisible:!0})):n.createElement(S.i,{displayAs:S.C.Block},0===Object.keys(this.props.sceneGraphSelection).length&&n.createElement(ia.Mw,{panelName:ia.ON.DESIGN}),!this.props.isUI3&&this.shouldShowAlignControls()&&n.createElement(ir.AV,{recordingKey:"alignPanel"}),this.shouldRenderUI3ToolbarItems()&&n.createElement(dx._i,{recordingKey:"toolbarView",shouldShowComponentPropertiesPanel:this.shouldShowComponentPropertiesPanel(),shouldShowInstancePanel:this.shouldShowInstancePanel()}),this.props.isUI3&&this._componentPropertiesPanel.render({isVisible:this.shouldShowComponentPropertiesPanel()}),this.props.isUI3&&this._componentPanel.render({isVisible:e[V.ibQ.COMPONENT_ITEM]}),this.props.isUI3&&this._instancePanel.render({isVisible:this.shouldShowInstancePanel()}),this._transformPanel.render({isVisible:this.props.isUI3&&this.shouldShowAlignControls()||e[V.ibQ.TRANSFORM_ITEM]}),this.props.isUI3&&this._stackPanel.render({isVisible:this.shouldShowStackPanel(this.props.hasMergedDimensionsAndAutolayout)}),this._scalePanel.render({isVisible:e[V.ibQ.SCALE_ITEM]}),n.createElement(iI.Q,{selection:this.props.sceneGraphSelection,shownPanels:this.props.shownPanels,scaleShouldHideOtherPanels:this.scaleShouldHideOtherPanels()}),this._templatePanel.render({isVisible:e[V.ibQ.TEMPLATE_ITEM]}),this._templatePropertiesPanel.render({isVisible:e[V.ibQ.TEMPLATE_ITEM]}),!this.props.isUI3&&this._componentPanel.render({isVisible:e[V.ibQ.COMPONENT_ITEM]}),!this.props.isUI3&&this._componentPropertiesPanel.render({isVisible:e[V.ibQ.COMPONENT_ITEM]&&!this.isStateSelected()}),this._liveObjectPanel.render({isVisible:this.isLiveObjectSelected()}),!this.props.isUI3&&this._instancePanel.render({isVisible:this.shouldShowInstancePanel()}),this._vectorPanel.render({isVisible:e[V.ibQ.VECTOR_ITEM]}),!this.props.isUI3&&this._stackPanel.render({isVisible:this.shouldShowStackPanel(this.props.hasMergedDimensionsAndAutolayout)}),this._constraintsResizingPanel.render({isVisible:!this.props.isUI3&&this.shouldShowConstraintsResizingPanel()}),this._maskPanel.render({isVisible:e[V.ibQ.MASK_ITEM]}),!this.props.isUI3&&this._gridsPanel.render({isVisible:e[V.ibQ.GRIDS_ITEM]}),(0,X.Zd)()&&this._interactionsPanel.render({isVisible:this.shouldShowInteractionsPanel()}),this._layerPanel.render({isVisible:e[V.ibQ.LAYER_ITEM]}),this._typePanel.render({isVisible:e[V.ibQ.TYPE_ITEM]}),this._canvasBackgroundPanel.render({isVisible:e[V.ibQ.CANVAS_ITEM]}),this._removeGroupFillAndStrokePanel.render({isVisible:e[V.ibQ.REMOVE_GROUP_BACKGROUND_ITEM]}),this._fillPanel.render({isVisible:e[V.ibQ.FILL_ITEM]}),this._strokePanel.render({isVisible:e[V.ibQ.STROKE_ITEM]}),!this.props.isUI3&&this._selectionPaints.render({isVisible:this.shouldShowSelectionPaintsPanel()}),(0,X.Zd)()&&this._prototypePanel.render({isVisible:!0}),this._effectsPanel.render({isVisible:e[V.ibQ.EFFECTS_ITEM]}),this.props.isUI3&&this._selectionPaints.render({isVisible:this.shouldShowSelectionPaintsPanel()}),this._localVariablesPanel.render({isVisible:this.shouldShowLocalVariablesPanel()}),this._localStylesPanel.render({isVisible:this.shouldShowLocalStylesPanel(),valueArgs:["local-styles"]}),this.props.isUI3&&this._gridsPanel.render({isVisible:e[V.ibQ.GRIDS_ITEM]}),this.shouldShowExportPanel()&&this._exportPanel.render({isVisible:e[V.ibQ.EXPORT_ITEM]}),this._pluginPanel.render({isVisible:!this.scaleShouldHideOtherPanels()}))},this.renderSlidesPanels=()=>{let e=this.props.shownPanels,t=this.props.selectionProperties.numSelectedByType;if(e[V.ibQ.PENCIL_TOOL])return n.createElement(S.i,{displayAs:S.C.Block},this._pencilToolPanel.render({isVisible:!0}));let l=!!t&&(t.SLIDE??0)>0&&(0,O.OU)(t,["SLIDE"]);return n.createElement(S.i,{displayAs:S.C.Block},this._slidesAlignPanel.render({isVisible:this.shouldShowSlidesAlignPanel()}),this.shouldRenderUI3ToolbarItems()&&n.createElement(dx._i,{recordingKey:"toolbarView",shouldShowComponentPropertiesPanel:this.shouldShowComponentPropertiesPanel(),shouldShowInstancePanel:this.shouldShowInstancePanel(),shouldShowSlidesTypePanel:e[V.ibQ.TYPE_ITEM]}),this._slidesThemePanel.render({isVisible:l}),this._slidesInstancePanel.render({isVisible:this.shouldShowInstancePanel()}),this._slidesTypePanel.render({isVisible:e[V.ibQ.TYPE_ITEM]}),this._slidesFillPanel.render({isVisible:e[V.ibQ.FILL_ITEM]}),this._slidesOpacityPanel.render({isVisible:e[V.ibQ.FILL_ITEM]&&!l}),this._slidesCornerPanel.render({isVisible:e[V.ibQ.STROKE_ITEM]}),this._slidesBorderPanel.render({isVisible:e[V.ibQ.STROKE_ITEM]&&this.doesNotHaveAnySelectedText()}),this._slidesShadowPanel.render({isVisible:e[V.ibQ.EFFECTS_ITEM]}),this._slidesLinkPanel.render({isVisible:e[V.ibQ.TYPE_ITEM]&&this.shouldShowSlidesLinkPanel()}),this._slidesSelectionPaints.render({isVisible:this.shouldShowSlidesSelectionPaintsPanel()}),this._slidesEmbeddablePrototypePanel.render({isVisible:e[V.ibQ.SLIDES_EMBED]}),this._slidesInteractiveWidgetPanel.render({isVisible:e[V.ibQ.SLIDES_INTERACTIVE_WIDGET]}))},this.renderSlidesAnimationPanels=()=>{let e=this.props.shownPanels;return n.createElement(S.i,{displayAs:S.C.Block},this._slidesAnimationPanel.render({isVisible:e[V.ibQ.SLIDES_ANIMATION]}))},this.renderSitesPanels=()=>{let e=this.props.shownPanels;return n.createElement(S.i,{displayAs:S.C.Block},this.shouldRenderUI3ToolbarItems()&&n.createElement(dx._i,{recordingKey:"toolbarView",shouldShowComponentPropertiesPanel:this.shouldShowComponentPropertiesPanel(),shouldShowInstancePanel:this.shouldShowInstancePanel()}),this._sitesCanvasOverlayPanel.render({isVisible:this.shouldShowSitesCanvasOverlayPanel()}),this._componentPropertiesPanel.render({isVisible:this.shouldShowComponentPropertiesPanel()}),this._componentPanel.render({isVisible:e[V.ibQ.COMPONENT_ITEM]}),this._instancePanel.render({isVisible:!this.scaleShouldHideOtherPanels()&&this.shouldShowInstancePanel()}),this._sitesPositionPanel.render({isVisible:this.shouldShowSitesPositionPanel()}),this._transformPanel.render({isVisible:e[V.ibQ.TRANSFORM_ITEM]}),this._stackPanel.render({isVisible:this.shouldShowStackPanel(this.props.hasMergedDimensionsAndAutolayout)}),this._scalePanel.render({isVisible:e[V.ibQ.SCALE_ITEM]}),this._sitesPageMetadataPanel.render({isVisible:this.shouldShowSitesPageMetadataPanel()}),n.createElement(iI.Q,{selection:this.props.sceneGraphSelection,shownPanels:this.props.shownPanels,scaleShouldHideOtherPanels:this.scaleShouldHideOtherPanels()}),this._templatePanel.render({isVisible:e[V.ibQ.TEMPLATE_ITEM]}),this._vectorPanel.render({isVisible:e[V.ibQ.VECTOR_ITEM]}),this._maskPanel.render({isVisible:e[V.ibQ.MASK_ITEM]}),this._layerPanel.render({isVisible:e[V.ibQ.LAYER_ITEM]}),this._typePanel.render({isVisible:e[V.ibQ.TYPE_ITEM]}),this._canvasBackgroundPanel.render({isVisible:e[V.ibQ.CANVAS_ITEM]}),this._removeGroupFillAndStrokePanel.render({isVisible:e[V.ibQ.REMOVE_GROUP_BACKGROUND_ITEM]}),this._selectionPaints.render({isVisible:this.shouldShowSelectionPaintsPanel()}),this._fillPanel.render({isVisible:e[V.ibQ.FILL_ITEM]}),this._strokePanel.render({isVisible:e[V.ibQ.STROKE_ITEM]}),(0,X.Zd)()&&this._prototypePanel.render({isVisible:!0}),this._effectsPanel.render({isVisible:e[V.ibQ.EFFECTS_ITEM]}),this._gridsPanel.render({isVisible:e[V.ibQ.GRIDS_ITEM]}),this._sitesHTMLWidgetPanel.render({isVisible:this.shouldShowSitesHTMLWidgetPanel()}),this._sitesAccessibilityPanel.render({isVisible:this.shouldShowSitesAccessibilityPanel()}),this._localVariablesPanel.render({isVisible:this.shouldShowLocalVariablesPanel()}),this._localStylesPanel.render({isVisible:this.shouldShowLocalStylesPanel(),valueArgs:["local-styles"]}),this._pluginPanel.render({isVisible:!this.scaleShouldHideOtherPanels()}))},this.renderInspectionPanels=()=>{var e,t;let l=null==(e=this.props.openFile)?void 0:e.canEdit,r=this.props.selectionProperties,a=!r.prototypeStartingPointsInfo||(null==(t=r.prototypeStartingPointsInfo)?void 0:t.length)>0,i=0===Object.keys(this.props.sceneGraphSelection).length,s=i&&!l&&a;return n.createElement(L.fu,{name:j.e0.CODE_PANEL},n.createElement(S.i,{displayAs:S.C.Block},n.createElement(ia.Mw,{panelName:ia.ON.INSPECT}),n.createElement(rD.U,{key:"inspection-properties-panel",recordingKey:"inspectionPanel",flowPanel:this._viewOnlyFlowsPanel.render({isVisible:s}),localStylesPanel:this._localStylesPanel.render({isVisible:i,valueArgs:["code-local-styles"]})})))},this.renderPrototypePanels=()=>{let e=this.props.shownPanels;return n.createElement(S.i,{displayAs:S.C.Block},this._sitesLinkPanel.render({isVisible:this.shouldShowSitesLinkPanel()}),this._sitesInteractionsPanel.render({isVisible:this.shouldShowSitesInteractionsPanel()}),this._framePresetPanel.render({isVisible:e[V.ibQ.FRAME_PRESETS]}),this._pencilToolPanel.render({isVisible:e[V.ibQ.PENCIL_TOOL]}),this._prototypePanel.render({isVisible:!e[V.ibQ.FRAME_PRESETS]&&!e[V.ibQ.PENCIL_TOOL]}))},this.shouldRenderInspectTab=()=>this.props.appModel.showUi&&!!this.props.user&&this.props.appModel.isReadOnly,this.onKeyDown=e=>{this.props.selectedStyleProperties&&(0,w.fn)(this.props.selectedStyleProperties.guid)&&(e.event.keyCode===d.Uz.ESCAPE?(e.accept(),V.glU.selectStyle(v.n3.INVALID,v.IA.INVALID)):e.event.keyCode===d.Uz.F&&V.glU.selectStyle(v.n3.INVALID,v.IA.INVALID))},this.scrollContainer=null,this.refMainScrollContainer=e=>{this.scrollContainer=e},this.isReadOnlyNonInspect=()=>this.props.appModel.isReadOnly&&!(0,tc.$A)(this.props.selectedView),this.renderPanelContent=()=>{let e=this.props.appModel.topLevelMode,t=this.props.propertiesPanelTab,l=this.props.appModel.isReadOnly,r=e!==Y.lyf.PREVIEW&&(e!==Y.lyf.BRANCHING||!this.shouldRenderInspectTab())&&e!==Y.lyf.DEV_HANDOFF&&t===V.FAf.DESIGN,a=e!==Y.lyf.PREVIEW&&(e!==Y.lyf.BRANCHING||!this.shouldRenderInspectTab())&&e!==Y.lyf.DEV_HANDOFF&&t===V.FAf.SLIDE,i=e!==Y.lyf.PREVIEW&&(e!==Y.lyf.BRANCHING||!this.shouldRenderInspectTab())&&e!==Y.lyf.DEV_HANDOFF&&t===V.FAf.SLIDE_ANIMATION,s=e===Y.lyf.LAYOUT&&!l&&t===V.FAf.SITE,o=e!==Y.lyf.PREVIEW&&e!==Y.lyf.BRANCHING&&t===V.FAf.PROTOTYPE&&!(0,X.Zd)(),c=e===Y.lyf.PREVIEW&&!this.props.userStateLoaded||t===V.FAf.INSPECT;return r||a||i||s||o||c||t===V.FAf.EXPORT||t===V.FAf.COMMENT||(0,h.x1)("PropertiesPanel","Rendering empty properties panels",{topLevelMode:Y.lyf[e],tab:V.FAf[t],shouldRenderInspectTab:this.shouldRenderInspectTab()}),n.createElement(n.Fragment,null,r&&(this.state.panelState===ti.GR.DEFAULT_EXPANDED?this.renderDesignPanels():this.renderSimplifiedDesignPanels()),a&&this.renderSlidesPanels(),i&&this.renderSlidesAnimationPanels(),s&&this.renderSitesPanels(),o&&this.renderPrototypePanels(),c&&this.renderInspectionPanels(),t===V.FAf.EXPORT&&this._exportPanelInspectTab.render({isVisible:!0}),t===V.FAf.COMMENT&&n.createElement(this.props.commentsPanel,null))},this.onResize=e=>{e=(0,p.qE)(e,dM+1,500),this.setState({width:e}),(0,K.UK)().propertiesPanelSplitPosition.set(e)},this.getRightPanelAnimation=(e,t)=>{if(this.props.isUI3)return;let l={ease:"easeInOut",duration:.2,delay:this.props.isCollapsed?void 0:.05};return this.props.isCollapsed?{initial:{left:`calc(${e}px + ${t})`},animate:{left:`calc(${e}px + ${t})`,display:"block",transitionEnd:{display:"none"}},transition:l}:{initial:{left:0},transition:l}}}componentDidUpdate(e,t){super.componentDidUpdate(e,t);let l=e.selectionProperties.productComponentGUIDBackingInstances,n=this.props.selectionProperties.productComponentGUIDBackingInstances;if(l!==n){let e=ti.GR.DEFAULT_EXPANDED;if(n){let t=this.props.sceneGraph.get(n);(null==t?void 0:t.simplifyInstancePanels)&&(e=ti.GR.DEFAULT_SIMPLIFIED)}this.setState({panelState:e})}}getStylePreviewThumbnailTitle(e,t){if(t)switch(e){case"FILL":return(0,P.t)("design_systems.styles.view_color_style");case"TEXT":return(0,P.t)("design_systems.styles.view_text_style");case"EFFECT":return(0,P.t)("design_systems.styles.view_effect_style");case"GRID":return(0,P.t)("design_systems.styles.view_grid_style");default:return(0,P.t)("design_systems.styles.view_style")}else switch(e){case"FILL":return(0,P.t)("design_systems.styles.edit_color_style");case"TEXT":return(0,P.t)("design_systems.styles.edit_text_style");case"EFFECT":return(0,P.t)("design_systems.styles.edit_effect_style");case"GRID":return(0,P.t)("design_systems.styles.edit_grid_style");default:return(0,P.t)("design_systems.styles.edit_style")}}shouldShowSitesPositionPanel(){return(0,tg.Vj)(this.props.selectedView)&&this.props.shownPanels[V.ibQ.SITES_POSITION_ITEM]}shouldShowSitesLinkPanel(){return(0,tg.Vj)(this.props.selectedView)&&this.props.shownPanels[V.ibQ.SITES_LINK_ITEM]}shouldShowSitesPageMetadataPanel(){return(0,tg.Vj)(this.props.selectedView)&&this.props.shownPanels[V.ibQ.SITES_PAGE_METADATA_ITEM]}shouldShowSitesCanvasOverlayPanel(){return(0,tg.Vj)(this.props.selectedView)&&(0,o.kc)().internal_only_debug_tools}shouldShowSitesAccessibilityPanel(){return(0,tg.Vj)(this.props.selectedView)&&this.props.shownPanels[V.ibQ.SITES_ACCESSIBILITY_ITEM]}shouldShowSitesHTMLWidgetPanel(){return(0,tg.Vj)(this.props.selectedView)&&this.props.shownPanels[V.ibQ.SITES_HTML_WIDGET_ITEM]}shouldShowSitesInteractionsPanel(){return(0,tg.Vj)(this.props.selectedView)&&this.props.shownPanels[V.ibQ.SITES_INTERACTIONS_ITEM]}shouldShowInstancePanel(){return this.props.shownPanels[V.ibQ.INSTANCE_ITEM]&&!this.isLiveObjectSelected()}shouldShowComponentPropertiesPanel(){return this.props.shownPanels[V.ibQ.COMPONENT_ITEM]&&!this.isStateSelected()}renderLoading(e){return n.createElement(tH.vL,{name:"propertiesPanel",focusOnMount:!0,handleKeyDown:this.onKeyDown},n.createElement(b.V,{className:ts.Lp},n.createElement(f.P,{ref:this.refMainScrollContainer,className:i()(ts.ux,ts.KE,x.Dm,{[ts.eu]:e,[ts.Ph]:this.props.isInsetEditorEnabled}),width:sJ.iP,hideScrollbar:!0,scrollingDisabled:!0},n.createElement("div",{className:ts.eh,"data-non-interactive":!0},n.createElement(tm.B,null))),this.props.stylePreviewShown.isShown&&this.renderStylePreviewModal()))}render(){var e;if(this.props.isLoading)return this.renderLoading(this.props.shouldAnimateLoadingState);let t=this.props.selectedStyleProperties&&(0,w.fn)(this.props.selectedStyleProperties.guid),l=!!(this.props.dropdownShown||(null==(e=this.props.pickerShown)?void 0:e.modal)),r=this.props.propertiesPanelTab,a=r===V.FAf.COMMENT,c=!this.isReadOnlyNonInspect(),d=(0,ah.P)(this.props.selectedView),p=!t||!l,u=!a&&p,m=(0,M.ft)(),h=n.createElement("div",{className:a&&c&&!d?ts.By:ts.eh,onMouseDown:m?void 0:this.onMouseDown,onPointerDown:m?this.onMouseDown:void 0,"data-non-interactive":!0},n.createElement(A.j9.Consumer,null,()=>this.renderPanelContent())),_=this.props.isUI3,E=_?this.state.width:sJ.iP+1,y=_?`${(0,s.jz)(rF.M$q)}px`:"var(--spacer-2)",v=this.props.appModel.topLevelMode===Y.lyf.HISTORY,S=_&&this.props.isCollapsed;return n.createElement(g.k,{name:"properties_panel",trackingEnabled:(0,o.kc)().trackable_properties||d&&(0,o.kc)().piper,alsoTrack:()=>{let e=r===V.FAf.DESIGN?"design_view":"slide_view";return{pageId:(0,J.Nf)(this.props.appModel),selectedNodeIds:Object.keys(this.props.sceneGraphSelection),panelMode:d?e:void 0}}},n.createElement(tH.vL,{name:"propertiesPanel",focusOnMount:!a,handleKeyDown:this.onKeyDown},n.createElement(ta.lk.Provider,{value:this.showCreateStyleModal},n.createElement(b.V,{className:i()(ts.Lp,{[ts.R]:!this.props.appModel.showUi,[ts.dn]:S}),style:{width:E}},this.props.shouldShowBackgroundGradient&&!this.props.isInsetEditorEnabled&&n.createElement(T.T,{side:"right"}),n.createElement(dL.X,null,n.createElement(s7.l,{className:i()(ts.ux,x.Dm,{[ts.ew]:this.props.rulersVisible,[ts.Ph]:this.props.isInsetEditorEnabled}),onContextMenu:this.onContextMenu,"data-onboarding-key":"properties-panel",size:E,onResize:this.onResize,side:"left",animation:this.getRightPanelAnimation(E,y),"data-cancel-insertable-resource-drag-and-drop":!0},n.createElement(dR,{showRightSidebarPill:S},this.props.isUI3&&n.createElement(s9.qW,{openFile:this.props.openFile,dropdownShown:this.props.dropdownShown,multiplayer:this.props.multiplayer,user:this.props.user,isIntegration:(0,B.ck)(),selectedView:this.props.selectedView,recordingKey:this.props.recordingKey}),v&&n.createElement(a_.yU,{recordingKey:"versionHistoryView",isUI3:_}),!S&&!v&&n.createElement(s6,{activeTab:r,shouldRenderInspectTab:this.shouldRenderInspectTab(),shouldShowAlignControls:this.shouldShowAlignControls(),isUI3:this.props.isUI3,recordingKey:this.props.recordingKey}),!S&&!v&&(a?h:n.createElement("div",{className:ts.gq},n.createElement(f.P,{enableOverscroll:!0,key:this.props.propertiesPanelTab,ref:this.refMainScrollContainer,className:ts.jG,containerId:ti.rp,hideScrollbar:!u,onContextMenu:this.onContextMenu,scrollingDisabled:a||(t?l:!!this.props.dropdownShown)},h))),this.props.stylePreviewShown.isShown&&this.renderStylePreviewModal())))))))}}function dR({children:e,showRightSidebarPill:t}){let l=(0,r.U1)(),a=(0,W.o3)(W.nt.ui3InsetEditor);return n.createElement("div",{ref:l,className:i()(ts.KE,{[ts.tM]:t,[ts.Ph]:a})},e)}dO.displayName="PropertiesPanel"},5102:(e,t,l)=>{"use strict";l.d(t,{Di:()=>A,H7:()=>N,JQ:()=>x,Uq:()=>P,VL:()=>C,d0:()=>k});var n=l(411855),r=l(109388),a=l(188507),i=l(498750),s=l(939863),o=l(738269),c=l(507877),d=l(119198),p=l(457858),u=l(988022),m=l(974105),h=l(309798),_=l(99506),E=l(833629),g=l(428467),y=l(707465),v=l(984968),b=l(239671),f=l(945020),S=l(836454);let T="https://static.figma.com/uploads/85018c5142c2dc9201c4cab76c1d81b85b0b6181",w="https://static.figma.com/uploads/7797fe8870261875ba0109c61c2297005d9ff6f1";function P(e){let t=n.useRef(null),[l,a]=n.useState(void 0),i=()=>{if(t.current)return t.current.scrollWidth-t.current.clientWidth},s=n.useCallback(e=>{var l;let n;n=void 0!==e?e:null==(l=t.current)?void 0:l.scrollLeft;let r=i();void 0!==n&&void 0!==r&&(n<=0?a("beginning"):n>=r?a("end"):a(void 0))},[]);return n.useEffect(()=>{let e=()=>s();return window.addEventListener("wheel",e),s(),()=>window.removeEventListener("wheel",e)},[s]),{currentViewRef:t,atScrollLimit:l,handleScroll:l=>{var n;let a=r.findDOMNode(t.current),i=null==(n=t.current)?void 0:n.scrollLeft;if(!a||void 0===i)return;"backward"===l&&0===i&&(null==e||e());let o="forward"===l?700:-700;a.scroll({left:i+o,behavior:"smooth"}),s(i+o)}}}function k(e){let t,l;return void 0===e?(t=(0,s.t)("rcs.product_and_template_picker.what_would_you_like_to_do_first"),l=(0,s.t)("rcs.product_and_template_picker.we_can_help_you_get_started_faster")):"design"===e?(t=(0,s.t)("rcs.product_and_template_picker.start_from_presets_and_templates"),l=(0,s.t)("rcs.product_and_template_picker.start_from_presets_or_templates_from_our_community")):(t=(0,s.t)("rcs.product_and_template_picker.save_time_with_ready_made_templates"),l=(0,s.t)("rcs.product_and_template_picker.start_from_templates_made_by_figma_and_our_community")),{titleText:t,subtitleText:l}}let I={design:{type:"blank",editorType:_._Y.DESIGN,svg:S.A},whiteboard:{type:"blank",editorType:_._Y.WHITEBOARD,svg:S.A},iphone:{type:"preset",framePreset:p.$W["iPhone 13 & 14"],img:{src:T,width:52,height:106},backgroundColor:"#CFE2FF"},android:{type:"preset",framePreset:p.$W["Android Large"],img:{src:T,width:52,height:106},backgroundColor:"#b6f0c6"},desktop:{type:"preset",framePreset:p.$W.Desktop,img:{src:w,width:99,height:72},backgroundColor:"#F5EAC1"},wireframe:{type:"preset",framePreset:p.$W.Wireframe,img:{src:w,width:99,height:72},backgroundColor:"#F5EAC1"}};function C(e){let t=[];return t.push(I[e]),"design"===e&&(t.push(I.iphone),t.push(I.desktop)),t}function N(e,t,l){let n=[];return e&&e.forEach(e=>{t[e]&&n.push({type:"hubFile",editorType:l,hubFile:t[e]})}),n}function A(e,t,l){if(!e)return null;let n=Object.keys(t.folders).filter(l=>t.folders[l].team_id===e.id),r="design"===l?v.sK.ADD_DESIGN_FILE:"slides"===l?v.sK.ADD_SLIDES_FILE:v.sK.ADD_FIGJAM_FILE;return 1===n.length&&(0,g.canCreateFile)(n[0],t,l)&&(0,v.rR)(e,{type:r})?n[0]:null}function x(){let e=(0,a.Pj)(),t=(0,a.d4)(e=>{var t;return(0,E.R$)(e.fileByKey,(null==(t=e.user)?void 0:t.id)||null,["exp_tooltips_plus_onboarding","exp_cursor_bot_onboarding"])}),l=(0,h.f)("has_tooltips_plus_no_basics_file");return n.useCallback(n=>{let r=()=>{let t=(0,v.FQ)(a),l=(0,m.xA)(a,f.ai.NEW_TAB,null,{from:f.f6.FILE_BROWSER_NUX,selectedView:a.selectedView});l.editorType=_._Y.DESIGN,l.folder_id=A(t,a,l.editorType),l.openNewFileIn=(0,i.oJ)(n)?f.ai.NEW_TAB:f.ai.SAME_TAB,l.callback=e=>{(0,u.Cu)({fileKey:e,experiment:"exp_tooltips_plus_onboarding"},"Failed to open captive file")},e.dispatch(d.uM(l))},a=e.getState();if(l)r();else if(t){if((0,i.oJ)(n)){let l=(0,y.xS)(a,{view:"fullscreen",fileKey:t,editorType:b.nT.Design});e.dispatch(c.V3({url:l}))}else e.dispatch(o.$T({view:"fullscreen",fileKey:t,editorType:b.nT.Design}))}else r()},[e,t,l])}},67048:(e,t,l)=>{"use strict";l.d(t,{G:()=>c});var n=l(411855),r=l(629019),a=l.n(r),i=l(498480),s=l(762638),o=l(939863);function c({location:e,overrideText:t,hoverStyleClassName:l}){return n.createElement(i.Ex,{className:a()(s.cx.font11.fontNormal.h16.px4.b1.bRadius5.mr0.hFitContent.if("MODAL"===e||"FILE_BROWSER_BAR"===e||"SLIDES_REWRITE_MODAL"===e,s.cx.colorTextSecondary.colorBorder).if("SUMMARIZE_NUDGE"===e,s.cx.colorTextOnbrand.colorBorderBrand).if("SUMMARIZE_NUDGE_DISABLED"===e,s.cx.colorTextOnbrand.colorBorderDisabled).if("INLINE_TOOLBAR"===e,s.cx.colorTextMenuSecondary.colorBorderMenu).if("SLIDES_REWRITE_MODAL"===e,s.cx.textBodySmall).$,l),color:i.zE.INVERT,subtle:!0,text:t??(0,o.t)("whiteboard.ai_modal.beta_badge")})}},841983:(e,t,l)=>{"use strict";l.d(t,{D:()=>u,N:()=>p});var n=l(411855),r=l(188507),a=l(356390),i=l(498606),s=l(677859),o=l(88220),c=l(426906);let d=["semi-bold","semi bold","bold","extra-bold","extra bold","black"];function p(e){return d.some(t=>e.toLowerCase().startsWith(t))}function u(){let e=(0,r.d4)(e=>{var t;return p((null==(t=e.mirror.selectionProperties.fontStyle)?void 0:t.toString())||"")}),t=(0,r.d4)(e=>"STRIKETHROUGH"===e.mirror.selectionProperties.whiteboardTextDecoration);return n.createElement(n.Fragment,null,n.createElement(s.K0,{svg:o.A,tooltip:"toggle-bold",tooltipType:i.Ib.LOOKUP,active:e?"LOUD":void 0,onClick:()=>a.Y5.triggerActionInUserEditScope("toggle-bold"),recordingKey:"bold",role:"switch",blurOnClick:!0}),n.createElement(s.K0,{svg:c.A,tooltip:"text-toggle-strikethrough",tooltipType:i.Ib.LOOKUP,active:t?"LOUD":void 0,onClick:()=>a.Y5.triggerActionInUserEditScope("text-toggle-strikethrough"),recordingKey:"strikethrough",role:"switch",blurOnClick:!0}))}},927658:(e,t,l)=>{var n=l(33132)(function(e,t,l){return e+(l?"-":"")+t.toLowerCase()});e.exports=n},727928:()=>{!function(e){var t=[/\b(?:async|sync|yield)\*/,/\b(?:abstract|assert|async|await|break|case|catch|class|const|continue|covariant|default|deferred|do|dynamic|else|enum|export|extends|extension|external|factory|final|finally|for|get|hide|if|implements|import|in|interface|library|mixin|new|null|on|operator|part|rethrow|return|set|show|static|super|switch|sync|this|throw|try|typedef|var|void|while|with|yield)\b/],l=/(^|[^\w.])(?:[a-z]\w*\s*\.\s*)*(?:[A-Z]\w*\s*\.\s*)*/.source,n={pattern:RegExp(l+/[A-Z](?:[\d_A-Z]*[a-z]\w*)?\b/.source),lookbehind:!0,inside:{namespace:{pattern:/^[a-z]\w*(?:\s*\.\s*[a-z]\w*)*(?:\s*\.)?/,inside:{punctuation:/\./}}}};e.languages.dart=e.languages.extend("clike",{"class-name":[n,{pattern:RegExp(l+/[A-Z]\w*(?=\s+\w+\s*[;,=()])/.source),lookbehind:!0,inside:n.inside}],keyword:t,operator:/\bis!|\b(?:as|is)\b|\+\+|--|&&|\|\||<<=?|>>=?|~(?:\/=?)?|[+\-*\/%&^|=!<>]=?|\?/}),e.languages.insertBefore("dart","string",{"string-literal":{pattern:/r?(?:("""|''')[\s\S]*?\1|(["'])(?:\\.|(?!\2)[^\\\r\n])*\2(?!\2))/,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$(?:\w+|\{(?:[^{}]|\{[^{}]*\})*\})/,lookbehind:!0,inside:{punctuation:/^\$\{?|\}$/,expression:{pattern:/[\s\S]+/,inside:e.languages.dart}}},string:/[\s\S]+/}},string:void 0}),e.languages.insertBefore("dart","class-name",{metadata:{pattern:/@\w+/,alias:"function"}}),e.languages.insertBefore("dart","class-name",{generics:{pattern:/<(?:[\w\s,.&?]|<(?:[\w\s,.&?]|<(?:[\w\s,.&?]|<[\w\s,.&?]*>)*>)*>)*>/,inside:{"class-name":n,keyword:t,punctuation:/[<>(),.:]/,operator:/[?&|]/}}})}(Prism)}}]);

//# debugId=41c9bc2b-65f8-550d-8ff7-42da4e164e6a

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/615d99354da4379cef25d8f29aea1795d57a0b53/properties_panel-2644121635765f88.min.js.map