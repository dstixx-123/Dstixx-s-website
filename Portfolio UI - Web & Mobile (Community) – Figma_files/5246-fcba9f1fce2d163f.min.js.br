"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="f158a141-9af4-57d6-88fd-19d1885fd4b5")}catch(e){}}();
(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[5246],{612389:(e,t,r)=>{function n(e){return"backend"in e&&"fullscreen"===e.backend}function i(e){switch(e){case"server_file":case"local_file":case"server_checkpoint":case"pasted_data":return!0;case"server_checkpoint_diff":case"local_diff_file":case"multiplayer_journal":return!1}}function l(e){switch(e.type){case"server_file":case"local_file":case"server_checkpoint":case"pasted_data":return!0;case"server_checkpoint_diff":case"local_diff_file":case"multiplayer_journal":case"multiplayer_journals":return!1}}function a(e){switch(e.type){case"server_checkpoint_diff":case"local_diff_file":return!0;case"server_file":case"local_file":case"server_checkpoint":case"multiplayer_journal":case"multiplayer_journals":case"pasted_data":return!1}}r.d(t,{F1:()=>l,GP:()=>i,HP:()=>a,_g:()=>n})},552657:(e,t,r)=>{r.d(t,{I:()=>S});var n=r(572174),i=r(539130),l=r(852800),a=r(678340),s=r(442260),o=r(618058),u=r(220566),c=r(614869),d=r(794348),h=r(494299),p=r(935283),m=r(273226);function f(e,t){switch(e){case l.J0O.BOOL:return{type:c.hy.Boolean,value:t.boolValue};case l.J0O.TEXT:return{type:c.hy.SensitiveText,value:t.textValue};case l.J0O.INSTANCE_SWAP:return{type:c.hy.NodeId,value:(0,o.wr)(t.instanceSwapValue)};default:if(t.untypedValue)return{type:c.hy.SensitiveText,value:t.untypedValue};return}}function y(e,t){let r=[];return e.error&&r.push((0,d.Jt)("Error",{type:c.hy.String,value:e.error})),e.propType&&r.push((0,d.Jt)("Prop Type",{type:c.hy.String,value:(0,m.xb)(e.propType)})),e.explicitDefID&&(r.push((0,d.Jt)("Explicit Def ID",{type:c.hy.GenericGuid,value:(0,o.wr)(e.explicitDefID)})),t&&r.push((0,d.lh)("Explicit Def State Group",t))),r.push((0,d.w_)({label:"Ref Nodes",list:e.refNodes,buildChild:g,expandByDefault:!1})),r}function g(e,t){return{label:e,value:{type:c.hy.NodeId,value:(0,o.wr)(t.refNodeGuid)},children:[{label:e,value:{type:c.hy.String,value:t.nodeField},children:[],expandByDefault:!1}],expandByDefault:!1}}function v(e,t,r){return(0,d.w_)({label:e,list:t,buildChild:(e,t)=>(function(e,{edges:t},r){let n=1===t.length?E(t[0],!1):[(0,d.Jt)("Type",{type:c.hy.String,value:"Transitive"}),(0,d.w_)({label:"Edges",list:t,buildChild:(e,t)=>({label:e,children:E(t,!0),expandByDefault:!0}),expandByDefault:!0})];return{label:e,value:{type:c.hy.NodeId,value:(0,o.wr)(r===l.Uze.FROM?t[t.length-1].toGuid:t[0].fromGuid)},children:n,expandByDefault:!1}})(e,t,r),expandByDefault:!1})}function E({fromGuid:e,toGuid:t,type:r,pathToOverride:n,propDefId:i},a){let s=[(0,d.Jt)("Type",{type:c.hy.String,value:function(e){switch(e){case l.SoG.PRIMARY_INSTANCE_BACKED_BY_SYMBOL:return"Primary instance backed by symbol";case l.SoG.PRIMARY_INSTANCE_WITH_NESTED_SWAP_TO_SYMBOL:return"Primary instance with nested swap to symbol";case l.SoG.PRIMARY_INSTANCE_WITH_TOP_LEVEL_PROP_ASSIGNMENT_TO_SYMBOL:return"Primary instance with top level prop assignment to symbol";case l.SoG.PRIMARY_INSTANCE_WITH_NESTED_PROP_ASSIGNMENT_TO_SYMBOL:return"Primary instance with nested prop assignment to symbol";case l.SoG.PRODUCT_COMPONENT_WITH_PROP_DEF_TO_SYMBOL:return"Product component with prop def to symbol";case l.SoG.STATE_WITH_PROP_DEF_TO_SYMBOL:return"State with prop def to symbol";case l.SoG.SYMBOL_CONTAINING_PRIMARY_INSTANCE:return"Symbol containing primary instance";case l.SoG.INVALID:return"Invalid";default:(0,p.xb)(e)}}(r)})];a&&(s.push((0,d.lh)("From",e)),s.push((0,d.lh)("To",t))),n.length>1&&s.push((0,d.Jt)("Path to override",{type:c.hy.OverridePath,value:(0,o.ZJ)(n)}));let u=(0,o.SR)(i);return u&&s.push((0,d.Jt)("Prop def id",{type:c.hy.GenericGuid,value:(0,o.wr)(u)})),s}class S extends h.X{constructor({inPrototypeViewer:e,...t}){super(t),this.nodesById=new Map,this.stylesById=new Map,this.variablesById=new Map,this.variableCollectionsById=new Map,this.searchDB=new s.V,this.inPrototypeViewer=e}memoryUsage(){if(this._memoryUsage)return this._memoryUsage;let e=this.getRootNodes().reduce((e,t)=>e+t.treeMemoryUsage,0);return this._memoryUsage=e}getResourceMetadata(){return{migrationVersion:l.Hcu.getFileVersion()}}getResourceMetadataDisplayInfo(){return{"Migration version":this.getResourceMetadata().migrationVersion.toString()}}getRootNodes(){return this.fetchNodesFromFullscreen(()=>l.Hcu.getRootNodes())}getNode(e){return this.getNodeFromCache(e)||this.fetchNodeFromFullscreen(()=>l.Hcu.getNode((0,o.qJ)(e)))}getChildren(e){return this.fetchNodesFromFullscreen(()=>l.Hcu.getChildren((0,o.qJ)(e)))}getStyle(e){return this.getStyleFromCache(e)||this.fetchNodeFromFullscreen(()=>l.Hcu.getStyle(e))}getVariable(e){return this.getVariableFromCache(e)||this.fetchNodeFromFullscreen(()=>l.Hcu.getVariable(e))}getVariableCollection(e){return this.getVariableCollectionFromCache(e)||this.fetchNodeFromFullscreen(()=>l.Hcu.getVariableCollection(e))}getStyleConsumers(e){return this.fetchNodesFromFullscreen(()=>l.Hcu.getStyleConsumers(e))}getConsumedStyles(e){return this.fetchNodesFromFullscreen(()=>l.Hcu.getConsumedStyles((0,o.qJ)(e)))}getConsumedVariables(e){return this.fetchNodesFromFullscreen(()=>l.Hcu.getConsumedVariables((0,o.qJ)(e)))}getVariablesInCollection(e){return this.fetchNodesFromFullscreen(()=>l.Hcu.getVariablesInCollection(e))}getNodesWithExplicitModeForVariableSet(e){return this.fetchNodesFromFullscreen(()=>l.Hcu.getNodesWithExplicitModeForVariableSet(e))}getVariableConsumers(e){return this.fetchNodesFromFullscreen(()=>l.Hcu.getVariableConsumers(e))}getDirectVariableDependenciesToVariable(e){return this.fetchNodesFromFullscreen(()=>l.Hcu.getDirectVariableDependenciesToVariable(e))}getPropDefs(e){let t=(0,o.SR)(e);return null==t?[]:l.Hcu.getPropDefs(t)}getCombinedPropAssignments(e){let t=(0,o.SR)(e);return null==t?[]:l.Hcu.getCombinedPropAssignments(t)}getTransitiveDependencyPaths(e,t){let r=(0,o.SR)(e);return null==r?[]:l.Hcu.getTransitiveDependencyPaths(r,t)}getAllOverridesForLayer(e){let t=(0,o.SR)(e);return null==t?[]:l.Hcu.getLayerOverrides(t).map(e=>({...e,fields:i.w.decodeMessage(e.fields).nodeChanges[0]}))}getAllSublayerInfoForImmutableFrame(e){let t=(0,o.SR)(e);return null==t?new Map:l.Hcu.getImmutableFrameSubLayerInfo(t)}getOverrideStash(e){let t=(0,o.SR)(e);return null==t?[]:l.Hcu.getOverrideStash(t).map(e=>({...e,overrides:e.overrides.map(e=>({...e,fields:i.w.decodeMessage(e.fields).nodeChanges[0]}))}))}getTextInsertionStyle(e){let t;let r=(0,o.SR)(e);if(null==r)return[];let n=l.Hcu.getTextInsertionStyle(r);if(0===n.length)return[];try{t=i.w.decodeMessage(n).nodeChanges}catch(e){return console.warn("FigmaScope: error decoding node changes",e),[]}return t?t.length>1?(console.warn("FigmaScope: more than one node change found for text insertion style"),[]):t:(console.warn("FigmaScope: buffer did not contain node changes"),[])}getBlobByIndex(e){return"showing blob bytes is not implemented"}supportsNodePreviews(){return"show"===this.sensitiveTextPolicy&&!this.inPrototypeViewer}async search(e,t,r){return(await this.indexedSearchDB(r)).search(e,t)}indexedProperties(){return this.searchDB.indexedProperties}getNodeFromCache(e){return this.nodesById.get((0,o.qJ)(e))??null}getStyleFromCache(e){return this.stylesById.get(e)??null}getVariableFromCache(e){return this.variablesById.get(e)??null}getVariableCollectionFromCache(e){return this.variableCollectionsById.get(e)??null}fetchNodeFromFullscreen(e){let t=this.fetchNodesFromFullscreen(e);return t.length>1&&console.error("FigmaScope: Multiple nodes found",t),t[0]??null}fetchNodesFromFullscreen(e){let t,r;try{t=e()}catch(e){return console.error("FigmaScope: error fetching nodes"),[]}try{r=i.w.decodeMessage(t).nodeChanges}catch(e){return console.error("FigmaScope: error decoding node changes",e),[]}return r?r.map(e=>{let t=(0,o.qJ)(e.guid),r=this.nodesById.get(t);if(r)return r;let n=new b(e,this);if(this.nodesById.set(t,n),n.isStyle()){let e=n.styleId();e&&this.stylesById.set(e,n)}if(n.isVariable()){let e=n.variableId();e&&this.variablesById.set(e,n)}if(n.isVariableCollection()){let e=n.variableCollectionId();e&&this.variableCollectionsById.set(e,n)}return n}):(console.error("FigmaScope: missing nodeChanges property"),[])}indexedSearchDB(e){if(this._indexedSearchDB)return this._indexedSearchDB;let t=0,r=this.getRootNodes(),n=async()=>{await scheduler.postTask(async()=>{let i=Date.now();for(;Date.now()-i<100;){let n=r.pop();if(!n)return;e&&++t%5e3==0&&e(t),this.searchDB.indexNode(n),r.push(...n.children().filter(e=>e.guid))}await n()})},i=n().then(()=>this.searchDB);return this._indexedSearchDB=i}}class b extends u.H{constructor(e,t){super(e,t),this.memoryUsage=l.Hcu.getNodeMemoryUsage(this.guidStr()),this.treeMemoryUsage=l.Hcu.getSubtreeMemoryUsage(this.guidStr()),this.hasBeenLoaded=l.Hcu.getHasBeenLoaded(this.guidStr())}memoryPercentStr(){return(0,a.pr)(this.treeMemoryUsage,this._scene.memoryUsage(),!1)}transitiveDependencyPaths(e){return this._scene.getTransitiveDependencyPaths(this.guid(),e)}consumedStyleIds(){return this.consumedStyles().map(e=>e.styleId()).filter(n.Vq)}consumedStyles(){return this._scene.getConsumedStyles(this.guid())}consumedVariableIds(){return this.consumedVariables().map(e=>e.variableId()).filter(n.Vq)}consumedVariables(){return this._scene.getConsumedVariables(this.guid())}variablesThatDirectlyDependOnThisVariable(){let e=this.variableId();return e?this._scene.getDirectVariableDependenciesToVariable(e):[]}propDefs(){return this._scene.getPropDefs(this.guid())}combinedPropAssignments(){return this._scene.getCombinedPropAssignments(this.guid())}allLayerOverrides(){return this._scene.getAllOverridesForLayer(this.guid())}overrideStash(){return this._scene.getOverrideStash(this.guid())}keyForPublish(){return super.key()??(this.isLocalAsset()&&l.Egt?l.Egt.getAssetKeyForPublish(this.guidStr()):void 0)}allImmutableFrameSublayerInfo(e){return this._scene.getAllSublayerInfoForImmutableFrame(e)}textInsertionStyle(e){let t=this._scene.getTextInsertionStyle(e);return 1===t.length?t[0]:null}sublayerOverridesFromContainingImmutableFrame(){let e=this.containingImmutableFrame();if(!e)return null;let t=this.allImmutableFrameSublayerInfo(e.guid());if(!t||0===t.size)return null;let r=Array.from(t).find(e=>e[1].sublayerGuid===this.guidStr());if(!r)return null;let n=e.immutableFrameSublayerOverridesList();return 0===n.length?null:n.find(e=>{var t,n;let i=null==(t=e.guidPath)?void 0:t.guids;return`[${null==(n=null==i?void 0:i.map(e=>(0,o.qJ)(e)))?void 0:n.join(", ")}]`===r[0]})}generateComputedProperties(){var e,t,r;let i=[(0,d.sq)(this.type())];"DOCUMENT"===this.nodeType()&&Object.entries(this._scene.getResourceMetadataDisplayInfo()).forEach(([e,t])=>{i.push((0,d.Jt)(e,{type:c.hy.String,value:t}))}),this.hasBeenLoaded&&i.push((0,d.Jt)("Has Been Loaded",{type:c.hy.Boolean,value:this.hasBeenLoaded}));let a=this.keyForPublish(),s=(0,d.qU)(this,a);if(s&&i.push(s),i.push({label:"Memory usage",children:[(0,d.Jt)("Node",{type:c.hy.Numeric,value:this.memoryUsage}),(0,d.Jt)("Tree",{type:c.hy.Numeric,value:this.treeMemoryUsage})],expandByDefault:!0}),this.isPrimaryInstance()){let e=(0,d._9)(this);e&&i.push(e);let t=(0,d.az)(this);t&&i.push(t);let r=this.overrideStash();r&&i.push((0,d.w_)({label:"Override stash",list:r,expandByDefault:!1,buildChild:(e,t)=>({label:e,value:t.pathToSwap?{type:c.hy.OverridePath,value:(0,o.ZJ)(t.pathToSwap)}:void 0,children:[(0,d.w_)({label:e,value:{type:c.hy.NodeId,value:(0,o.wr)(t.symbolId)},list:t.overrides,expandByDefault:!1,buildChild:(e,t)=>(0,d.tN)({label:e,value:{type:c.hy.OverridePath,value:(0,o.ZJ)(t.overridePath)},object:t.fields,buildChild:(e,t)=>null==t?null:(0,d.oy)(e,t),expandByDefault:!1})})],expandByDefault:!1})}))}let u=this.instanceChain();if(u.length>0){i.push({label:"Instance chain",value:{type:c.hy.Metadata,value:u.length},expandByDefault:!0,children:u.map((e,t)=>(function(e,t){let r=e.isInstance(),i=e.isPrimaryInstance(),l=[];if(r){l.push((0,d.VX)(e));let t=(0,d.fG)(e);t&&l.push(t)}return i||l.push((0,d.Jt)("Override path",{type:c.hy.OverridePath,value:t.slice(1).map(e=>e.overrideKey()).filter(n.Vq)})),{label:r?i?"Primary instance":"Nested instance":"This sublayer",key:String(t.length),value:{type:c.hy.NodeId,value:e.guid()},children:l,expandByDefault:!1}})(e,u.slice(0,t+1)))});let e=this.allLayerOverrides();if(e){let t=function(e){let t={};for(let{primaryInstanceId:r,containingSymbolId:n,fields:i,savedLevel:l,inheritanceLevel:a}of e)for(let[e,s]of Object.entries(i))t[e]=t[e]||[],t[e][a]={primaryInstanceId:r,containingSymbolId:n,value:s,savedLevel:l};let r=Object.keys(t).sort();return 0===r.length?null:(0,d.w_)({label:"Layer overrides",list:r,expandByDefault:!1,buildChild:(e,r)=>{let i=t[r],l=i.findIndex(n.Vq),a=i[l].value;return{label:r,value:{type:c.hy.Metadata,value:0===l?"Direct override":"Inherited override"},expandByDefault:!1,children:[{...(0,d.oy)(r,a),label:"Resolved value",expandByDefault:!0},{label:"Sources",expandByDefault:!1,children:i.map(({primaryInstanceId:e,containingSymbolId:t,value:i,savedLevel:l},a)=>({label:0===a?"Direct override":"Inherited from",key:`Level ${a}`,value:t?{type:c.hy.NodeId,value:(0,o.wr)(t)}:void 0,children:[{...(0,d.oy)(r,i),label:"Value"},l>0?(0,d.Jt)("Saved level",{type:c.hy.Numeric,value:l}):null,(0,d.lh)("Primary instance",e)].filter(n.Vq),expandByDefault:!1})).filter(n.Vq)}]}}})}(e);t&&i.push(t)}}if((this.isSymbol()||this.isPrimaryInstance())&&(i.push(v("Dependants",this.transitiveDependencyPaths(l.Uze.TO),l.Uze.TO)),i.push(v("Dependencies",this.transitiveDependencyPaths(l.Uze.FROM),l.Uze.FROM))),this.isStateGroup()&&(i.push((0,d.w_)({label:"Dependants By State",list:this.children(),buildChild:(e,t)=>({...v(`State ${e}`,t.transitiveDependencyPaths(l.Uze.TO),l.Uze.TO),value:{type:c.hy.NodeId,value:t.guid()}}),expandByDefault:!0})),i.push((0,d.w_)({label:"Dependencies By State",list:this.children(),buildChild:(e,t)=>({...v(`State ${e}`,t.transitiveDependencyPaths(l.Uze.FROM),l.Uze.FROM),value:{type:c.hy.NodeId,value:t.guid()}}),expandByDefault:!0}))),this.isStyle()&&i.push((0,d.cT)(this.styleConsumers())),this.isVariable()){let e=this._scene.getVariableCollection(this.variableCollectionId());i.push((0,d.dW)(e)),i.push((0,d.dL)(this.variableConsumers()))}let h=this.variablesDirectlyDependedOnByThisVariable();Object.values(h).some(e=>e.length>0)&&i.push((0,d.q7)(h));let p=this.variablesThatDirectlyDependOnThisVariable();p.length>0&&i.push((0,d.PS)(p));let m=this.consumedStyles();m.length>0&&i.push((0,d.Oj)(m));let g=this.consumedVariables();if(g.length>0&&i.push((0,d.PT)(g)),this.isVariableCollection()&&(i.push((0,d.SP)(this.variablesInCollection())),i.push((0,d.Mx)(this.nodesWithExplicitModeForCollection()))),this.isSymbol()||this.isStateGroup()){let t=this.propDefs();if(t.length>0){let r=this.isState()?null==(e=this.parent())?void 0:e.guidStr():void 0;i.push((0,d.w_)({label:"Component Prop Defs",list:t,buildChild:(e,t)=>(function(e,t){let r=[(0,d.Jt)("Is Explicit",{type:c.hy.Boolean,value:e.isExplicit})],n=f(e.propType,e.defaultValue);return n&&r.push((0,d.Jt)("Default Value",n)),r.push(...y(e,t)),{label:e.defID,value:{type:e.name?c.hy.SensitiveText:c.hy.String,value:e.name?e.name:"INVALID_PROP"},children:r,expandByDefault:!1}})(t,r),expandByDefault:!1}))}}if(this.isInstance()){let e=this.combinedPropAssignments();e.length>0&&i.push((t=this.backingStateGroup(),(0,d.w_)({label:"Component Prop Assignments",list:e,buildChild:(e,r)=>(function(e,t){let r=[],n=f(e.propType,e.assignmentValue);return n&&r.push((0,d.Jt)("Assignment Value",n)),r.push((0,d.Jt)("Is Mixed",{type:c.hy.Boolean,value:e.isMixed})),r.push(...y(e,t)),{label:e.assignmentID,value:{type:e.name?c.hy.SensitiveText:c.hy.String,value:e.name?e.name:"INVALID_PROP"},children:r,expandByDefault:!1}})(r,t),expandByDefault:!1})))}let E=this.otherAssetVersions(e=>{var t;return null==(t=this._scene.getNode(e))?void 0:t.keyForPublish()});E.length>0&&i.push((0,d.nn)(E));let S=this.isVariable()||this.isVariableCollection(),b=this.transform();if(b&&!S){let e=(0,d.Ro)("Relative transform",b,this.isEditable(),this.guidStr());i.push(e)}let I=this.absoluteTransform();if(I&&!S&&i.push((0,d.Ro)("Absolute transform",I)),"TEXT"===this.type()){let e=this.textInsertionStyle(this.guid());if(e){let t=(0,d.Lk)(e);t&&i.push(t)}}if(this.isImmutableFrame()){let e=this.allImmutableFrameSublayerInfo(this.guid());if(e){let t=(0,d.St)(this,e);t&&i.push(t)}}if(this.isImmutableFrameSublayer()){let e=this.sublayerOverridesFromContainingImmutableFrame();if(e){let t=(0,d.gq)(this,e);t&&i.push(t)}}return this._scene.supportsNodePreviews()&&this.isPreviewRenderable()&&i.push((r=this.guid(),{label:"Node Preview",children:[(0,d.Jt)("",{type:c.hy.Image,value:r})],expandByDefault:!1})),i}}},618058:(e,t,r)=>{r.d(t,{SR:()=>s,ZJ:()=>c,bb:()=>u,dL:()=>o,qJ:()=>l,wr:()=>a});var n=r(572174),i=r(987918);function l(e){return"string"==typeof e?e:i.dI(e)}function a(e){return"string"==typeof e?i.sH(e):e}function s(e){let t=l(e);return t===i.AD?null:t}function o(e){return!!function(e){let t=a(e);return i.fn(t)?t:null}(e)}function u(e){return Array.isArray(e)?e.map(l).join(", "):e}function c(e){return"string"==typeof e?e.split(", ").map(i.sH).filter(n.Vq):"string"==typeof e[0]?e.map(a).filter(n.Vq):e}},967527:(e,t,r)=>{r.d(t,{R4:()=>h,i0:()=>m});var n=r(935283),i=r(966712),l=r(886571),a=r(515009),s=r(987918),o=r(618056),u=r(416095),c=r(618058),d=r(55799);class h{constructor(e){this.nodeChange=e,this.memoryUsage=null,this.treeMemoryUsage=null}memoryPercentStr(){return null}instanceChain(){let e=this.filterAncestors(e=>e.isInstance()).reverse();return(e.length>0||this.isInstance())&&e.push(this),e}followOverridePath(e){let t=this;for(let r of e){if(!t)return;let e=(0,c.qJ)(r);t=t.findDescendant(t=>t.overrideKeyStr()===e,{includeSelf:!0,shouldSkipAfter:e=>e!==t&&e.isInstance()})}return t}ancestorPath(){return this.mapAncestors(e=>e.guid(),{includeSelf:!0})}ancestorPathStr(){return(0,c.bb)(this.ancestorPath())}guid(){return this.nodeChange.guid??s.Hr}guidStr(){return s.dI(this.guid())}key(){var e,t;return(0,a.sg)(this.nodeChange.key??this.nodeChange.componentKey??((null==(e=this.nodeChange.sharedStyleMasterData)?void 0:e.styleKey)||(null==(t=this.nodeChange.sharedStyleReference)?void 0:t.styleKey)||void 0))}version(){return(0,a.Xf)(this.nodeChange.version??this.nodeChange.sharedSymbolVersion)}assetRef(){return a.iU.fromKiwi({key:this.key(),version:this.version()})}_assetId(e){if(!this.isSubscribedAsset())return e.fromLocalNodeIdObj(this.guid());{let t=this.assetRef();return t?e.fromRef(t):null}}symbolId(){return this.isSymbol()?this._assetId(l.Ws):null}stateGroupId(){var e;return this.isStateGroup()?this._assetId(l.GU):this.isSymbol()?(null==(e=this.parent())?void 0:e.stateGroupId())??null:null}styleId(){return this.isStyle()?this._assetId(l.PK):null}variableId(){return this.isVariable()?this._assetId(l.sD):null}variableCollectionId(){return this.isVariableCollection()?this._assetId(l.gr):this.isVariable()&&this.nodeChange.variableSetID?l.gr.fromKiwi(this.nodeChange.variableSetID):null}backingSymbolId(){var e;return this.isInstance()?(null==(e=this.nodeChange.symbolData)?void 0:e.symbolID)??this.nodeChange.overriddenSymbolID??null:null}getFriendlyVariableModeString(e){var t;if(!this.isVariableCollection())return"";let r=s.dI(e),n=null==(t=this.nodeChange.variableSetModes)?void 0:t.find(t=>s.aI(t.id,e));return n?`${n.name} (${r})`:`<missing mode> (${r})`}nodeType(){return this.nodeChange.type??"NONE"}isEditable(){return"CANVAS"!==this.nodeType()&&"DOCUMENT"!==this.nodeType()&&!this.isImmutableFrameSublayer()&&!this.isInstanceSublayer()&&!this.isInternalOnly()}isPreviewRenderable(){return"CANVAS"!==this.nodeType()&&"DOCUMENT"!==this.nodeType()&&!this.isStateGroup()&&!this.isVariableCollection()&&!this.isVariable()}type(){let e=this.nodeType();if("INSTANCE"===e)return this.isPrimaryInstance()?"PRIMARY_INSTANCE":"NESTED_INSTANCE";if("VARIABLE_SET"===e)return"VARIABLE_COLLECTION";if(this.isStateGroup())return"STATE_GROUP";if(this.isState())return"STATE";if(this.isStyle()){let e=this.nodeChange.styleType;switch(e){case"FILL":return"FILL_STYLE";case"STROKE":return"STROKE_STYLE";case"TEXT":return"TEXT_STYLE";case"EFFECT":return"EFFECT_STYLE";case"EXPORT":return"EXPORT_STYLE";case"GRID":return"GRID_STYLE";default:(0,n.j)(e)}}return e}phase(){return this.nodeChange.phase??"MODIFIED"}transform(){return this.nodeChange.transform}parentGuid(){let e=this.nodeChange.parentIndex;return e?e.guid||(console.warn("Node has parent index but no parent guid",this,e),null):null}nameWithPage(){let e=this.containingPage();return e?`${e.name()} > ${this.name()}`:this.name()}explicitOverrideKey(){return this.nodeChange.overrideKey}overrideKey(){let e=this.explicitOverrideKey();if(e)return e;if(this.isPrimaryInstance()){let e=this.backingSymbol();if(e)return e.isSubscribedAsset()?e.explicitOverrideKey():e.guid()}}overrideKeyStr(){let e=this.overrideKey();return e?(0,c.qJ)(e):null}treeDiffKey(){let e=this.instanceChain();return e.length>1?e.map((e,t)=>0===t?e.guidStr():e.overrideKeyStr()).join(", "):this.guidStr()}publishId(){return this.nodeChange.publishID??null}publishFile(){return this.nodeChange.publishFile??null}isInstance(){return"INSTANCE"===this.nodeType()}isPrimaryInstance(){return this.isInstance()&&!this.isNestedInstance()}isNestedInstance(){return"INSTANCE"===this.nodeType()&&this.someAncestor(e=>e.isInstance())}isInstanceSublayer(){return this.someAncestor(e=>e.isInstance())}isSwappedNestedInstance(){return this.isNestedInstance()&&null!=this.nodeChange.overriddenSymbolID}isSymbol(){return"SYMBOL"===this.nodeType()}isStateGroup(){return"FRAME"===this.nodeType()&&null!=this.nodeChange.isStateGroup}isState(){var e;return this.isSymbol()&&!!(null==(e=this.parent())?void 0:e.isStateGroup())}isLooseComponent(){return this.isSymbol()&&!this.isState()}isComponentish(){return this.isSymbol()||this.isStateGroup()}isProductComponent(){return this.isStateGroup()||this.isLooseComponent()}isStyle(){return this.nodeChange.styleType&&u.og.indexOf(this.nodeChange.styleType)>-1}isVariable(){return"VARIABLE"===this.nodeType()}isVariableCollection(){return this.isRootVariableCollection()||this.isExtendedVariableCollection()}isRootVariableCollection(){return!!("VARIABLE_SET"===this.nodeType()&&!this.nodeChange.backingVariableSetId)}isExtendedVariableCollection(){return!!("VARIABLE_SET"===this.nodeType()&&this.nodeChange.backingVariableSetId)}isVariableOverride(){return"VARIABLE_OVERRIDE"===this.nodeType()}isAsset(){return this.isSymbol()||this.isStateGroup()||this.isStyle()||this.isVariable()||this.isVariableCollection()||this.isVariableOverride()}isLocalAsset(){return this.isAsset()&&!this.isSubscribedAsset()}isSubscribedAsset(){return this.isComponentish()?(0,i.kc)().ds_publish_file_deprecation?null!=this.nodeChange.publishID:null!=this.nodeChange.publishFile:this.isStyle()?this.nodeChange.key?this.nodeChange.key&&this.nodeChange.version:null!=this.nodeChange.sharedStyleReference:!!(this.isVariable()||this.isVariableCollection())&&!!this.nodeChange.key}isInternalOnly(){var e;return this.nodeChange.internalOnly||(null==(e=this.parent())?void 0:e.isInternalOnly())||!1}isStack(){return null!=this.nodeChange.stackMode&&"NONE"!==this.nodeChange.stackMode}isCanvas(){return"CANVAS"===this.nodeChange.type}isImmutableFrame(){let e=this.nodeType();return"STICKY"===e||"SHAPE_WITH_TEXT"===e||"CONNECTOR"===e||"CODE_BLOCK"===e||"MEDIA"===e||"SECTION_OVERLAY"===e||"TABLE"===e}isImmutableFrameSublayer(){return!this.isImmutableFrame()&&this.someAncestor(e=>e.isImmutableFrame())}containingImmutableFrame(){return this.findAncestor(e=>e.isImmutableFrame())}containingPage(){return this.findAncestor(e=>"CANVAS"===e.type())}derivedOverridesList(){return this.nodeChange.derivedSymbolData??[]}overridesList(){var e;return(null==(e=this.nodeChange.symbolData)?void 0:e.symbolOverrides)??[]}immutableFrameSublayerOverridesList(){var e;return(null==(e=this.nodeChange.nodeGenerationData)?void 0:e.overrides)??[]}imageHashes(){var e,t,r,n,i,l,a;let s=[],u=e=>{(null==e?void 0:e.hash)&&s.push((0,o.qg)(e))},c=e=>{u(e.image),u(e.imageThumbnail),u(e.animatedImage)},d=e=>{if(e)for(let t of e)c(t)};d(this.nodeChange.fillPaints),d(this.nodeChange.strokePaints),d(this.nodeChange.backgroundPaints),d(null==(e=this.nodeChange.widgetHoverStyle)?void 0:e.fillPaints),d(null==(t=this.nodeChange.widgetHoverStyle)?void 0:t.strokePaints);let h=e=>{e&&s.push(e)};return h(null==(r=this.nodeChange.embedData)?void 0:r.thumbnailImageHash),h(null==(n=this.nodeChange.embedData)?void 0:n.faviconImageHash),h(null==(i=this.nodeChange.linkPreviewData)?void 0:i.thumbnailImageHash),h(null==(l=this.nodeChange.linkPreviewData)?void 0:l.faviconImageHash),h(null==(a=this.nodeChange.richMediaData)?void 0:a.mediaHash),s}otherAssetVersions(e){if(!this.isAsset())return[];let t=this.containingPage();if(!t)return[];let r=this.nodeType(),n=this.guidStr(),i=this.key()??(null==e?void 0:e(n));return i?t.children().filter(t=>{if(t.nodeType()!==r)return!1;let l=t.guidStr();return l!==n&&(t.key()??(null==e?void 0:e(l)))===i}):[]}forEachDescendant(e,t){return(0,d.zV)(this,m,e,t)}mapDescendants(e,t){return(0,d.o6)(this,m,e,t)}filterDescendants(e,t){return(0,d.is)(this,m,e,t)}findDescendant(e,t){return(0,d.cy)(this,m,e,t)}countDescendants(e,t){return(0,d.d8)(this,m,e,t)}someDescendant(e,t){return(0,d.Ng)(this,m,e,t)}everyDescendant(e,t){return(0,d.AH)(this,m,e,t)}forEachAncestor(e,t){return(0,d.zV)(this,p,e,t)}mapAncestors(e,t){return(0,d.o6)(this,p,e,t)}filterAncestors(e,t){return(0,d.is)(this,p,e,t)}findAncestor(e,t){return(0,d.cy)(this,p,e,t)}countAncestors(e,t){return(0,d.d8)(this,p,e,t)}someAncestor(e,t){return(0,d.Ng)(this,p,e,t)}everyAncestor(e,t){return(0,d.AH)(this,p,e,t)}nodeFieldProperties(){return this._nodeFieldProperties?this._nodeFieldProperties:this._nodeFieldProperties=this.generateNodeFieldProperties()}computedProperties(){return this._computedProperties?this._computedProperties:this._computedProperties=this.generateComputedProperties()}}function p(e){let t=e.parent();return t?[t]:[]}function m(e){return e.children()}},55799:(e,t,r)=>{r.d(t,{AH:()=>p,Ng:()=>h,cy:()=>u,d8:()=>d,is:()=>c,o6:()=>o,zV:()=>s});var n=r(461816),i=r.n(n);let l=()=>!0,a=e=>Array.isArray(e)?e:[e];function s(e,t,r,{includeSelf:n,shouldSkipAfter:l,shouldBreakAfter:s}={}){let o=a(e),u=n?[...o]:i()(o,t);for(;;){let e=u.pop();if(!e||(r(e),null==s?void 0:s(e)))return;if(!(null==l?void 0:l(e)))for(let r of t(e))u.push(r)}}function o(e,t,r,n={}){let i=[];return s(e,t,e=>i.push(r(e)),n),i}function u(e,t,r,{includeSelf:n,shouldSkipAfter:i,shouldBreakAfter:l}={}){let a;return s(e,t,e=>{r(e)&&(a=e)},{includeSelf:n,shouldSkipAfter:i,shouldBreakAfter:e=>null!=a||(null==l?void 0:l(e))||!1}),a}function c(e,t,r,n={}){let i=[];return s(e,t,e=>{r(e)&&i.push(e)},n),i}function d(e,t,r=l,n={}){let i=0;return s(e,t,e=>{r(e)&&i++},n),i}function h(e,t,r,n){return null!=u(a(e),t,r,n)}function p(e,t,r,n){return!h(a(e),t,e=>!r(e),n)}},843650:(e,t,r)=>{r.d(t,{DB:()=>l,p7:()=>a,vu:()=>i});var n=r(935283);let i={NONE:"NONE",DOCUMENT:"DOC",CANVAS:"CANV",GROUP:"GROUP",FRAME:"FRAME",BOOLEAN_OPERATION:"BOOL",VECTOR:"VECT",STAR:"STAR",LINE:"LINE",ELLIPSE:"ELLPS",RECTANGLE:"RECT",REGULAR_POLYGON:"POLY",ROUNDED_RECTANGLE:"RRECT",TEXT:"TEXT",SLICE:"SLICE",SYMBOL:"SYMB",STATE:"STATE",PRIMARY_INSTANCE:"PINST",NESTED_INSTANCE:"NINST",STICKY:"STCKY",SHAPE_WITH_TEXT:"SWTXT",CONNECTOR:"CONN",CODE_BLOCK:"CODE",WIDGET:"WIDGT",STAMP:"STAMP",MEDIA:"MEDIA",HIGHLIGHT:"HIGH",SECTION:"SECT",SECTION_OVERLAY:"SECTO",WASHI_TAPE:"WASHI",STATE_GROUP:"STGRP",FILL_STYLE:"FSTYL",STROKE_STYLE:"SSTYL",TEXT_STYLE:"TSTYL",EFFECT_STYLE:"ESTYL",EXPORT_STYLE:"XSTYL",GRID_STYLE:"GSTYL",VARIABLE:"VAR",VARIABLE_COLLECTION:"V_COL",VARIABLE_OVERRIDE:"V_OVR",TABLE:"TABLE",TABLE_CELL:"TCELL",SLIDE:"SLIDE",SLIDE_ROW:"SROW",SLIDE_GRID:"SGRID",ASSISTED_LAYOUT:"ALAYO",INTERACTIVE_SLIDE_ELEMENT:"FLAPP",MODULE:"MOD"};var l=(e=>(e[e.Grouping=0]="Grouping",e[e.Shape=1]="Shape",e[e.DesignSystems=2]="DesignSystems",e[e.ImmutableFrame=3]="ImmutableFrame",e[e.Media=4]="Media",e[e.Other=5]="Other",e))(l||{});function a(e){switch(e){case"DOCUMENT":case"CANVAS":case"GROUP":case"FRAME":case"SECTION":case"TABLE_CELL":case"SLIDE":case"SLIDE_ROW":case"SLIDE_GRID":return 0;case"SYMBOL":case"STATE_GROUP":case"STATE":case"FILL_STYLE":case"STROKE_STYLE":case"TEXT_STYLE":case"EFFECT_STYLE":case"EXPORT_STYLE":case"GRID_STYLE":case"PRIMARY_INSTANCE":case"NESTED_INSTANCE":case"VARIABLE":case"VARIABLE_COLLECTION":case"VARIABLE_OVERRIDE":case"MODULE":return 2;case"BOOLEAN_OPERATION":case"VECTOR":case"STAR":case"LINE":case"ELLIPSE":case"RECTANGLE":case"REGULAR_POLYGON":case"ROUNDED_RECTANGLE":case"HIGHLIGHT":return 1;case"WIDGET":case"STAMP":case"WASHI_TAPE":case"INTERACTIVE_SLIDE_ELEMENT":return 4;case"STICKY":case"SHAPE_WITH_TEXT":case"CONNECTOR":case"CODE_BLOCK":case"MEDIA":case"SECTION_OVERLAY":case"TABLE":return 3;case"TEXT":case"NONE":case"SLICE":case"ASSISTED_LAYOUT":return 5;default:return(0,n.j)(e),5}}},220566:(e,t,r)=>{r.d(t,{H:()=>p});var n=r(758271),i=r.n(n),l=r(572174),a=r(886571),s=r(241395),o=r(906087),u=r(967527);class c extends u.R4{constructor(e,t){super(e.nodeChange),this.node=e,this.frozenParent=t??e.parent(),this.frozenChildren=e.children().map(e=>new c(e,this)),this.frozenAncestorPath=e.ancestorPath(),this.frozenNodeFieldProperties=e.nodeFieldProperties(),this.frozenComputedProperties=e.computedProperties(),this.frozenName=e.name(),this.frozenDisplayName=e.displayName(),this.frozenText=e.text(),this.frozenIconConfig=e.iconConfig(),this.frozenOrphan=e.isOrphan(),this.memoryUsage=e.memoryUsage,this.treeMemoryUsage=e.treeMemoryUsage}freeze(){return this}parent(){return this.frozenParent}children(){return this.frozenChildren}name(){return this.frozenName}displayName(){return this.frozenDisplayName}text(){return this.frozenText}iconConfig(){return this.frozenIconConfig}isOrphan(){return this.frozenOrphan}ancestorPath(){return this.frozenAncestorPath}generateNodeFieldProperties(){return this.frozenNodeFieldProperties}generateComputedProperties(){return this.frozenComputedProperties}backingSymbol(){return this.node.backingSymbol()}consumedStyles(){return this.node.consumedStyles()}consumedStyleIds(){return this.node.consumedStyleIds()}consumedVariables(){return this.node.consumedVariables()}consumedVariableIds(){return this.node.consumedVariableIds()}}var d=r(618058),h=r(794348);class p extends u.R4{constructor(e,t){super(e),this._scene=t}freeze(){return new c(this)}parent(){let e=this.parentGuid();return e?this._scene.getNode(e):null}children(){return this._scene.getChildren(this.guid())}internalOnly(){var e;return this.nodeChange.internalOnly||(null==(e=this.parent())?void 0:e.internalOnly())||!1}backingSymbol(){let e=this.backingSymbolId();return e?this._scene.getNode(e):null}backingStateGroup(){let e=this.backingSymbol();if(!e)return null;let t=e.parent();return t&&t.isStateGroup()?t.guidStr():null}generateNodeFieldProperties(){return Object.keys(this.nodeChange).sort().map(e=>{let t=this.nodeChange[e];return null==t?null:(0,h.oy)(e,t)}).filter(l.Vq)}isOrphan(){return!!this._scene.isFullFile()&&"DOCUMENT"!==this.nodeType()&&!this.parent()}name(){return this._name??(this._name=(0,o.b)(this.nodeChange.name??"",this._scene.sensitiveTextPolicy))}displayName(){return this._displayName??(this._displayName=(()=>{if("multiplayer_journal"!==this._scene.type)return this.name();let{editScopeInfo:e}=this.nodeChange,t=[];if(e){for(let r of e.snapshots??[])for(let e of r.frames??[])for(let r of e.stack??[])t.push(r);for(let r of e.editScopeStacks??[])for(let e of r.stack??[])t.push(e)}t=i()(t,e=>e.label);let r=["USER","PLUGIN"];return t.sort((e,t)=>Number(r.includes(e.label))-Number(r.includes(t.label))),t.map(e=>e.label).join(", ")||"No edit scopes"})())}text(){var e;return(0,o.b)((null==(e=this.nodeChange.textData)?void 0:e.characters)??"",this._scene.sensitiveTextPolicy)}iconConfig(){return this._scene.shouldShowNodePhases&&this._scene.shouldShowNodeTypes?{phase:this.phase(),type:this.type()}:this._scene.shouldShowNodePhases?this.phase():this.type()}absoluteTransform(){var e;let t=this.transform(),r=null==(e=this.parent())?void 0:e.absoluteTransform();if(!t||!r)return s.s.identity().toFigMatrix();{let e=s.s.fromFigMatrix(r);return e.multiply(s.s.fromFigMatrix(t)),e.toFigMatrix()}}styleConsumers(){let e=this.styleId();return e?this._scene.getStyleConsumers(e):[]}variableConsumers(){let e=this.variableId();return e?this._scene.getVariableConsumers(e):[]}variablesInCollection(){let e=this.variableCollectionId();return e?this._scene.getVariablesInCollection(e):[]}nodesWithExplicitModeForCollection(){let e=this.variableCollectionId();return e?this._scene.getNodesWithExplicitModeForVariableSet(e):[]}variablesDirectlyDependedOnByThisVariable(){var e,t;if(!this.isVariable())return{};let r={},n=this._scene,i=n.getVariableCollection(this.variableCollectionId());return null==(t=null==(e=this.nodeChange.variableDataValues)?void 0:e.entries)||t.forEach(e=>{if(e.modeID){let t=(null==i?void 0:i.getFriendlyVariableModeString(e.modeID))??(0,d.qJ)(e.modeID);r[t]=[],function e(t,i){if((null==i?void 0:i.dataType)==="ALIAS")!function(e,t){var i;if(!(null==(i=null==t?void 0:t.value)?void 0:i.alias))return;let l=a.sD.fromKiwi(t.value.alias);if(!l)return;let s=n.getVariable(l);s&&r[e].push(s)}(t,i);else if((null==i?void 0:i.dataType)==="EXPRESSION")!function(t,r){var n,i;for(let l of(null==(i=null==(n=null==r?void 0:r.value)?void 0:n.expressionValue)?void 0:i.expressionArguments)??[])e(t,l)}(t,i);else if((null==i?void 0:i.dataType)==="MAP")return function(t,r){var n,i;for(let l of(null==(i=null==(n=null==r?void 0:r.value)?void 0:n.mapValue)?void 0:i.values)??[])e(t,l.value)}(t,i)}(t,e.variableData)}}),r}}},614869:(e,t,r)=>{r.d(t,{M2:()=>d,ZV:()=>u,hy:()=>s,iE:()=>p,wC:()=>o});var n=r(364898),i=r(886571),l=r(236634),a=r(117837),s=(e=>(e.BlobIndex="BlobIndex",e.SensitiveText="SensitiveText",e.Boolean="Boolean",e.Numeric="Numeric",e.String="String",e.Position="Position",e.Color="Color",e.Vector="Vector",e.NodeId="NodeId",e.StyleId="StyleId",e.VariableId="VariableId",e.VariableCollectionId="VariableCollectionId",e.OverrideKey="OverrideKey",e.OverridePath="OverridePath",e.GenericGuid="GenericGuid",e.GenericGuidPath="GenericGuidPath",e.GenericGuidPathMapping="GenericGuidPathMapping",e.Matrix="Matrix",e.ImageHash="ImageHash",e.Bytes="Bytes",e.Metadata="Metadata",e.Error="Error",e.Image="Image",e.EditScope="EditScope",e))(s||{});function o(e,t,r){var s,o;if((0,l.M_)(t,e))return{type:"BlobIndex",value:t};if((0,l.sX)(t,e))return{type:"SensitiveText",value:t};if((0,l.Lm)(t))return{type:"Boolean",value:t};if((0,l.kf)(t))return{type:"Numeric",value:t};if((0,l.Kg)(t))return("position"===e||"sortPosition"===e)&&(0,n.qO)(t)?{type:"Position",value:t}:{type:"String",value:t};if((0,l._o)(t))return{type:"Color",value:t};if((0,l.WX)(t))return{type:"Vector",value:t};if((0,a.ar)(e)){let e=i.PK.fromKiwi(t);if(e)return{type:"StyleId",value:e}}if("variableSetID"===e){let e=i.gr.fromKiwi(t);if(e)return{type:"VariableCollectionId",value:e}}if("id"===e||"alias"===e){let e=i.sD.fromKiwi(t);if(e)return{type:"VariableId",value:e}}if((0,l.W_)(t))return"symbolID"===e||"overriddenSymbolID"===e||"endpointNodeID"===e||(0,a.Z7)(e)||"guid"===e&&"diagramParentIndex"===r?{type:"NodeId",value:t}:{type:"GenericGuid",value:t};if((0,l.hV)(t)){let{guids:e}=t;return e?{type:"GenericGuidPath",value:e}:{type:"Error",value:"Invalid Fig.GUIDPath"}}if((0,l.VL)(t)){let e=t.id,r=null==(s=null==t?void 0:t.path)?void 0:s.guids;return e&&r?{type:"GenericGuidPathMapping",from:t.id,to:null==(o=t.path)?void 0:o.guids}:{type:"Error",value:"Invalid Fig.GUIDPathMapping"}}return(0,l.OA)(t)?{type:"Matrix",value:t}:(0,l.qx)(t,e)?{type:"ImageHash",value:t}:(0,l.aY)(t)?{type:"Bytes",value:t}:(0,l.Rt)(t)?{type:"EditScope",value:t}:void 0}function u(e){return"bigint"==typeof e||e%1==0?e.toString():e.toFixed(4)}let c={String:function(e){return e.value},Numeric:function(e){return u(e.value)},Vector:function(e){return u(e.value.x)+", "+u(e.value.y)}};function d(e){if(!e||!e.type)return"";let t=c[e.type];return t?t(e):(console.warn("No plaintext formatter implemented yet for property type: "+e.type),"")}let h={String:function(e){return{type:"String",value:e}},Numeric:function(e){let t=parseFloat(e);return isNaN(t)?null:{type:"Numeric",value:t}},Vector:function(e){let[t,r]=e.split(",").map(e=>parseFloat(e));return t&&r&&!isNaN(t)&&!isNaN(r)?{type:"Vector",value:{x:t,y:r}}:null}};function p(e,t){if(!e||!t)return null;let r=h[t];return r?r(e):(console.warn("No FigmaScopeValue formatter implemented yet for property type: "+t),null)}},794348:(e,t,r)=>{r.d(t,{Jt:()=>M,Lk:()=>N,Mx:()=>w,Oj:()=>k,PS:()=>P,PT:()=>A,Ro:()=>$,SP:()=>O,St:()=>C,VX:()=>g,Wh:()=>R,_9:()=>I,az:()=>b,cT:()=>_,dL:()=>x,dW:()=>D,f3:()=>L,fG:()=>v,gq:()=>T,lh:()=>B,nn:()=>E,oy:()=>y,q7:()=>F,qU:()=>f,sq:()=>m,tN:()=>U,w_:()=>G,x9:()=>V});var n=r(966712),i=r(755887),l=r(572174),a=r(886571),s=r(987918),o=r(341860),u=r(236634),c=r(752568),d=r(618058),h=r(967527),p=r(614869);function m(e){return M("FigmaScope type",{type:p.hy.String,value:e})}function f(e,t){if(!e.isAsset())return null;let r=e.isSubscribedAsset(),i=[M("Status",{type:p.hy.String,value:r?"Subscribed":"Local"}),M("Key",{type:p.hy.String,value:t??e.key()??"[not computed]"}),M("Version",{type:p.hy.String,value:e.version()??"[unknown]"})];return r&&!(0,n.kc)().ds_publish_file_deprecation&&i.push(M("File",{type:p.hy.String,value:e.publishFile()??"[unknown]"})),{label:"Asset info",children:i,expandByDefault:!1}}function y(e,t,r){let n=(0,p.wC)(e,t,r);if(null!=n)return M(e,n);if(Array.isArray(t))return G({label:e,list:t,buildChild:(e,t)=>y(e,t),expandByDefault:!1});{let r=["connectorStart","connectorEnd","symbolData"].includes(e);return U({label:e,object:t,buildChild:(t,r)=>y(t,r,e),expandByDefault:r})}}function g(e){let t=e.backingSymbol();return t?B("Backing symbol",t):M("Backing symbol ID",{type:p.hy.Error,value:"MISSING"})}function v(e){var t;let r=null==(t=e.backingSymbol())?void 0:t.parent();return r&&r.isStateGroup()?B("Backing state group",r):null}function E(e){return G({label:"Other versions",list:e,buildChild:B,expandByDefault:!1})}function S(e,t,r){return G({label:e,list:[...t].sort((e,t)=>{var r,n,i,l;if(((null==(n=null==(r=e.guidPath)?void 0:r.guids)?void 0:n.length)??0)===((null==(l=null==(i=t.guidPath)?void 0:i.guids)?void 0:l.length)??0)){if("overriddenSymbolID"in e)return -1;if("overriddenSymbolID"in t)return 1;if("componentPropAssignments"in e)return -1;if("componentPropAssignments"in t)return 1}return function(e,t){let r=e.guids??[],n=t.guids??[];for(let e=0;e<Math.min(r.length,n.length);e++){let t=r[e],i=n[e];if(t.sessionID!==i.sessionID)return t.sessionID-i.sessionID;if(t.localID!==i.localID)return t.localID-i.localID}return r.length-n.length}(e.guidPath||{},t.guidPath||{})}),buildChild:(e,{guidPath:t,...n})=>{let i=null==t?void 0:t.guids,l=i?r.followOverridePath(i):void 0;return U({label:e,value:i?{type:p.hy.OverridePath,value:i,targetGuid:null==l?void 0:l.guid()}:{type:p.hy.Error,value:"No override path"},object:n,buildChild:(e,t)=>null==t?null:y(e,t),expandByDefault:!0})},expandByDefault:!1})}function b(e){let t=e.overridesList();return 0===t.length?null:S("Instance overrides",t,e)}function I(e){let t=e.derivedOverridesList();return 0===t.length?null:S("Instance derived symbol data",t,e)}function C(e,t){let r=e.immutableFrameSublayerOverridesList();return 0===r.length?null:G({label:"Sublayer path overrides",list:r,buildChild:(e,{guidPath:r,...n})=>{var i,l;let a;let s=null==r?void 0:r.guids,o=`[${null==(i=null==s?void 0:s.map(e=>(0,d.qJ)(e)))?void 0:i.join(", ")}]`;if(t.has(o)){let e=null==(l=t.get(o))?void 0:l.sublayerGuid,r=e?(0,d.wr)(e):void 0;r&&(a=r)}return U({label:e,value:s?{type:p.hy.OverridePath,value:s,targetGuid:a}:{type:p.hy.Error,value:"No override path"},object:n,buildChild:(e,t)=>null==t?null:y(e,t),expandByDefault:!0})},expandByDefault:!1})}function T(e,t){return U({label:"Sublayer path override from containing immutable frame",object:t,buildChild:(e,t)=>null==t?null:y(e,t),expandByDefault:!0})}function N(e){return function({label:e,object:t,buildChild:r,expandByDefault:n}){let i=Object.keys(t).sort().map(e=>r(e,t[e])).filter(l.Vq);return{label:e,value:{type:p.hy.Metadata,value:i.length},children:i,expandByDefault:n}}({label:"Text insertion style",object:e,buildChild:(e,t)=>null==t?null:y(e,t),expandByDefault:!0})}function _(e){return G({label:"Style consumers",list:e,buildChild:B,expandByDefault:!1})}function D(e){return B("Variable collection",e)}function x(e){return G({label:"Variable consumers",list:e,buildChild:B,expandByDefault:!1})}function A(e){return G({label:"Consumed variables",list:e,buildChild:B,expandByDefault:!1})}function O(e){return G({label:"Variables",list:e,buildChild:B,expandByDefault:!1})}function w(e){return G({label:"Explicit mode consumers",list:e,buildChild:B,expandByDefault:!1})}function P(e){return G({label:"Direct dependents on this variable",list:e,buildChild:B,expandByDefault:!1})}function F(e){return U({label:"Variable direct dependencies",object:e,buildChild:(e,t)=>G({label:e,list:t,buildChild:B,expandByDefault:!1}),expandByDefault:!1})}function k(e){return G({label:"Consumed styles",list:e,buildChild:B,expandByDefault:!1})}function R(e){return G({label:"SceneGraph validation errors",list:e,buildChild:(e,t)=>M(e,{type:p.hy.Error,value:t}),expandByDefault:!0})}function V(e){return U({label:"Chunk details",object:e.chunk,buildChild:y,expandByDefault:!1})}function L(e){let t=new c._;for(let[r,n]of e.entries())for(let e of n)t.add(e,r);return[...t.values()].forEach(e=>e.sort()),G({label:"SceneGraph validation errors (Whole File)",list:[...t.entries()],buildChild:(e,[t,r])=>G({label:t,list:r,buildChild:B,expandByDefault:!0}),expandByDefault:!0})}function B(e,t){if(t instanceof h.R4){let r=t.isStyle()?t.styleId():void 0;if(r)return B(e,r);let n=t.isVariable()?t.variableId():void 0;if(n)return B(e,n);let i=t.isVariableCollection()?t.variableCollectionId():void 0;return i?B(e,i):B(e,t.guid())}if("string"==typeof t){let r=a.PK.fromString(t);if(r)return M(e,{type:p.hy.StyleId,value:r});let n=a.sD.fromString(t);if(n)return M(e,{type:p.hy.VariableId,value:n});let i=a.gr.fromString(t);if(i)return M(e,{type:p.hy.VariableCollectionId,value:i});let l=(0,d.wr)(t)??s.Hr;return M(e,{type:p.hy.NodeId,value:l})}return M(e,{type:p.hy.NodeId,value:t})}function M(e,t,r){return{label:e,value:t,children:[],expandByDefault:!1,onEdit:r}}function G({label:e,value:t,list:r,buildChild:n,expandByDefault:i}){return{label:e,value:t??{type:p.hy.Metadata,value:r.length},children:r.map((e,t)=>{var r;let i=n(`[${t}]`,e,t);return(0,u.jn)(e)&&i?{...i,value:{type:p.hy.OverridePath,value:null==(r=e.guidPath)?void 0:r.guids}}:i}).filter(l.Vq),expandByDefault:i}}function U({label:e,value:t,object:r,buildChild:n,expandByDefault:i}){return{label:e,value:t,children:Object.keys(r).sort().map(e=>n(e,r[e])).filter(l.Vq),expandByDefault:i}}function $(e,t,r,n){let l={x:t.m02,y:t.m12},a=t.m00*t.m11-t.m01*t.m10,s=Math.atan2(t.m10,t.m00)*(180/Math.PI);s=(0,i.xN)(s,0,1e-4)?0:-1*s;let u="No";a<0&&(u=(0,i.xN)(s,0,1e-4)?"Vertically":(0,i.xN)(Math.abs(s),180,1e-4)?"Horizontally":"Yes");let c=r&&n;return{label:e,children:[M("Offset",{type:p.hy.Vector,value:l},c?e=>{let t=o.qo.instance.get(n);t&&(t.relativeTransform={...t.relativeTransform,m02:e.value.x,m12:e.value.y})}:void 0),M("Angle",{type:p.hy.Numeric,value:s},c?e=>{let t=o.qo.instance.get(n);if(!t)return;let r=e.value*(Math.PI/180),i=Math.sin(r),l=Math.cos(r),{m00:a,m01:s,m02:u,m10:c,m11:d,m12:h}=t.relativeTransform;t.relativeTransform={m00:l*a+i*s,m01:l*s-i*a,m02:u,m10:l*c+i*d,m11:l*d-i*c,m12:h}}:void 0),M("Scale",{type:p.hy.Numeric,value:a}),M("Mirrored",{type:p.hy.String,value:u})],expandByDefault:!0}}},494299:(e,t,r)=>{r.d(t,{X:()=>s});var n=r(612389),i=r(618058),l=r(967527),a=r(55799);class s{constructor({resource:e,sensitiveTextPolicy:t}){this._shouldShowNodeTypes=!0,this._shouldShowNodePhases=!1,this.resource=e,this.sensitiveTextPolicy=t,window.figmaScopeScene=this}get type(){return this.resource.type}isFullFile(){return(0,n.GP)(this.type)}get shouldShowNodeTypes(){return this._shouldShowNodeTypes}get shouldShowNodePhases(){return this._shouldShowNodePhases}getPages(){return this.filterNodes(e=>"CANVAS"===e.nodeType(),{shouldSkipAfter:e=>"CANVAS"!==e.nodeType()})}getInternalCanvas(){return this.getPages().find(e=>e.isInternalOnly())}forEachNode(e,t={}){return(0,a.zV)(this.getRootNodes(),l.i0,e,{...t,includeSelf:!0})}mapNodes(e,t={}){return(0,a.o6)(this.getRootNodes(),l.i0,e,{...t,includeSelf:!0})}filterNodes(e,t={}){return(0,a.is)(this.getRootNodes(),l.i0,e,{...t,includeSelf:!0})}findNode(e,t={}){return(0,a.cy)(this.getRootNodes(),l.i0,e,{...t,includeSelf:!0})}countNodes(e,t={}){return(0,a.d8)(this.getRootNodes(),l.i0,e,{...t,includeSelf:!0})}someNode(e,t={}){return(0,a.Ng)(this.getRootNodes(),l.i0,e,{...t,includeSelf:!0})}everyNode(e,t={}){return(0,a.AH)(this.getRootNodes(),l.i0,e,{...t,includeSelf:!0})}guidToString(e){return(0,i.qJ)(e)}}},117837:(e,t,r)=>{r.d(t,{GP:()=>l,Z7:()=>a,ar:()=>s,ux:()=>i});var n=r(935283);let i=new Set(["inheritFillStyleID","inheritFillStyleIDForStroke","inheritGridStyleID","inheritTextStyleID","inheritEffectStyleID"]),l=new Set(["styleIdForFill","styleIdForStrokeFill","styleIdForText","styleIdForEffect","styleIdForGrid"]);function a(e){return i.has(e)}function s(e){return l.has(e)}(0,n.j)(i),(0,n.j)(l)},442260:(e,t,r)=>{r.d(t,{V:()=>b});var n=r(677469),i=r.n(n),l=r(776250),a=r(852438),s=r(886571),o=r(987918),u=r(843650),c=r(752568);class d{constructor(){this.children=new Map,this.value=[]}}class h{constructor(){this.root=new d}insert(e,t){let r=this.root;for(let t=0;t<e.length;t++){let n=e.charAt(t),i=r.children.get(n);i||r.children.set(n,i=new d),r=i}r.value.push(t)}prefixFind(e){let t=[];for(let r of this.keysWithPrefix(e)){let e=this.find(r);if(e)for(let r of e)t.push(r)}return t}find(e){let t=this.root;for(let r=0;r<e.length;r++){let n=e.charAt(r),i=t.children.get(n);if(!i)return;t=i}return t.value}keysWithPrefix(e){let t=[],r=this.findNode(e);return this.collect(r,function(e){let t=[];for(let r=0;r<e.length;r++){let n=e.charAt(r);t.push(n)}return t}(e),t),t}collect(e,t,r){if(e)for(let n of(e.value.length>0&&r.push(t.join("")),Array.from(e.children.keys())))t.push(n),this.collect(e.children.get(n),t,r),t.pop()}findNode(e){let t=this.root;for(let r=0;r<e.length;r++){let n=e.charAt(r),i=t.children.get(n);if(!i)return;t=i}return t}}var p=r(983119);class m{constructor({property:e,aliases:t=[]}){this.property=e,this.aliases=t}getValues(e){let t=e[this.property]();return Array.isArray(t)?t:null!=t?[t]:[]}indexNode(e){for(let t of this.getValues(e))this.indexEntry({property:this.property,value:t,node:e})}}class f extends m{constructor(){super(...arguments),this.byKey=new c._}indexEntry(e){let t=e.value.toLowerCase();this.byKey.add(t,e)}search(e){return this.byKey.get(e.rawValue.toLowerCase()).map(e=>({...e,isExact:!0}))}}class y extends m{constructor(){super(...arguments),this.trie=new h}indexEntry(e){this.trie.insert(e.value.toLowerCase(),e)}search(e){if(e.type===p.V.STRICT_STRING)return(this.trie.find(e.value.toLowerCase())??[]).filter(t=>t.value===e.value).map(e=>({...e,isExact:!0}));{let t=String(e.value);return this.trie.prefixFind(t.toLowerCase()).map(e=>({...e,isExact:e.value===t}))}}}class g extends m{constructor(){super(...arguments),this.bySessionId=new c.d,this.byLocalId=new c.d}indexEntry(e){let{sessionID:t,localID:r}=e.value;this.bySessionId.add(t,e),this.byLocalId.add(r,e)}search(e){if(e.type===p.V.GUID)return this.searchGuid(e.value);if(e.type===p.V.INT)return this.searchInt(e.value);if(e.type===p.V.ASSET_REF)return this.searchRef(e.value);if(e.type===p.V.ASSET_ID){let t=e.fns.toGuidObjIfLocal(e.value);if(t)return this.searchGuid(t);let r=e.fns.toRefIfSubscribed(e.value);if(r)return this.searchRef(r)}return[]}searchGuid(e){return Array.from((0,a.iR)(this.bySessionId.get(e.sessionID),this.byLocalId.get(e.localID))).map(e=>({...e,isExact:!0}))}searchRef(e){let t=o.sH(e.version);return t?this.searchGuid(t):[]}searchInt(e){return Array.from((0,a.gG)(this.bySessionId.get(e),this.byLocalId.get(e))).map(e=>({...e,isExact:!1}))}}class v extends m{constructor({assetIdFns:e,...t}){super(t),this.byAssetId=new c._,this.bySessionId=new c.d,this.byLocalId=new c.d,this.byKey=new c.d,this.byVersion=new c.d,this.assetIdFns=e}indexEntry(e){this.byAssetId.add(e.value,e);let t=this.assetIdFns.toGuidObjIfLocal(e.value);t&&(this.bySessionId.add(t.sessionID,e),this.byLocalId.add(t.localID,e));let r=this.assetIdFns.toRefIfSubscribed(e.value);r&&(this.byKey.add(r.key,e),this.byVersion.add(r.version,e))}search(e){return e.type===p.V.ASSET_ID?this.searchAssetId(e.value):e.type===p.V.GUID?this.searchGuid(e.value,e.rawValue):e.type===p.V.ASSET_REF?this.searchRef(e.value):e.type===p.V.INT?this.searchInt(e.value):[]}searchAssetId(e){return this.byAssetId.get(e).map(e=>({...e,isExact:!0}))}searchGuid(e,t){let r=Array.from((0,a.iR)(this.bySessionId.get(e.sessionID),this.byLocalId.get(e.localID))).map(e=>({...e,isExact:!0})),n=Array.from(this.byVersion.get(t)).map(e=>({...e,isExact:!1}));return r.concat(n)}searchRef(e){return Array.from((0,a.iR)(this.byKey.get(e.key),this.byVersion.get(e.version))).map(e=>({...e,isExact:!0}))}searchInt(e){return Array.from((0,a.gG)(this.bySessionId.get(e),this.byLocalId.get(e))).map(e=>({...e,isExact:!1}))}}class E extends y{constructor(){super({property:"type",aliases:["type","nodeType"]})}getValues(e){let t=e.type();return[t,u.vu[t],e.nodeType()]}}class S extends f{search(e){return e.type!==p.V.HEX_KEY&&e.type!==p.V.INT?[]:super.search(e)}}class b{constructor(){this.indices=[new g({property:"guid",aliases:["id","nodeId"]}),new g({property:"parentGuid",aliases:["parent"]}),new g({property:"overrideKey",aliases:["okey"]}),new g({property:"backingSymbolId",aliases:["symbol","symbolId"]}),new g({property:"publishId"}),new g({property:"consumedStyleIds",aliases:["consumedStyleId","consumedStyle","consumedStyles"]}),new y({property:"name"}),new y({property:"text"}),new E,new S({property:"key"}),new f({property:"version",aliases:["assetVersion","sharedSymbolVersion"]}),new S({property:"publishFile"}),new S({property:"imageHashes"}),new v({assetIdFns:s.Ws,property:"symbolId",aliases:["symbol"]}),new v({assetIdFns:s.GU,property:"stateGroupId",aliases:["stateGroup"]}),new v({assetIdFns:s.PK,property:"styleId",aliases:["style"]}),new v({assetIdFns:s.sD,property:"variableId",aliases:["variable"]}),new v({assetIdFns:s.gr,property:"variableCollectionId",aliases:["variableSetId","collectionId","variableCollection","variableSet"]})]}indexNode(e){for(let t of this.indices)t.indexNode(e)}indexNodes(e){for(let t of this.indices)for(let r of e)t.indexNode(r)}search(e,t){let r=(0,p._)(e,t);l.az.trackDefinedEvent("figmascope.search",{used_operators:r.length>1||null!=r[0].property});let n=this.searchTokens(r);return n.sort(b.compareResults),n}searchTokens(e){let t;for(let r of e){let e=new Map;for(let t of this.getIndicesToSearchForToken(r))for(let n of t.search(r.value)){let{node:t,property:r,value:i,isExact:l}=n;e.has(t)?e.get(t).matches.push({property:r,value:i,isExact:l}):e.set(t,{node:t,matches:[{property:r,value:i,isExact:l}]})}t=t?(0,a.wD)(t,e,(e,t,r)=>({node:e,matches:t.matches.concat(r.matches)})):e}return t?i()(Array.from(t.values())):[]}get indexedProperties(){return this.indices.map(e=>e.property)}getIndicesToSearchForToken({property:e}){return null==e?this.indices.filter(e=>"parentGuid"!==e.property):(e=e.toLowerCase(),this.indices.filter(t=>{if(t.property.toLowerCase()===e)return!0;for(let r of t.aliases)if(r.toLowerCase()===e)return!0;return!1}))}static compareResults(e,t){let r=e.matches.filter(e=>e.isExact).length;return t.matches.filter(e=>e.isExact).length-r||t.matches.length-e.matches.length}}},983119:(e,t,r)=>{r.d(t,{V:()=>a,_:()=>s});var n=r(886571),i=r(515009),l=r(987918),a=(e=>(e.GUID="GUID",e.ASSET_REF="ASSET_REF",e.ASSET_ID="ASSET_ID",e.INT="INT",e.HEX_KEY="HEX_KEY",e.LOOSE_STRING="LOOSE_STRING",e.STRICT_STRING="STRICT_STRING",e))(a||{});function s(e,t){var r;let a;let s=[];e=e.trim();let o=/([a-zA-Z0-9_.]+=)?("[^"]*"|'[^']*'|[^\s]+)/g;for(;a=o.exec(e);){let e=(null==(r=a[1])?void 0:r.slice(0,-1))||void 0,t=function(e){if(e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"'))return{type:"STRICT_STRING",value:e=e.slice(1,-1),rawValue:e};let t=(0,l.sH)(e);if(t)return{type:"GUID",value:t,rawValue:e};let r=n.Ws.fromString(e);if(r)return{type:"ASSET_ID",value:r,fns:n.Ws,rawValue:e};let a=n.GU.fromString(e);if(a)return{type:"ASSET_ID",value:a,fns:n.GU,rawValue:e};let s=n.PK.fromString(e);if(s)return{type:"ASSET_ID",value:s,fns:n.PK,rawValue:e};let o=n.sD.fromString(e);if(o)return{type:"ASSET_ID",value:o,fns:n.sD,rawValue:e};let u=n.gr.fromString(e);if(u)return{type:"ASSET_ID",value:u,fns:n.gr,rawValue:e};let c=i.iU.fromString(e);if(c)return{type:"ASSET_REF",value:c,rawValue:e};if(/^\d+$/.test(e)){let t=parseInt(e);if(!isNaN(t))return{type:"INT",value:t,rawValue:e}}return/^[0-9a-fA-F]+$/.test(e)?{type:"HEX_KEY",value:e,rawValue:e}:{type:"LOOSE_STRING",value:e,rawValue:e}}(a[2]);s.push({property:e,value:t})}return s.length>1&&(s=function(e){let t=[],r=e[0],n=e[1],i=2;for(;;)if(n){if(r.property||n.property||"STRICT_STRING"===r.value.type||"STRICT_STRING"===n.value.type)t.push(r),r=n,n=e[i++];else{let t=`${r.value.rawValue} ${n.value.rawValue}`;r={property:void 0,value:{type:"LOOSE_STRING",value:t,rawValue:t}},n=e[i++]}}else{t.push(r);break}return t}(s)),s=function(e,t){let r=(0,l.sH)(t);return r?e.map(e=>"LOOSE_STRING"===e.value.type&&"$0"===e.value.rawValue?{property:e.property,value:{type:"GUID",value:r,rawValue:e.value.rawValue}}:e):e}(s,t)}},853679:(e,t,r)=>{r.d(t,{Oz:()=>d,VT:()=>f,ok:()=>o,s3:()=>p,sg:()=>h,tE:()=>m,zy:()=>u});var n=r(776250),i=r(38580),l=r(374626),a=r(863822),s=r(363960),o=(e=>(e.None="No Diff",e.Layer="Layer Diff",e.Tree="Tree Diff",e.File="File Diff",e))(o||{});let u=(0,i.eU)(null);function c(e){return"Layer Diff"===e?"layer":"tree"}let d=(0,l.FZ)((0,i.eU)(null),(e,t,r)=>{var i;let l,s;let o=new Date;if("clear"===t.type)return e&&n.az.trackDefinedEvent("figmascope.diff_end",{type:c(e.type),duration_seconds:(o.getTime()-e.time.getTime())/1e3}),null;if("start"===t.type?(l=t.guidStr,s=t.diffType):"refresh"===t.type&&e&&(l=e.node.guidStr(),s=e.type),!l||!s)return null;let u=null==(i=r(a.AC).getNode(l))?void 0:i.freeze();return u?(n.az.trackDefinedEvent("figmascope.diff_start",{type:c(s)}),{type:s,node:u,time:new Date}):null}),h=(0,i.eU)(e=>{let t=e(u);return t?{type:"File Diff",scene:t}:e(d)??{type:"No Diff"}}),p=(0,i.eU)(e=>{let t=e(s.Nq),r=e(h);switch(r.type){case"Layer Diff":return r.node;case"Tree Diff":{let e=null==t?void 0:t.treeDiffKey();return r.node.findDescendant(t=>t.treeDiffKey()===e,{includeSelf:!0})??null}case"File Diff":{let e=null==t?void 0:t.treeDiffKey();return r.scene.findNode(t=>t.treeDiffKey()===e)}default:return null}});var m=(e=>(e.Changed="CHANGED",e.ChildChanged="CHILD_CHANGED",e.Added="ADDED",e.Removed="REMOVED",e))(m||{});function f(e,t,r,n){return e?t?r?"CHANGED":n?"CHILD_CHANGED":void 0:"ADDED":"REMOVED"}},863822:(e,t,r)=>{r.d(t,{AC:()=>d,Ah:()=>h,BJ:()=>p,XM:()=>c,_V:()=>u,o3:()=>o,zm:()=>m});var n=r(935283),i=r(966159),l=r(38580),a=r(288706),s=r(586459);let o=(0,l.eU)((0,i.Ok)()),u=(0,a.mg)(o,e=>"SUCCESS"===e.status?e.value.scenes.length:0),c=(0,l.eU)(0),d=(0,l.eU)(e=>{let t=e(o),r=e(c);if(t.status!==s.r.SUCCESS)throw Error("FigmaScope internal code is running before the FigmaScope scene is ready. This is a bug - please report in #figmascope.");return t.value.scenes[r]}),h=(0,a.mg)(o,e=>"SUCCESS"===e.status?e.value.resource:null),p=(0,a.mg)(h,e=>e?function(e){switch(e.type){case"server_file":return{type:"File",properties:{"File Key":e.key}};case"server_checkpoint":return{type:"File checkpoint",properties:{"Checkpoint Key":e.key}};case"server_checkpoint_diff":return{type:"Branching Checkpoint Diff",properties:{"Diff Key":e.key}};case"multiplayer_journal":return{type:"Multiplayer journal",properties:{"File key":e.fileKey,"End sequence number":e.endSequenceNumber??""}};case"multiplayer_journals":return{type:"Multiplayer journals",properties:{"File key":e.fileKey,"Start sequence number":e.startSequenceNumber??"","End sequence number":e.endSequenceNumber??""}};case"local_file":return{type:"Local .fig File",properties:{Filename:e.name}};case"local_diff_file":return{type:"Local .figd File",properties:{Filename:e.name}};case"pasted_data":return{type:"Pasted data",properties:{}};default:(0,n.xb)(e)}}(e):{type:"None",properties:{}}),m=(0,a.mg)(d,e=>e.getRootNodes())},363960:(e,t,r)=>{r.d(t,{AJ:()=>g,JN:()=>f,Nq:()=>v,Sd:()=>y,bA:()=>h,f:()=>d,hh:()=>S,jI:()=>m,vj:()=>E});var n=r(411855),i=r(44948),l=r(38580),a=r(374626),s=r(356390),o=r(618058),u=r(863822),c=r(498549);let d=n.createContext(null),h=(0,l.eU)(e=>e(c.l).followSelection,(e,t,r)=>t(c.l,e=>({...e,followSelection:r}))),{valueAtom:p,undoAtom:m,redoAtom:f,historyAtom:y}=(0,a.xP)("0:0"),g=(0,l.eU)(e=>e(p),(e,t,r)=>{let n=(0,o.SR)(r);n&&t(p,n)}),v=(0,l.eU)(e=>{let t=e(u.AC),r=e(g);return t.getNode(r)});function E({appSelection:e,setAppSelection:t}){let r=(0,a.md)(u.AC),l=(0,a.md)(h),[o,c]=(0,a.fp)(g);n.useEffect(()=>{s.Y5.setFigmascopeSelectedGuidCallback(c)},[c]);let d=o?r.getNode(o):null,p=(0,i.k9)(()=>d?S(d):null,[d]);n.useEffect(()=>{l&&t&&p&&t(p)},[l,t,p]),n.useEffect(()=>{l&&(null==e?void 0:e.guidStr)&&c(e.guidStr)},[l,null==e?void 0:e.guidStr,c])}function S(e){if(!e.isInternalOnly())return{selectionType:"canvas",guidStr:e.guidStr()};if(e.isStyle()&&e.isLocalAsset()){let t=e.nodeChange.styleType;if(t)return{selectionType:"local_style",guidStr:e.guidStr(),styleType:t}}return null}},498549:(e,t,r)=>{r.d(t,{h:()=>i,l:()=>l});var n=r(374626),i=(e=>(e.Position="Position",e.Name="Name",e.Memory="Memory",e.NodeId="Node ID",e))(i||{});let l=(0,n.E3)("figmascope-settings",{followSelection:!1,sortOrder:"Position"})},236634:(e,t,r)=>{r.d(t,{Kg:()=>y,Lm:()=>m,M_:()=>d,OA:()=>s,Rt:()=>g,VL:()=>h,WX:()=>o,W_:()=>a,_o:()=>i,aY:()=>u,hV:()=>l,jn:()=>p,kf:()=>f,qx:()=>c,sX:()=>v});var n=r(906087);function i(e){return["r","g","b","a"].every(t=>t in e)}function l(e){return"guids"in e&&e.guids instanceof Array&&e.guids.every(a)}function a(e){return["sessionID","localID"].every(t=>t in e)}function s(e){return["m00","m01","m02","m10","m11","m12"].every(t=>t in e)}function o(e){return["x","y"].every(t=>t in e)}function u(e){return e instanceof Uint8Array}function c(e,t){return e instanceof Uint8Array&&"hash"===t}function d(e,t){return"number"==typeof e&&("commandsBlob"===t||"dataBlob"===t)}function h(e){return"id"in e&&"path"in e&&a(e.id)&&l(e.path)}function p(e){return"object"==typeof e&&"guidPath"in e&&l(e.guidPath)}function m(e){return"boolean"==typeof e}function f(e){return"number"==typeof e||"bigint"==typeof e}function y(e){return"string"==typeof e}function g(e){return"object"==typeof e&&"type"in e&&"label"in e}function v(e,t){return"string"==typeof e&&n.w.has(t)}},752568:(e,t,r)=>{r.d(t,{_:()=>i,d:()=>l});class n{constructor(){this.map=new Map}has(e){return this.map.has(e)}get size(){return this.map.size}keys(){return this.map.keys()}values(){return this.map.values()}entries(){return this.map.entries()}}class i extends n{constructor(e){if(super(),e)for(let t of e)this.add(t[0],t[1])}add(e,t){this.has(e)?this.map.get(e).push(t):this.map.set(e,[t])}get(e){return this.map.get(e)??[]}}class l extends n{constructor(e){if(super(),e)for(let t of e)this.add(t[0],t[1])}add(e,t){this.has(e)?this.map.get(e).add(t):this.map.set(e,new Set([t]))}get(e){return this.map.get(e)??new Set}}},506563:(e,t,r)=>{r.d(t,{e:()=>n});let n="https://go/figmascope-docs"},906087:(e,t,r)=>{r.d(t,{b:()=>l,w:()=>n});let n=new Set(["name","characters","symbolDescription","description","url"]),i=RegExp("^(background|circle|column|component|dialog|document|ellipse|frame|group|icon|image|internal only canvas|line|padding|page|path|polygon|rectangle|row|star|text|union|vector)\\s*[\\d\\.]*$");function l(e,t){if(""===e)return"";if("show"===t)return e;let r='"'===e[0]&&'"'===e[e.length-1],n=r?e.substring(1,e.length-1):e;if(i.test(n.toLowerCase()))return e;let l=r?'"':"";return l+n[0]+n.substring(1,n.length-1).replace(/\S/g,"\u2022")+n[n.length-1]+l}},402759:(e,t,r)=>{r.d(t,{rf:()=>a,tV:()=>s,zG:()=>l});var n=r(411855),i=r(278733);function l(){return n.createElement(s,null,n.createElement("p",null,"Reading file..."))}function a({error:e}){let t="Oops! Something went wrong";return"string"==typeof e?t=e:e instanceof Error&&(t=e.message,console.error(e)),n.createElement(s,null,n.createElement("p",{style:i.sx.colorTextOndanger.colorBgDanger.p16.font20.$},t))}function s({children:e}){return n.createElement("div",{style:i.sx.fillPositionedContainer.flex.itemsCenter.justifyCenter.flexColumn.lh1_5Lines.font16.$},e)}},109022:(e,t,r)=>{r.d(t,{J:()=>r_});var n=r(411855),i=r(829816),l=r(776250),a=r(935283),s=r(189430),o=r(374626),u=r(646240),c=r(498750),d=r(586459),h=r(946689),p=r(762638),m=r(278733),f=r(175290),y=r(809840),g=r(794348),v=r(853679),E=r(863822),S=r(363960),b=r(966159),I=r(38580),C=r(27087),T=r(611978),N=r(752568),_=r(330845),D=(e=>(e[e.Fetched=0]="Fetched",e[e.Fetching=1]="Fetching",e[e.NeverFetched=2]="NeverFetched",e))(D||{});let x=(0,I.eU)(e=>{var t;let r=e(T.OC);return"fullscreen"===r.view?`/api/file/scenegraph_validations/${r.fileKey}`:(0,_.E)(r)&&(null==(t=r.resource)?void 0:t.type)==="server_file"?`/api/admin/scenegraph_validations/${r.resource.key}`:null}),A=(0,I.eU)(e=>null!=e(x)),O=(()=>{let e=(0,I.eU)((0,b.Ok)());return(0,I.eU)(t=>t(e),async(t,r)=>{let n;if(t(e).status===d.r.LOADING)return;let i=t(x);if(i){r(e,(0,b.ux)());try{n=await w(i)}catch(t){r(e,(0,b.uW)(t));return}r(e,(0,b.NY)(n))}})})();async function w(e){let t=await (0,C.GD)(e),r=new N._;for(let e of t.data.meta.data.results.violations)if("always-fail-for-testing"!==e.name)for(let t of e.instances)r.add(t.guid,t.message);return r}var P=r(629019),F=r.n(P),k=r(686759),R=r(886571),V=r(618058),L=r(843650);let B=p.cx.inlineBlock.bRadius4.minW40.w40.h16.flex.alignCenter.justifyCenter.fontSemiBold,M={[L.DB.Grouping]:B.colorBgInverse.colorTextOninverse.$,[L.DB.Shape]:B.colorBgSuccess.colorTextOnsuccess.$,[L.DB.DesignSystems]:B.colorBgComponent.colorTextOncomponent.$,[L.DB.ImmutableFrame]:B.colorBgFigjamTertiary.colorText.$,[L.DB.Media]:B.colorBgWarning.colorTextOnwarning.$,[L.DB.Other]:B.colorBgSecondary.colorBgOnselected.$},G={fontSize:9,lineHeight:"16px",fontStyle:"normal"};function U({type:e}){let t=(0,L.p7)(e);return n.createElement("div",{title:e,className:M[t],style:G},L.vu[e])}let $={CREATED:"ADD",MODIFIED:"EDIT",REMOVED:"DEL"},H={CREATED:B.minW36.colorBgSuccess.colorTextOnsuccess.$,MODIFIED:B.minW36.colorBgBrandSecondary.colorTextOnbrandSecondary.$,REMOVED:B.minW36.colorBgDanger.colorTextOndanger.$};function K({phase:e}){return n.createElement("div",{title:e,className:H[e],style:G},$[e])}function z({iconConfig:e}){if("string"!=typeof e)return n.createElement(f.Y,{width:"hug-contents"},n.createElement(K,{phase:e.phase}),"NONE"!==e.type?n.createElement(U,{type:e.type}):n.createElement("div",{className:B.$}));switch(e){case"CREATED":case"MODIFIED":case"REMOVED":return n.createElement(K,{phase:e});default:return n.createElement(U,{type:e})}}function Y({label:e}){return n.createElement("div",{title:e,className:B.b1.colorBorder.colorTextSecondary.$,style:G},e)}let W="figmascope_guid_display--canUnderline--8blSe";function j({guid:e}){let t=(0,o.md)(E.AC).getNode(e);return n.createElement(ec,{type:3,targetNode:t,fallbackCopyOnClickText:(0,V.qJ)(e)},en(e))}function J({styleId:e}){let t=(0,o.md)(E.AC).getStyle(e);return n.createElement(ec,{type:3,targetNode:t,fallbackCopyOnClickText:R.PK.toString(e)},el(e,R.PK))}function q({variableId:e}){let t=(0,o.md)(E.AC).getVariable(e);return n.createElement(ec,{type:3,targetNode:t,fallbackCopyOnClickText:R.sD.toString(e)},el(e,R.sD))}function X({variableCollectionId:e}){let t=(0,o.md)(E.AC).getVariableCollection(e);return n.createElement(ec,{type:3,targetNode:t,fallbackCopyOnClickText:R.gr.toString(e)},el(e,R.gr))}function Z({overrideKey:e}){let t=(0,V.dL)(e);return n.createElement(eu,{type:t?2:0},en(e))}function Q({overridePath:e}){let{isValid:t,formatted:r}=ei(e);return n.createElement(eu,{type:t?2:0},r)}function ee({overridePath:e,targetGuid:t}){let{isValid:r,formatted:i}=ei(e),l=(0,o.md)(E.AC).getNode(t);return n.createElement(ec,{type:r?3:0,targetNode:l,fallbackCopyOnClickText:(0,V.bb)(e)},i)}function et({guid:e}){let t=(0,V.dL)(e);return n.createElement(eu,{type:t?1:0},en(e))}function er({guidPath:e}){let{isValid:t,formatted:r}=ei(e);return n.createElement(eu,{type:t?1:0},r)}function en(e){return`(${(0,V.qJ)(e)})`}function ei(e){let t=(0,V.ZJ)(e);return{isValid:e.length>0&&t.every(V.dL),formatted:`[${t.map(e=>`(${(0,V.qJ)(e)})`).join(", ")}]`}}function el(e,t){let r=t.toGuidStrIfLocal(e);if(r)return en(r);let n=t.toRefIfSubscribed(e);return n?`${n.key.slice(0,5)}...${n.key.slice(-5)}/${n.version}`:"[unknown_asset_id]"}var ea=(e=>(e[e.Invalid=0]="Invalid",e[e.Normal=1]="Normal",e[e.Override=2]="Override",e[e.Link=3]="Link",e))(ea||{});let es=p.cx.inlineBlock,eo={0:es.colorTextDanger.$,1:es.colorText.fontSemiBold.$,2:es.colorTextSecondary.italic.$,3:es.colorTextFigjam.fontSemiBold.$};function eu({type:e,children:t}){return n.createElement("span",{className:eo[e]},t)}function ec({type:e,targetNode:t,fallbackCopyOnClickText:r,children:i}){let l=(0,u.Xr)(S.AJ),a=t?()=>l(t.guidStr()):()=>{(0,k.Dk)(r).then(()=>window.alert(`Copied ${r} to clipboard`)).catch(()=>window.alert(r))},s=t?e:0;return n.createElement("span",{role:"button",className:F()(p.cx.inlineBlock.$,"figmascope_guid_display--guidLink--UKqmp"),onClick:a},n.createElement(f.Y,{spacing:4},t&&n.createElement(z,{iconConfig:t.iconConfig()}),n.createElement("span",{className:F()(eo[s],W)},i),t&&n.createElement("span",{className:F()(eo[s],W,p.cx.fontNormal.$)},t.name())))}var ed=r(457473),eh=r(806247),ep=r(290357),em=r(461816),ef=r.n(em),ey=r(717068),eg=r(44948),ev=r(96328),eE=r(852800),eS=r(479118);function eb(e,t,r){let n={...e},i=!1;for(let e of t)i=i||n[e]!==r,n[e]=r;return i?n:e}function eI(e,t){let r={...e},n=!1;for(let e of t)n=n||e in r,delete r[e];return n?r:e}var eC=(e=>(e[e.No=0]="No",e[e.Yes=1]="Yes",e))(eC||{});function eT(e,t,r,n=1){let i=[t,...r];return e[t]?n?eI(e,i):eb(e,i,!1):eb(e,i,!0)}function eN(e=1){let t=(0,I.eU)({});return(0,I.eU)(e=>e(t),(r,n,i,l)=>n(t,eT(r(t),i,l??[],e)))}let e_=(e,t)=>{var r;return(null==(r=e.getNode(t))?void 0:r.mapAncestors(e=>e.guidStr()))??[]},eD=(e,t)=>{var r;return(null==(r=e.getNode(t))?void 0:r.mapDescendants(e=>e.guidStr()))??[]},ex=(0,o.FZ)((0,I.eU)({}),(e,t,r)=>{let n=r(E.AC);switch(t.type){case"toggleNodeExpanded":return eT(e,t.guidStr,t.toggleSubtree?eD(n,t.guidStr):[]);case"expandNodeAncestors":return eb(e,e_(n,t.guidStr),!0);case"expandNodeDescendants":return eb(e,[t.guidStr,...eD(n,t.guidStr)],!0);case"collapseNodeDescendants":return eI(e,[t.guidStr,...eD(n,t.guidStr)])}});var eA=r(498549);let eO=(0,I.eU)(e=>e(eA.l).sortOrder,(e,t,r)=>t(eA.l,e=>({...e,sortOrder:r}))),ew=(0,I.eU)(e=>{var t;let r=[eA.h.Position,eA.h.Name,eA.h.NodeId];return(null==(t=e(E.zm)[0])?void 0:t.treeMemoryUsage)!=null&&r.push(eA.h.Memory),r.sort(),r}),eP=(0,I.eU)(e=>{switch(e(eO)){case eA.h.Position:return eF;case eA.h.Name:return ek;case eA.h.Memory:return eR;case eA.h.NodeId:return eV}});function eF(e,t){var r,n;let i=null==(r=e.nodeChange.parentIndex)?void 0:r.position,l=null==(n=t.nodeChange.parentIndex)?void 0:n.position;return null==i&&null==l?0:null==l?1:null==i||i<l?-1:i>l?1:eV(e,t)}function ek(e,t){return e.displayName().localeCompare(t.displayName())||eV(e,t)}function eR(e,t){return(t.treeMemoryUsage??0)-(e.treeMemoryUsage??0)||eV(e,t)}function eV(e,t){let{sessionID:r,localID:n}=e.guid(),{sessionID:i,localID:l}=t.guid();return r-i||n-l}var eL=r(602126),eB=r(268537),eM=r(939863);let eG=eB.W.Dropdown,eU=eB.W.Option,e$=eB.W.Separator;function eH({contextMenuData:{guidStr:e,position:t},onClose:r}){let i=n.useContext(S.f),l=n.useRef(null);(0,eL.ww)(l,r);let a=(0,o.md)(E.AC).getNode(e),[s,c]=(0,o.fp)(v.Oz),d=(0,u.Xr)(ex);if(null==a)return null;let h=e=>()=>{e(),r()},p=a.children().length>0,f=(()=>{if(i){let e=(0,S.hh)(a);if(e)return h(()=>i(e))}})(),y=a.isInternalOnly()||"DOCUMENT"===a.nodeType()||"CANVAS"===a.nodeType(),g=e=>h(()=>eE.glU.triggerAction(e,{guid:a.guidStr()})),b=(null==s?void 0:s.node.guidStr())===a.guidStr();return n.createElement(eG,{style:{...m.sx.fixed.$,...t}},n.createElement("div",{ref:l},f&&n.createElement(eU,{onClick:f},"Jump to node"),p&&n.createElement(eU,{onClick:h(()=>d({type:"expandNodeDescendants",guidStr:e}))},"Expand descendants"),p&&n.createElement(eU,{onClick:h(()=>d({type:"collapseNodeDescendants",guidStr:e}))},"Collapse descendants"),(f||p)&&n.createElement(e$,null),b&&n.createElement(eU,{onClick:h(()=>c({type:"clear"}))},"Stop diffing against this node"),(!b||s.type!==v.ok.Layer)&&n.createElement(eU,{onClick:h(()=>c({type:"start",diffType:v.ok.Layer,guidStr:e}))},"Layer diff against this node"),(!b||s.type!==v.ok.Tree)&&n.createElement(eU,{onClick:h(()=>c({type:"start",diffType:v.ok.Tree,guidStr:e}))},"Tree diff against this node"),!y&&n.createElement(e$,null),!y&&f&&"DOCUMENT"!==a.nodeType()&&"CANVAS"!==a.nodeType()&&n.createElement(eU,{onClick:g("debug-print-as-test-code")},n.createElement(eM.Tx,{id:"fullscreen_actions.debug-print-as-test-code"})),!y&&f&&"VECTOR"===a.nodeType()&&n.createElement(eU,{onClick:g("debug-print-vector-network-as-test-code")},n.createElement(eM.Tx,{id:"fullscreen_actions.debug-print-vector-network-as-test-code"}))))}var eK=r(358145),ez=r(723325),eY=r(904794);let eW=n.createContext(()=>!1);function ej({children:e,className:t,style:r}){let i=n.useRef(null),l=n.useCallback(()=>{var e;return!!(null==(e=i.current)?void 0:e.contains(document.activeElement))},[]);return n.createElement(ez.dP,{ref:i,className:t,style:r,allowVim:!0},n.createElement(eW.Provider,{value:l},e))}let eJ="figmascope_tree_item--expansionToggle--cDA3p";function eq({children:e,diffType:t,isExpanded:r,isLeaf:i,isPinned:l,isSelected:a,isChanging:s,indent:o,style:u,keyboardNavigationPath:c,toggleExpanded:d,togglePinned:h,select:p,onContextMenu:m,onMouseEnter:f,onMouseLeave:y,isEditing:g,setIsEditing:v}){let{setKeyboardNavigationElement:E,keyboardNavigationItem:S,isFocused:b}=(0,ez.M3)({path:c}),I=n.useContext(eW),C=(0,eK.ZC)(a);n.useEffect(()=>{!C&&a&&!b&&I()&&(null==S||S.focus())},[b,C,a,S,I]);let T=n.useRef(!1),N=n.useCallback(e=>e.target instanceof Element&&"BUTTON"===e.target.tagName,[]),_=n.useCallback(e=>{var t;return!!(e.target instanceof Element&&(e.target.classList.contains(eJ)||(null==(t=e.target.parentElement)?void 0:t.classList.contains(eJ))))},[]);return n.createElement("button",{ref:E,style:u,className:F()("figmascope_tree_item--treeItem--zf8eH",{"figmascope_tree_item--selected--eG-Br":a||b,"figmascope_tree_item--changing--5zuTD":s,"figmascope_tree_item--disableHover--y2Gw5":g}),onFocus:p,onMouseDown:g?void 0:e=>{(N(e)||_(e))&&e.detail>1&&e.preventDefault(),_(e)?T.current=e.detail>1:T.current=!0},onClick:g?void 0:e=>{T.current?T.current=!1:d(e.metaKey||e.altKey),e.currentTarget.focus()},onMouseEnter:f,onMouseLeave:y,onDoubleClick:e=>{_(e)||(v?v(!0):d(e.metaKey))},onKeyDown:e=>{(r&&(0,ez.yn)(e.code,!0)||!r&&(0,ez.lv)(e.code,!0))&&d(e.metaKey)},onContextMenu:m},n.createElement(eY.Y,null,n.createElement(eX,{indent:o,isLeaf:i,isExpanded:r}),e,h&&!g&&n.createElement(eQ,{isPinned:!!l,togglePinned:h}),t&&n.createElement(eZ,{diffType:t}),!1===g&&v&&n.createElement(e0,{onClick:()=>{v(!0)}})))}function eX({indent:e,isLeaf:t,isExpanded:r}){return n.createElement("div",{className:F()(eJ,!t&&"figmascope_tree_item--clickable--y04JT"),style:{paddingLeft:14*e,width:14,minHeight:14}},n.createElement("span",null,t?"":r?"\u25BC":"\u25B6"))}function eZ({diffType:e}){return n.createElement("div",{title:e,className:p.cx.minW16.h16.bRadius2.ml8.font12.fontBold.lh16.alignCenter.cursorDefault.match(e,{[v.tE.Changed]:p.cx.colorBgBrandSecondary.colorTextOnbrandSecondary,[v.tE.ChildChanged]:p.cx.colorBgBrand.colorTextOnbrand,[v.tE.Added]:p.cx.colorBgSuccess.colorTextOnsuccess,[v.tE.Removed]:p.cx.colorBgDanger.colorTextOndanger}).$},e===v.tE.Added&&"+",e===v.tE.Removed&&"-",(e===v.tE.Changed||e===v.tE.ChildChanged)&&"\u2732")}function eQ({isPinned:e,togglePinned:t}){return n.createElement("span",{onClick:t,className:e?"figmascope_tree_item--unpinToggle--X5czi figmascope_tree_item--_pinToggleBase--aafwk":"figmascope_tree_item--pinToggle--XSk0J figmascope_tree_item--_pinToggleBase--aafwk"},e?"Unpin":"Pin")}function e0({onClick:e}){return n.createElement("span",{onClick:e,className:"figmascope_tree_item--editButton--Gt2bw figmascope_tree_item--_pinToggleBase--aafwk"},"Edit")}let e1=n.memo(function({diffType:e,guidStr:t,iconConfig:r,indent:i,index:l,isExpanded:a,isLeaf:s,isOrphan:o,isSelected:u,isStack:c,memoryPercent:d,name:h,overrideKeyStr:m,pageSyncingStatus:y,style:g,validationInfo:v,select:E,toggle:S,showContextMenu:b}){let I=n.useCallback(e=>{e.preventDefault(),b({guidStr:t,position:{left:e.clientX,top:e.clientY}})},[t,b]);return n.createElement(eq,{diffType:e,keyboardNavigationPath:[l],isSelected:u,isLeaf:s,isExpanded:a,indent:i,style:g,select:()=>E(t),toggleExpanded:e=>S(t,e),onContextMenu:I,onMouseEnter:()=>{eE.Ez5&&eE.Ez5.editorState().figmaScopeHighlightedNode.set(t)},onMouseLeave:()=>{eE.Ez5&&eE.Ez5.editorState().figmaScopeHighlightedNode.set("")}},n.createElement(z,{iconConfig:r}),n.createElement(et,{guid:t}),o&&n.createElement("span",{className:p.cx.ml4.colorTextWarning.$},"(Orphan)"),m&&n.createElement(Z,{overrideKey:m}),n.createElement("div",{title:h,className:p.cx.ellipsis.noWrap.overflowHidden.$},h),n.createElement(f.M,null),c&&n.createElement(Y,{label:"STACK"}),n.createElement(e8,{info:v}),null!=y&&n.createElement(e2,{status:y}),null!=d&&n.createElement("span",{className:p.cx.colorTextSecondary.$,title:"Node memory usage"},d))});function e8({info:e}){if(void 0===e||0===e.forSelf&&0===e.forChildren)return null;let t=[];e.forSelf&&t.push(`${(0,ev.td)(e.forSelf,"scenegraph validation error")} for this node`),e.forChildren&&t.push(`${(0,ev.td)(e.forChildren,"scenegraph validation error")} in this node's children`);let r=p.cx.flex.alignCenter.justifyCenter.if(0===e.forSelf,p.cx.colorTextWarning,p.cx.colorTextDanger.fontSemiBold).$;return n.createElement("div",{title:t.join(", "),className:r},e.forSelf?(0,ev.td)(e.forSelf,"error"):(0,ev.LD)(e.forChildren,"Child error"))}function e6({style:e,data:{displayedLayers:t,pagesList:r,selectedGuid:i,...l},index:a}){let s=t[a],o=(0,eg.zN)(e),u=null;return s.isCanvas&&r&&(u=(0,eS.Fy)(r,s.guidStr)),n.createElement(e1,{...s,...l,isSelected:i===s.guidStr,style:o,index:a,pageSyncingStatus:u})}function e5({pagesList:e}){let t=(0,o.md)(e3),[r,i]=(0,o.fp)(S.AJ),[l,a]=n.useState(null),s=n.useRef(null);n.useEffect(()=>{var e;let n=t.findIndex(e=>e.guidStr===r);n>=0&&(null==(e=s.current)||e.scrollToItem(n,"smart"))},[t,r]);let c=(0,u.Xr)(ex);n.useEffect(()=>{c({type:"expandNodeAncestors",guidStr:r})},[c,r]);let d=n.useCallback((e,t)=>{c({type:"toggleNodeExpanded",guidStr:e,toggleSubtree:t})},[c]);return 0===t.length?n.createElement("div",null,"Empty Scene"):n.createElement(n.Fragment,null,n.createElement(ed.A,{disableWidth:!0},({height:l})=>n.createElement(eh.Y1,{itemSize:18,itemCount:t.length,height:l,ref:s,itemData:{displayedLayers:t,selectedGuid:r,pagesList:e,select:i,toggle:d,showContextMenu:a},width:"100%"},e6)),l&&n.createElement(eH,{contextMenuData:l,onClose:()=>{a(null)}}))}function e2({status:e}){let t=p.cx.cursorDefault.font14.lh0.$;switch(e){case eE.xal.NOT_LOADED:return n.createElement("span",{className:t,title:"Page not loaded due to incremental loading"},"\u2601\uFE0F");case eE.xal.REQUESTED:return n.createElement("span",{className:t,title:"Page loading in progress"},"\u26C5");case eE.xal.LOADED:return null}}let e4=(0,I.eU)(e=>{var t;let r=e(E.AC),n=e(O),i=new Map;if(n.status!==d.r.SUCCESS)return i;let l=e=>{let t=i.get(e);if(t)return t;let r={forSelf:0,forChildren:0};return i.set(e,r),r};for(let e of n.value.keys()){l(e).forSelf++;let n=null==(t=r.getNode(e))?void 0:t.parent();for(;n&&!i.has(n.guidStr());)l(n.guidStr()).forChildren++,n=n.parent()}return i}),e3=(0,I.eU)(e=>{let t=e(E.AC),r=t.getRootNodes(),n=e(v.sg),i=e(ex),l=e(eP),a=e(e4),s=(()=>{switch(n.type){case v.ok.Tree:return[n.node];case v.ok.File:return n.scene.getRootNodes();default:return[]}})(),o="multiplayer_journal"===t.type,u={sortFn:l,expandedGuids:i,guidToValidationInfo:a,showOverrideKeys:!o,computeChildren:!o};return ef()(r,e=>{if(!e)return[];if(0===s.length)return e9(e,0,u);let t=te(e,s);return t?e7(e,t,0,u):function e(t,r,n,i){let l=t.guidStr(),a=i.computeChildren?t.children():[],s=0===a.length,o=!!i.expandedGuids[l],u=!1,c=ef()(a,t=>{var l;let a=(()=>{let l=te(t,r);if(l)return e7(t,l,n+1,i);let a=r.filter(e=>e.ancestorPathStr().includes(t.guidStr()));return a.length>0?e(t,a,n+1,i):e9(t,n+1,i)})();return u=u||(null==(l=a[0])?void 0:l.diffType)!=null,a}),d={diffType:u?v.tE.ChildChanged:void 0,validationInfo:i.guidToValidationInfo.get(l),guidStr:l,iconConfig:t.iconConfig(),indent:n,isExpanded:o,isLeaf:s,isOrphan:t.isOrphan(),name:t.displayName(),overrideKeyStr:i.showOverrideKeys?t.overrideKeyStr():"",memoryPercent:t.memoryPercentStr(),isStack:t.isStack(),isCanvas:t.isCanvas()};return o?[d,...c]:[d]}(e,s,0,u)})});function e9(e,t,r){let n=e.guidStr(),i=r.computeChildren?e.children():[],l=0===i.length,a=!!r.expandedGuids[n],s={diffType:void 0,validationInfo:r.guidToValidationInfo.get(n),guidStr:n,iconConfig:e.iconConfig(),indent:t,isExpanded:a,isLeaf:l,isOrphan:e.isOrphan(),name:e.displayName(),overrideKeyStr:r.showOverrideKeys?e.overrideKeyStr():"",memoryPercent:e.memoryPercentStr(),isStack:e.isStack(),isCanvas:e.isCanvas()};return a?[s,...ef()(tt(i,r.sortFn),e=>e9(e,t+1,r))]:[s]}function e7(e,t,r,n){let i=e??t;if(!i)throw Error("Diffing two nothings");if(e&&t&&e.treeDiffKey()!==t.treeDiffKey())throw Error("Diffing nodes with mismatched keys");let l=i.guidStr(),a=tt((null==e?void 0:e.children())??[],n.sortFn),s=tt((null==t?void 0:t.children())??[],n.sortFn),o=n.computeChildren?(0,ey.TR)(a,s,e=>e.treeDiffKey()):[],u=!1,c=ef()(o,({left:e,right:t})=>{var i;let l=e7(e,t,r+1,n);return u=u||(null==(i=l[0])?void 0:i.diffType)!=null,l}),d=e&&t&&(0,ep.diff)(e.nodeChange,t.nodeChange,(e,t)=>"commandsBlob"===t),h=(0,v.VT)(e,t,!!d,u),p=null==e?void 0:e.name(),m=null==t?void 0:t.name(),f=null!=p&&null!=m&&p!==m?`${p} <=> ${m}`:i.name(),y=!!n.expandedGuids[l],g={diffType:h,validationInfo:n.guidToValidationInfo.get(l),guidStr:l,iconConfig:i.iconConfig(),indent:r,isExpanded:y,isLeaf:0===o.length,isOrphan:!!(null==e?void 0:e.isOrphan()),name:f,overrideKeyStr:n.showOverrideKeys?i.overrideKeyStr():"",memoryPercent:i.memoryPercentStr(),isStack:i.isStack(),isCanvas:i.isCanvas()};return y?[g,...c]:[g]}function te(e,t){let r=e.treeDiffKey();return t.find(e=>e.treeDiffKey()===r)}function tt(e,t){return e.slice().sort(t)}var tr=r(865618),tn=r(297666),ti=r(572174),tl=r(111161),ta=r(614869),ts=r(364898),to=r(428654),tu=r(906087),tc=r(91408),td=r(275725),th=r(620722),tp=r(860168);let tm=(0,tc.jz)(tp.HJx),tf=(0,tc.jz)(tp.EJM),ty=new WeakMap;function tg(e){let t=ty.get(e);if(void 0!==t)return t;let[r,n]=eE.Vzr.generateThumbnailForNode((0,V.qJ)(e),4*tf,4*tm,4,{forceContentsOnly:!0,isDetatchedComponentScene:!1});if(!n||0===n.length||!r)return ty.set(e,null),null;let{width:i,height:l}=r,a={url:URL.createObjectURL(new Blob([n])),renderWidth:i/4,renderHeight:l/4};return ty.set(e,a),a}let tv=(0,tc.jz)(tp.HJx),tE=(0,tc.jz)(tp.EJM);function tS({thumbnailInput:e}){let t=tg(e),r=(0,td.c6)((0,V.qJ)(e));return t?n.createElement("div",{className:p.cx.wFull.flex.flexShrink1.itemsCenter.justifyCenter.$,style:r},n.createElement(th.J,{className:"figmascope_thumbnail_preview_panel--thumbnailPreview--UmQa0",src:t.url,width:t.renderWidth>tE?tE:t.renderWidth,height:t.renderHeight>tv?tv:t.renderHeight})):n.createElement("span",{className:p.cx.noWrap.colorTextDesign.$},"Error generating thumbnail")}function tb({value:e}){switch(e.type){case ta.hy.BlobIndex:return n.createElement(tV,{index:e.value});case ta.hy.SensitiveText:return n.createElement(tA,{value:e.value});case ta.hy.Boolean:return n.createElement(tD,{value:e.value});case ta.hy.Numeric:return n.createElement(tP,{value:e.value});case ta.hy.String:return n.createElement(tx,{value:e.value});case ta.hy.Position:return n.createElement(tO,{value:e.value});case ta.hy.Color:return n.createElement(tw,{value:e.value});case ta.hy.Vector:return n.createElement(tF,{value:e.value});case ta.hy.Matrix:return n.createElement(tk,{value:e.value});case ta.hy.NodeId:return n.createElement(j,{guid:e.value});case ta.hy.StyleId:return n.createElement(J,{styleId:e.value});case ta.hy.VariableId:return n.createElement(q,{variableId:e.value});case ta.hy.VariableCollectionId:return n.createElement(X,{variableCollectionId:e.value});case ta.hy.OverrideKey:return n.createElement(Z,{overrideKey:e.value});case ta.hy.OverridePath:return e.targetGuid?n.createElement(ee,{overridePath:e.value,targetGuid:e.targetGuid}):n.createElement(Q,{overridePath:e.value});case ta.hy.GenericGuid:return n.createElement(et,{guid:e.value});case ta.hy.GenericGuidPath:return n.createElement(er,{guidPath:e.value});case ta.hy.GenericGuidPathMapping:return n.createElement(n.Fragment,null,n.createElement(et,{guid:e.from})," \u21D4 ",n.createElement(er,{guidPath:e.to}));case ta.hy.ImageHash:return n.createElement(tL,{value:e.value});case ta.hy.Bytes:return n.createElement(tR,{value:e.value});case ta.hy.Metadata:return n.createElement(tG,{value:e.value});case ta.hy.Error:return n.createElement(tU,{value:e.value});case ta.hy.Image:return n.createElement(tS,{thumbnailInput:e.value});case ta.hy.EditScope:return n.createElement(tM,{value:e.value});default:(0,a.xb)(e)}}let tI=p.cx.noWrap,tC=tI.colorTextDesign,tT=tI.colorTextSuccess,tN=tI.colorTextDanger,t_=tI.colorTextSecondary;function tD({value:e}){return n.createElement("span",{className:tT.$},e?"TRUE":"FALSE")}function tx({value:e}){return n.createElement("span",{className:tC.$},'"',e,'"')}function tA({value:e}){let t=(0,o.md)(E.AC).sensitiveTextPolicy;return n.createElement("span",{className:tC.$},'"',(0,tu.b)(e,t),'"')}function tO({value:e}){return n.createElement(f.Y,{width:"hug-contents"},n.createElement("span",{className:tC.$},(0,ts.PZ)(e)),n.createElement("span",{className:t_.$},"(compressed: `",e,"`)"))}function tw({value:e}){let t=to.F.format(e);return n.createElement(f.Y,{width:"hug-contents"},n.createElement("span",{className:p.cx.inlineBlock.w12.h12.bRadius2.$,style:{backgroundColor:t}}),n.createElement("span",{className:tC.$},t))}function tP({value:e}){return n.createElement("span",{className:tT.$},(0,ta.ZV)(e))}function tF({value:e}){return n.createElement("span",{className:tT.$},`<${(0,ta.ZV)(e.x)}, ${(0,ta.ZV)(e.y)}>`)}function tk({value:e}){let{m00:t,m01:r,m02:i,m10:l,m11:a,m12:s}=e;return n.createElement("div",{className:tT.$},"[",[[t,r,i],[l,a,s]].map(e=>`[${e.map(ta.ZV).join(", ")}]`).join(", "),"]")}function tR({value:e}){return n.createElement("span",{className:tT.$},t$(e))}function tV({index:e}){let t=(0,o.md)(E.AC).getBlobByIndex(e);return t?n.createElement("span",{className:tT.$},"Blob ",e," ::"," ","string"==typeof t?t:t$(t.bytes)):n.createElement(tU,{value:`Blob ${e} :: [MISSING]`})}function tL({value:e}){let t=tH(e,"");return n.createElement(n.Fragment,null,n.createElement("span",{className:tT.$},t),n.createElement("span",null,n.createElement(tB,{hash:t,name:"staging"})," | ",n.createElement(tB,{hash:t,name:"prod"})))}function tB({hash:e,name:t}){return n.createElement("a",{href:`https://${"staging"===t?"staging-":""}admin.figma.com/admin/image/${e}`},t)}function tM({value:e}){return n.createElement(f.Y,{width:"hug-contents"},n.createElement("span",{className:tT.$},e.type),n.createElement("span",{className:tC.$},e.label),e.editorType&&n.createElement("span",{title:"The editor type active when this scope was opened",className:t_.$},"(",e.editorType.toLowerCase(),")"))}function tG({value:e}){return n.createElement("span",{className:t_.$},"(",e,")")}function tU({value:e}){return n.createElement("span",{className:tN.$},e)}function t$(e){return`binary[${e.length}] = ${tH(e," ")}`}function tH(e,t){let r="";for(let n=0;n<e.length;++n){if(n>=30){r+="...";break}r+=function(e){let t=e.toString(16);return 1===t.length?"0"+t:t}(e[n])+t}return r}function tK({searchRef:e}){let t=(0,o.md)(E.AC),[r,i]=(0,o.fp)(S.AJ),l=(0,o.md)(S.Sd),a=n.useMemo(()=>l.map(e=>t.getNode(e)).filter(ti.Vq).map(e=>({node:e,matches:[{property:"guid",value:e.guid(),isExact:!0},{property:"name",value:e.name(),isExact:!0}]})).reverse(),[t,l]),{searchState:s,requestSearch:u,clearSearchResults:c,showRecentSelections:d,indexingCount:h}=function(e,t,r){let[i,l]=n.useState({status:"initial"}),a=n.useRef(0),[s,o]=n.useState(0),u=n.useMemo(()=>(0,tn.s)((t,r)=>{let n=++a.current,i=new TaskController({priority:"user-visible"});scheduler.postTask(()=>l({status:"indexing"}),{signal:i.signal,delay:300}).catch(()=>{}),e.search(t,r,o).then(e=>{i.abort(),n===a.current&&l({status:"success",results:e})}).catch(e=>{i.abort(),n===a.current&&l({status:"failure",error:e})})}),[e]),c=n.useCallback(()=>l({status:"initial"}),[]),d=n.useCallback(()=>l({status:"recent",results:r}),[r]);return{searchState:i,requestSearch:n.useCallback(e=>{c(),u(e,t)},[c,u,t]),showRecentSelections:d,clearSearchResults:c,indexingCount:s}}(t,r,a),m=n.useRef(null);(0,eL.ww)(m,c);let f=n.useCallback(e=>{c(),i(e.node.guid())},[c,i]);return n.createElement(ez.dP,{className:p.cx.flex1.$,ref:m,allowVim:!0},n.createElement(tz,{searchRef:e,requestSearch:u,showRecentSelections:d}),"initial"!==s.status&&n.createElement(tY,{searchState:s,selectResult:f,indexingCount:h,sensitiveTextPolicy:t.sensitiveTextPolicy}))}function tz({searchRef:e,requestSearch:t,showRecentSelections:r}){let{setKeyboardNavigationElement:i}=(0,ez.M3)({path:[0,0],id:"input"}),l=e=>{let n=e.target.value;n?t(n):r()};return n.createElement("input",{ref:t=>{i(t),e.current=t},type:"text",placeholder:"Search (hover the ? for details)",className:"figmascope_layer_search_bar--searchBar--xYknN",onFocus:l,onChange:l})}function tY({searchState:e,selectResult:t,indexingCount:r,sensitiveTextPolicy:i}){return n.createElement("div",{className:p.cx.absolute.zIndexModal.colorBg.b1.colorBorder.mt2.overflowAuto.$,style:{maxHeight:450,minWidth:500,boxShadow:"0px 2px 14px var(--color-shadow, rgba(0, 0, 0, 0.15))"}},"indexing"===e.status&&n.createElement(tW,{text:`Indexing search results (this may take a moment)... ${r?`[${r}/???]`:""}`}),"failure"===e.status&&n.createElement(tW,{text:`Error: ${e.error}.`}),"recent"===e.status&&e.results.map((e,r)=>n.createElement(tj,{key:r,result:e,index:r,onClick:()=>t(e)})),"success"===e.status&&(0===e.results.length?n.createElement(tW,{text:["No results.","With view-only permissions, nodes are not loaded until their page is opened.","show"===i?"":"Searching by name or text is disabled because text is being redacted."]}):e.results.map((e,r)=>n.createElement(tj,{key:r,result:e,index:r,onClick:()=>t(e)}))))}function tW({text:e}){return n.createElement(n.Fragment,null,(Array.isArray(e)?e:[e]).map((e,t)=>n.createElement("div",{key:t,className:p.cx.colorBg.colorTextSecondary.px8.py4.$},e)))}function tj({result:e,index:t,onClick:r}){let{node:i,matches:l}=e,{setKeyboardNavigationElement:a,keyboardNavigationItem:s,isFauxFocused:o}=(0,ez.M3)({path:[1,t],id:i.guidStr()});return n.useEffect(()=>{s&&0===t&&s.fauxFocus()},[s,t]),n.createElement("button",{ref:a,className:F()(p.cx.block.wFull.px4.py8.colorText.flex.itemsCenter.alignLeft.$,"figmascope_layer_search_bar--searchResult--tW-6s",o&&"figmascope_layer_search_bar--fauxFocus--pmMRc"),onClick:r},n.createElement(f.Y,{spacing:4},n.createElement(z,{iconConfig:e.node.iconConfig()}),n.createElement(et,{guid:e.node.guid()}),n.createElement(tl.R,{className:p.cx.overflowHidden.$,text:i.nameWithPage()}),n.createElement(f.M,null),l.filter(({property:e})=>!["guid","name","type"].includes(e)).map(({property:e,value:t},r)=>{let i=(0,ta.wC)(e,t);return n.createElement(f.Y,{key:r,spacing:4,width:"hug-contents"},n.createElement("div",null,e,":"),i&&n.createElement(tb,{value:i}))})))}var tJ=r(574176);function tq({children:e}){return n.createElement("div",{className:p.cx.colorBorder.px8.py4.bb1.bSolid.$},n.createElement(f.Y,null,e))}function tX(e){let t={className:"figmascope_toolbar_components--iconButton--cvjWZ",children:n.createElement(tJ.B,{svg:e.svg}),title:e.label,"aria-label":e.label};return"href"in e?n.createElement("a",{...t,href:e.href,target:"blank"}):n.createElement("button",{...t,onClick:e.onClick,disabled:e.disabled})}var tZ=r(444890),tQ=r(816679),t0=r(167198),t1=r(247866);function t8({searchRef:e}){let t=(0,o.md)(A),[r,i]=(0,o.fp)(S.jI),[a,s]=(0,o.fp)(S.JN),u=!!n.useContext(S.f),[c,d]=(0,o.fp)(S.bA),[h,p]=(0,o.fp)(eO),m=(0,o.md)(ew);return n.createElement(tq,null,n.createElement(tK,{searchRef:e}),n.createElement("select",{name:"sort",title:"Sets the layers panel sort order",onChange:e=>{let t=e.target.value;l.az.trackDefinedEvent("figmascope.sort_order_change",{order:function(e){switch(e){case eA.h.Position:return"position";case eA.h.Name:return"name";case eA.h.Memory:return"memory";case eA.h.NodeId:return"node_id"}}(t)}),p(t)},defaultValue:h},m.map(e=>n.createElement("option",{key:e,value:e},e))),n.createElement(tX,{label:"Select Previous",onClick:()=>{i(),l.az.trackDefinedEvent("figmascope.select_prev_next",{direction:"prev",source:"button"})},disabled:!r,svg:tZ.A}),n.createElement(tX,{label:"Select Next",onClick:()=>{s(),l.az.trackDefinedEvent("figmascope.select_prev_next",{direction:"next",source:"button"})},disabled:!a,svg:tQ.A}),n.createElement(tr.S,{label:"Follow selection",disabled:!u,checked:!!u&&c,onChange:e=>{u&&d(e.currentTarget.checked)}}),t&&n.createElement(t6,null))}function t6(){let[e,t]=(0,o.fp)(O),r=e.status===d.r.LOADING;return n.useEffect(()=>{t()},[t]),n.createElement(tX,{label:r?"Fetching scene graph validation failures":"Refetch scenegraph validation failures",onClick:t,svg:r?t0.A:t1.A})}var t5=r(402759),t2=r(841563),t4=r.n(t2),t3=r(531664),t9=r(860601),t7=r(659838),re=r(498606),rt=r(864362);let rr=(0,tc.jz)(tp.hVg),rn=(0,tc.jz)(tp.k$X),ri=eN(eC.No),rl=eN(),ra=n.memo(function({panel:e,items:t,diffItems:r}){let[i,l]=(0,o.fp)(ri),[a,s]=(0,o.fp)(rl),u=n.useMemo(()=>{let e=[],n=rp(t,void 0,a),l=null!=r,s=rp(r??[],void 0,a);for(let t of(0,ey.TR)(n,s,e=>rd(e,void 0)))e=l?e.concat(ry(t.left,t.right,0,void 0,i,a)):e.concat(rf(t.left??t.right,0,void 0,i,a));return e},[t,r,i,a]),c=n.createRef();function d(e){if(void 0!==u[e]){let t=u[e].value;if(t&&t.type===ta.hy.Image){let e=tg(t.value);if(e)return e.renderHeight+rn}}return rr}return n.useEffect(()=>{var e;null==(e=c.current)||e.resetAfterIndex(0)},[c,u]),n.createElement(ed.A,{disableWidth:!0},({height:t})=>n.createElement(eh._m,{ref:c,itemSize:d,itemCount:u.length,height:t,itemKey:e=>u[e].expansionKey,itemData:{panel:e,displayedProperties:u,togglePropertyExpanded:l,togglePropertyPinned:s},width:"100%"},rs))});function rs({style:e,index:t,data:{panel:r,displayedProperties:i,togglePropertyExpanded:l,togglePropertyPinned:a}}){let s=i[t],o=(0,eK.ZC)(s),[u,c]=n.useState(!1),d=n.useRef(void 0);n.useEffect(()=>(o&&!(0,t3.c2)(s.value,o.value)&&(clearTimeout(d.current),c(!0),d.current=setTimeout(()=>{c(!1)},250)),t9.lQ),[s,o]),n.useEffect(()=>()=>clearTimeout(d.current),[]);let h=(0,eg.zN)(e);return n.createElement(ru,{...s,style:h,isChanging:u,panel:r,index:t,togglePropertyExpanded:l,togglePropertyPinned:a})}let ro=n.memo(function({diffValue:e,value:t}){return n.createElement(n.Fragment,null,null!=e&&n.createElement(tb,{value:e}),null!=e&&n.createElement("span",null,"\u21E8"),null!=t&&n.createElement(tb,{value:t}))}),ru=n.memo(function({childExpansionKeys:e,expansionKey:t,indent:r,isExpanded:i,isChanging:a,isPinned:s,isLeaf:o,isImage:u,label:c,index:d,style:h,value:m,diffValue:y,diffType:g,panel:v,togglePropertyExpanded:E,togglePropertyPinned:S,onEdit:b}){let[I,C]=n.useState(!1),T=m&&b?I:void 0,N=I&&m&&b;return n.createElement(eq,{keyboardNavigationPath:[d],isLeaf:o,isExpanded:i,isChanging:a,indent:u?0:r,style:u?{...h,height:"fit-content",width:"100%",alignItems:"flex-start"}:h,toggleExpanded:r=>{C(!1),i||l.az.trackDefinedEvent("figmascope.expand_row",{field:c,panel:v}),E(t,r?e:[])},isPinned:s,togglePinned:u?void 0:()=>{s||l.az.trackDefinedEvent("figmascope.pin_row",{field:c,panel:v}),S(t)},diffType:g,setIsEditing:e=>{m&&b&&(C(e),l.az.trackDefinedEvent("figmascope.edit_property",{field:c}))},isEditing:T},u?n.createElement(ro,{diffValue:y,value:m}):n.createElement(n.Fragment,null,n.createElement("span",{className:p.cx.colorText.$},c),n.createElement("div",{className:p.cx.ellipsis.noWrap.overflowHidden.alignCenter.$},N?n.createElement(rc,{onEdit:b,onFinish:()=>{C(!1)},valueForEditing:m}):n.createElement(ro,{diffValue:y,value:m}))),n.createElement(f.M,null))});function rc({onFinish:e,onEdit:t,valueForEditing:r}){let[i,l]=n.useState(!1),a=(0,ta.M2)(r),[s,o]=n.useState(a||""),u=()=>{if(t&&r){let n=(0,ta.iE)(s,r.type);if(!n){l(!0);return}try{t(n)}catch(e){l(!0);return}e()}};return n.createElement(n.Fragment,null,n.createElement(t7.L,{name:"figmaScopeTreeItem",value:s,type:"string",className:F()("figmascope_properties_panel--editingInput--yqWcf",{"figmascope_properties_panel--editingInputError--rY95m":i}),required:!0,onChange:e=>{l(!1),o(e.target.value)},onKeyDown:t=>{13===t.keyCode?u():27===t.keyCode&&e()},autoFocus:!0}),n.createElement("button",{className:"figmascope_properties_panel--editingInputButtonCancel--cJrnv figmascope_properties_panel--_editingInputButtonBase--CKA0R",onClick:e},"Cancel"),n.createElement("button",{className:"figmascope_properties_panel--editingInputButtonDone--M4EHU figmascope_properties_panel--_editingInputButtonBase--CKA0R",onClick:()=>{u()}},"Done"),n.createElement("div",{className:"figmascope_properties_panel--editingWarningIcon--lTGoK","data-tooltip-type":re.Ib.TEXT,"data-tooltip":"Editing this field will use the plugin API under-the-hood. This may behave differently\n          compared to modifying this field using the UI or Selection Properties.","data-tooltip-offset-y":12},n.createElement(tJ.B,{svg:rt.A,height:"12px",width:"12px",autosize:!0})))}let rd=(e,t)=>{let r=e.key??e.label;return t?[t,r].join("."):r},rh=(e,t)=>!!t[e],rp=(e,t,r)=>[...e.filter(e=>rh(rd(e,t),r)),...e.filter(e=>!rh(rd(e,t),r))],rm=(e,t,r,n)=>{if(e)return!1;let i=n[t];return null!=i?i:r},rf=(e,t,r,n,i)=>{var l;let a=rd(e,r),s=0===e.children.length,o=(null==(l=e.value)?void 0:l.type)===ta.hy.Image,u=rm(s,a,e.expandByDefault,n),c=ef()(rp(e.children??[],a,i),e=>rf(e,t+1,a,n,i)),d={label:e.label,value:e.value,isExpanded:u,isLeaf:s,isImage:o,indent:t,expansionKey:a,childExpansionKeys:ef()(c,e=>[e.expansionKey,...e.childExpansionKeys]),isPinned:rh(a,i),onEdit:e.onEdit};return u?[d,...c]:[d]},ry=(e,t,r,n,i,l)=>{var a;let s=e??t;if(!s)throw Error("Nothing to diff");if(e&&t&&rd(e,n)!==rd(t,n))throw Error("Mismatched keys");let o=rd(s,n),u=rp((null==e?void 0:e.children)??[],o,l),c=rp((null==t?void 0:t.children)??[],o,l),d=(0,ey.TR)(u,c,e=>rd(e,o)),h=!1,p=ef()(d,({left:e,right:t})=>{let n=ry(e,t,r+1,o,i,l);return h=h||null!=n[0].diffType,n}),m=0===d.length,f=!t4()(null==e?void 0:e.value,null==t?void 0:t.value),y=(0,v.VT)(e,t,f,h),g=rm(m,o,s.expandByDefault,i),E=(null==(a=s.value)?void 0:a.type)===ta.hy.Image,S={label:s.label,value:s.value,diffValue:e&&t&&f?null==t?void 0:t.value:void 0,isExpanded:g,isLeaf:m,isImage:E,indent:r,expansionKey:o,childExpansionKeys:ef()(p,e=>[e.expansionKey,...e.childExpansionKeys]),isPinned:rh(o,l),diffType:y};return g?[S,...p]:[S]};var rg=r(506563),rv=r(91365),rE=r(630834);function rS({selectedNode:e,diffNode:t,onClose:r}){return n.createElement(tq,null,e?n.createElement(rb,{selectedNode:e,diffNode:t}):n.createElement(f.M,null),n.createElement(tX,{label:"Help",href:rg.e,svg:rv.A}),r&&n.createElement(tX,{label:"Close FigmaScope",onClick:r,svg:rE.default}))}function rb({selectedNode:e,diffNode:t}){let[r,i]=(0,o.fp)(v.Oz),l=(0,u.Xr)(S.AJ);return n.createElement("div",{className:p.cx.flex1.ml10.my4.$},n.createElement("div",null,t&&n.createElement("span",{className:p.cx.colorTextSecondary.$},"Diffing "),n.createElement("span",{className:p.cx.fontSemiBold.$},e.nameWithPage()),t&&n.createElement("span",{className:p.cx.colorTextSecondary.$}," against "),t&&n.createElement("span",{className:p.cx.fontSemiBold.$},t.nameWithPage())),r&&n.createElement("div",{className:p.cx.colorTextSecondary.mt8.$},n.createElement(f.Y,{spacing:8,width:"hug-contents",height:"hug-contents",verticalAlignItems:"start"},n.createElement("span",null,"Snapshot of"," ",n.createElement(h.CY,{onClick:()=>l(r.node.guidStr()),className:p.cx.colorTextFigjam.fontSemiBold.$,trusted:!0},r.node.name()),r.type===v.ok.Tree&&" and full subtree"," was taken at"," ",r.time.toLocaleTimeString("en-US")),n.createElement(h.CY,{onClick:()=>i({type:"refresh"}),className:p.cx.colorTextDesign.$,trusted:!0},"Refresh"),n.createElement(h.CY,{onClick:()=>i({type:"clear"}),className:p.cx.colorTextDanger.$,trusted:!0},"Finish"))))}function rI(){let e=(0,o.md)(E.o3),[t,r]=(0,o.fp)(E.XM),i=n.useRef(null);if(e.status!==d.r.SUCCESS)return n.createElement("div",null,"Loading...");function l(t){return e.status!==d.r.SUCCESS?0:16*Object.keys(e.value.scenes[t].getResourceMetadataDisplayInfo()).length+16+8}return n.createElement(n.Fragment,null,n.createElement(ed.A,{disableWidth:!0},({height:a})=>n.createElement(eh._m,{itemSize:l,itemCount:e.value.scenes.length,height:a,ref:i,itemData:{scenes:e.value.scenes,activeSceneIndex:t,setActiveSceneIndex:r},width:"100%"},rC)))}function rC({style:e,data:{scenes:t,activeSceneIndex:r,setActiveSceneIndex:i},index:l}){let a=t[l],s=(0,eg.zN)(e);return n.createElement(rT,{style:s,scene:a,selected:l===r,setSelected:()=>{i(l)}})}function rT(e){let{style:t,scene:r,selected:i,setSelected:l}=e,a=r.getResourceMetadataDisplayInfo();return n.createElement("button",{style:t,onClick:l,className:F()("figmascope_scene_switcher--item--Ufk-a",i&&"figmascope_scene_switcher--selected--DWHuZ")},n.createElement(f.Y,{direction:"vertical",width:"fill-parent",padding:8,spacing:4},Object.entries(a).map(([e,t])=>n.createElement("span",{key:e},n.createElement(y.E,{color:"secondary"},e,": "),n.createElement(y.E,{color:"secondary",fontFamily:"monospace",fontWeight:"bold"},t)))))}let rN="figmascope_main_view--left--CUYrg",r_=n.memo(function({embedded:e=!1,emptyStateContent:t,onClose:r,appSelection:i,setAppSelection:l,pagesList:a}){let s=(0,o.md)(E.o3);switch(s.status){case d.r.INIT:return t??n.createElement(t5.zG,null);case d.r.LOADING:return n.createElement(t5.zG,null);case d.r.FAILURE:return n.createElement(t5.rf,{error:s.error});case d.r.SUCCESS:{let t=n.createElement(rx,{embedded:e,appSelection:i,setAppSelection:l,onClose:r,pagesList:a});return e?t:n.createElement(rD,null,t)}}});function rD({children:e}){let t=(0,o.md)(E.BJ);return n.createElement("div",{className:p.cx.hFull.$},n.createElement(f.Y,{direction:"horizontal",width:"fill-parent",height:32,padding:8,spacing:32,backgroundColor:"toolbar"},n.createElement(y.E,{fontWeight:"bold",color:"toolbar"},t.type),Object.entries(t.properties).map(([e,t])=>n.createElement("span",{key:e},n.createElement(y.E,{color:"toolbar-secondary"},e,": "),n.createElement(y.E,{color:"toolbar",fontFamily:"monospace",fontWeight:"bold"},t))),"File"===t.type&&n.createElement(h.vx,{href:`/admin/figmascope/multiplayer_journals/${t.properties["File Key"]}`,target:"_blank"},"View multiplayer journals")),e)}function rx({embedded:e,onClose:t,appSelection:r,setAppSelection:h,pagesList:p}){(0,S.vj)({appSelection:r,setAppSelection:h});let f=(0,o.md)(E._V),y=n.useRef(null),b=n.useRef(null),{windowInnerWidth:I}=(0,s.l)(),[C,T]=n.useState("15%"),[N,_]=n.useState("35%"),[D,x]=n.useState("50%"),A=n.useRef(null),[w,P]=(0,i.i)({onDrag(e){let t=e.clientX/I;T(`${(100*t).toFixed(2)}%`)}}),[F,k]=(0,i.i)({onDrag(e){let t=A.current?A.current.getBoundingClientRect().right:0,r=(e.clientX-t)/I;_(`${(100*r).toFixed(2)}%`)}}),[R,V]=(0,i.i)({onDrag(e){let t=b.current;if(!t)return;let r=(e.clientX-t.getBoundingClientRect().left)/t.clientWidth;x(`${(100*r).toFixed(2)}%`)}}),L=(0,u.Xr)(S.jI),B=(0,u.Xr)(S.JN),M=n.useCallback(e=>{let t=y.current;document.activeElement!==t&&(e.keyCode===c.Uz.FORWARD_SLASH&&t?(t.focus(),e.preventDefault()):e.keyCode===c.Uz.BRACKET_LEFT?(l.az.trackDefinedEvent("figmascope.select_prev_next",{direction:"prev",source:"keyboard"}),L()):e.keyCode===c.Uz.BRACKET_RIGHT&&(l.az.trackDefinedEvent("figmascope.select_prev_next",{direction:"next",source:"keyboard"}),B()))},[L,B]),G=(0,o.md)(S.AJ),U=(0,o.md)(S.Nq),$=(0,o.md)(v.s3),H=(0,o.md)(O),K=n.useMemo(()=>{let e;if(U&&(e=U.computedProperties(),H.status===d.r.SUCCESS)){if("DOCUMENT"===U.nodeType())e=[...e,(0,g.f3)(H.value)];else{let t=H.value.get(U.guidStr());t&&t.length&&(e=[...e,(0,g.Wh)(t)])}}return e??[]},[U,H]),z=(0,o.md)(E.Ah);return(n.useEffect(()=>{z&&l.az.trackDefinedEvent("figmascope.used",{scene_type:(()=>{switch(z.type){case"server_checkpoint":return"checkpoint";case"server_checkpoint_diff":case"local_diff_file":return"diff";case"multiplayer_journal":case"multiplayer_journals":return"multiplayer_journal";case"server_file":case"local_file":case"pasted_data":break;default:(0,a.j)(z)}return"file"})(),embedded:!!e,backend:"backend"in z?z.backend:"unknown"})},[z,e]),(0,o.md)(E.zm))?n.createElement(S.f.Provider,{value:h??null},n.createElement("div",{className:"figmascope_main_view--root--Bd-g1",style:m.sx.if(w||F||R,{cursor:"ew-resize"}).$,onKeyDown:M},f>1&&n.createElement("div",{className:rN,style:{width:C}},n.createElement(ej,{className:"figmascope_main_view--sceneSwitcherPanel--JLcE9"},n.createElement("div",{ref:A,...P({style:{position:"absolute",top:0,bottom:0,right:"-3px",width:"5px",gridArea:"center",cursor:"ew-resize",zIndex:9}})}),n.createElement(rI,null))),n.createElement("div",{className:rN,style:{width:N}},n.createElement(t8,{searchRef:y}),n.createElement(ej,{className:"figmascope_main_view--layersPanel---8k3A"},n.createElement("div",{...k({style:{position:"absolute",top:0,bottom:0,right:"-3px",width:"5px",gridArea:"center",cursor:"ew-resize",zIndex:9}})}),n.createElement(e5,{pagesList:p}))),n.createElement("div",{className:"figmascope_main_view--right--7jX1p"},n.createElement(rS,{selectedNode:U,diffNode:$,onClose:t}),U&&n.createElement("div",{className:"figmascope_main_view--rightContents--iSsTw",ref:b},n.createElement(ej,{className:"figmascope_main_view--nodeFieldsPanel--spSyC",style:{width:D}},n.createElement("div",{...V({style:{position:"absolute",top:0,bottom:0,right:"-3px",width:"5px",gridArea:"center",cursor:"ew-resize",zIndex:9}})}),U?n.createElement(ra,{panel:"middle",items:U.nodeFieldProperties(),diffItems:null==$?void 0:$.nodeFieldProperties(),key:G}):n.createElement("h1",null,"Node not found: ",n.createElement(et,{guid:G}))),n.createElement(ej,{className:"figmascope_main_view--computedPropertiesPanel--No2ua"},U&&n.createElement(ra,{panel:"right",items:K,diffItems:null==$?void 0:$.computedProperties(),key:G})))))):n.createElement(t5.rf,{error:"This scene has no root nodes. This is likely a bug in FigmaScope."})}}}]);

//# debugId=f158a141-9af4-57d6-88fd-19d1885fd4b5

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/fffea0f735eaca7d44b6a4fe13da8493c0cda21d/5246-fcba9f1fce2d163f.min.js.map